(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"3j5D":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={update:function(){"undefined"!==typeof window&&(n.hasSupport="ontouchstart"in window,n.browserSupportsApi=Boolean(window.TouchEvent))}};n.update(),t.default=n},"6DJn":function(e,t,i){e.exports={team:"_3CNVve9w",teamWrapper:"_3Yq9heUd",navTarget:"_1zhVFXW0",content:"_3kshh8xV",title:"_32b1Mi9T",video:"_1oVfHa7I",image:"VOtx0Zz0"}},"9WlP":function(e,t,i){e.exports={header:"RZHszgIs",mediaWrapper:"_3l0L_TM4",media:"_2OghAQhK",title:"_2kqQpUQH",button:"_1jnC8qVe"}},"9jn/":function(e,t,i){e.exports={cubes:"_2lth6mUW"}},"A/ap":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={update:function(){if("undefined"!==typeof window&&"function"===typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),i=function(){};window.addEventListener("testPassiveEventSupport",i,t),window.removeEventListener("testPassiveEventSupport",i,t),n.hasSupport=e}}};n.update(),t.default=n},A0Lk:function(e,t,i){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function i(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function n(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function r(e){var t=e.a.offsetWidth,i=t+100;return e.f.style.width=i+"px",e.c.scrollLeft=i,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function a(e,i){function n(){var e=a;r(e)&&e.a.parentNode&&i(e.g)}var a=e;t(e.b,n),t(e.c,n),r(e)}function s(e,t){var i=t||{};this.family=e,this.style=i.style||"normal",this.weight=i.weight||"normal",this.stretch=i.stretch||"normal"}var o=null,l=null,c=null,u=null;function h(){return null===u&&(u=!!document.fonts),u}function d(){if(null===c){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(t){}c=""!==e.style.font}return c}function m(e,t){return[e.style,e.weight,d()?e.stretch:"","100px",t].join(" ")}s.prototype.load=function(e,t){var r=this,s=e||"BESbswy",c=0,u=t||3e3,d=(new Date).getTime();return new Promise((function(e,t){if(h()&&!function(){if(null===l)if(h()&&/Apple/.test(window.navigator.vendor)){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);l=!!e&&603>parseInt(e[1],10)}else l=!1;return l}()){var f=new Promise((function(e,t){!function i(){(new Date).getTime()-d>=u?t(Error(u+"ms timeout exceeded")):document.fonts.load(m(r,'"'+r.family+'"'),s).then((function(t){1<=t.length?e():setTimeout(i,25)}),t)}()})),p=new Promise((function(e,t){c=setTimeout((function(){t(Error(u+"ms timeout exceeded"))}),u)}));Promise.race([p,f]).then((function(){clearTimeout(c),e(r)}),t)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))}((function(){function l(){var t;(t=-1!=g&&-1!=v||-1!=g&&-1!=y||-1!=v&&-1!=y)&&((t=g!=v&&g!=y&&v!=y)||(null===o&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),o=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=o&&(g==b&&v==b&&y==b||g==w&&v==w&&y==w||g==x&&v==x&&y==x)),t=!t),t&&(T.parentNode&&T.parentNode.removeChild(T),clearTimeout(c),e(r))}var h=new i(s),f=new i(s),p=new i(s),g=-1,v=-1,y=-1,b=-1,w=-1,x=-1,T=document.createElement("div");T.dir="ltr",n(h,m(r,"sans-serif")),n(f,m(r,"serif")),n(p,m(r,"monospace")),T.appendChild(h.a),T.appendChild(f.a),T.appendChild(p.a),document.body.appendChild(T),b=h.a.offsetWidth,w=f.a.offsetWidth,x=p.a.offsetWidth,function e(){if((new Date).getTime()-d>=u)T.parentNode&&T.parentNode.removeChild(T),t(Error(u+"ms timeout exceeded"));else{var i=document.hidden;!0!==i&&void 0!==i||(g=h.a.offsetWidth,v=f.a.offsetWidth,y=p.a.offsetWidth,l()),c=setTimeout(e,50)}}(),a(h,(function(e){g=e,l()})),n(h,m(r,'"'+r.family+'",sans-serif')),a(f,(function(e){v=e,l()})),n(f,m(r,'"'+r.family+'",serif')),a(p,(function(e){y=e,l()})),n(p,m(r,'"'+r.family+'",monospace'))}))}))},e.exports=s}()},A12Y:function(e,t,i){e.exports={change:"_3zhv9Z32",wrapper:"_2VFyj-Ng",ai:"_3rQ8tdyl",description:"_2nfzHsON",tablet:"_3Tazh7V_",mobile:"_1PkO8i7y",shipments:"_4Qp5_3v7",shipments__number:"_1xfRVMBO",shipments__description:"_2xM_8MPb"}},C5sa:function(e,t,i){e.exports={container:"_3zoJOmD9","is-active":"_1U9dSYyP",size:"_3lPlDrTT"}},Di7X:function(e,t,i){e.exports={moved:"-gk7F3fY",title:"_3F8CGNCt"}},Eu8j:function(e,t,i){e.exports={counter:"mcIrzMfy",numbers:"_2-99Posj",numbersWrapper:"wM77iqzM",black:"_2uIOiXL6"}},Fs82:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(i("kAgB")),r=o(i("JEve")),a=o(i("3j5D")),s=o(i("A/ap"));function o(e){return e&&e.__esModule?e:{default:e}}var l={state:{detectHover:n.default,detectPointer:r.default,detectTouchEvents:a.default,detectPassiveEvents:s.default},update:function(){l.state.detectHover.update(),l.state.detectPointer.update(),l.state.detectTouchEvents.update(),l.state.detectPassiveEvents.update(),l.updateOnlyOwnProperties()},updateOnlyOwnProperties:function(){if("undefined"!==typeof window){l.passiveEvents=l.state.detectPassiveEvents.hasSupport||!1,l.hasTouch=l.state.detectTouchEvents.hasSupport||!1,l.deviceType=(t=l.hasTouch,i=l.state.detectHover.anyHover,n=l.state.detectPointer.anyFine,r=l.state,t&&(i||n)?"hybrid":t&&Object.keys(r.detectHover).filter((function(e){return"update"!==e})).every((function(e){return!1===r.detectHover[e]}))&&Object.keys(r.detectPointer).filter((function(e){return"update"!==e})).every((function(e){return!1===r.detectPointer[e]}))?window.navigator&&/android/.test(window.navigator.userAgent.toLowerCase())?"touchOnly":"hybrid":t?"touchOnly":"mouseOnly"),l.hasMouse="touchOnly"!==l.deviceType,l.primaryInput=("mouseOnly"===l.deviceType?"mouse":"touchOnly"===l.deviceType&&"touch")||l.state.detectPointer.fine&&"mouse"||l.state.detectPointer.coarse&&"touch"||"mouse";/windows/.test(window.navigator.userAgent.toLowerCase())&&/chrome/.test(window.navigator.userAgent.toLowerCase())&&((e=parseInt(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1],10))>=59&&e<62)&&l.hasTouch&&(l.deviceType="hybrid",l.hasMouse=!0,l.primaryInput="mouse")}var e,t,i,n,r}};l.updateOnlyOwnProperties(),t.default=l},JEve:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={update:function(){"undefined"!==typeof window&&"function"===typeof window.matchMedia&&(n.fine=window.matchMedia("(pointer: fine)").matches,n.coarse=window.matchMedia("(pointer: coarse)").matches,n.none=window.matchMedia("(pointer: none)").matches,n.anyFine=window.matchMedia("(any-pointer: fine)").matches,n.anyCoarse=window.matchMedia("(any-pointer: coarse)").matches,n.anyNone=window.matchMedia("(any-pointer: none)").matches)}};n.update(),t.default=n},NNSm:function(e,t,i){e.exports={image:"_2t_8E6HR"}},OMcD:function(e,t,i){e.exports={videoPlayer:"_2XMO0oLK",cta:"_2Ptl0Dgv",plyr:"_160bb10L"}},RXBc:function(e,t,i){"use strict";i.r(t),i.d(t,"__N_SSG",(function(){return gn}));var n=i("q1tI"),r=i.n(n),a=i("8Kt/"),s=i.n(a),o=i("wG+1"),l=i("SE8F"),c=i("0a+w"),u=function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=function(){return t=void 0,e.apply(void 0,r)};clearTimeout(t),t=setTimeout(s,i)}},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=arguments.length>2?arguments[2]:void 0;return Object(n.useCallback)(u(e,t),i)},d=[],m=null,f=0,p=function e(t){if(void 0!==f){var i=t-f;d.forEach((function(e){return e(i)}))}f=t,m=window.requestAnimationFrame(e)},g=function(e,t){Object(n.useEffect)((function(){return t?d.unshift(e):d.push(e),m||(m=window.requestAnimationFrame(p)),function(){var t=d.indexOf(e);-1!==t&&d.splice(t,1),d.length||(window.cancelAnimationFrame(m),m=null)}}),[e,t])},v=i("Fs82"),y=i.n(v),b=i("Zh+x"),w=i("9cbU"),x=function(e){return Object(w.a)("scroll",e)},T=i("TSYQ"),k=i.n(T),E=i("C5sa"),A=i.n(E),M=r.a.createElement,C=Object(n.forwardRef)((function(e,t){var i=e.children,a=e.enabled,s=void 0===a||a,o=e.className,l=e.onChangePageY,c=e.disablePointerEvents,u=void 0===c||c,h=Object(n.useRef)(),d=Object(n.useRef)(),m=Object(n.useRef)(s),f=Object(n.useRef)(0),p=Object(n.useRef)(0),v=Object(n.useRef)(0),w=Object(n.useRef)(0),T=Object(n.useRef)("undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1).current?.35:.13,E=Object(n.useState)(s),O=E[0],S=E[1],_=Object(n.useState)(null),P=_[0],N=_[1],j=Object(n.useRef)(!1),R=Object(n.useRef)("mouse"),I=Object(n.useRef)(!1);Object(n.useEffect)((function(){history.scrollRestoration&&(history.scrollRestoration="manual"),requestAnimationFrame((function(){B(!0)}))}),[]),Object(n.useEffect)((function(){"touch"!==y.a.primaryInput&&S(s),m.current=s}),[s]);var L=function(e){I=!0,R="touch"},F=function(e){I=!1},D=function(e){R&&"touch"!==R||(R="mouse"),I=!1},B=function(e){m.current&&(e?(p.current=f.current,w.current=0):I||"touch"!==R&&"trackpad"!==R?(p.current+=(f.current-p.current)*T,w.current=f.current-p.current):(p.current+=.28*(f.current-p.current),w.current=f.current-p.current),u&&(!j&&Math.abs(w)>10?(j=!0,h.current.style.pointerEvents="none"):j&&Math.abs(w)<=10&&(j=!1,h.current.style.pointerEvents="")));var t=(100*(p.current+.01)|0)/100;if(t!==v.current){C.y=t,C.vy=w.current;var i="translate3d(0,".concat(-t,"px,0)");h.current.style.transform=i,l&&l(p.current)}v.current=t};t&&(t.current={tick:B,reset:function(){p.current=f.current=w.current=0,B(!0)}});var z=Object(n.useRef)(),U=Object(n.useRef)(!0);return"undefined"!==typeof document&&(z.current="onwheel"in document?"wheel":"onmousewheel"in document?"mousewheel":"DOMMouseScroll","touch"!==y.a.primaryInput&&(Object(b.a)(h,(function(e){if(N(e.height),h.current&&U.current){p.current=v.current=f.current=window.pageYOffset;var t=!!y.a.passiveEvents&&{passive:!0};h.current.addEventListener(z.current,D,t),h.current.addEventListener("touchstart",L,t),h.current.addEventListener("touchend",F,t),h.current.classList.add(A.a["is-active"]),U.current=!1}B(!0)})),g((function(){return B()}),!0)),x((function(e){m.current&&(f.current=e.pageYOffset),"touch"===y.a.primaryInput&&(C.y=e.pageYOffset)}))),M(r.a.Fragment,null,M("div",{className:k()(A.a.container,o),ref:h},i),M("div",{className:A.a.size,ref:d,style:{height:P+"px",display:O?"":"none"}}))}));C.y=0,C.vy=0;var O=C,S=r.a.createElement,_=function(e){var t=e.children,i=e.className,r=e.selector,a=e.ratio,s=void 0===a?1:a,o=e.scale,u=void 0===o?1:o,d=e.rotateInit,m=void 0===d?0:d,f=e.ease,p=void 0===f?1:f,v=e.rotate,b=e.origin,w=void 0===b?"center":b,x=e.as,T=void 0===x?"div":x,k=Object(n.useRef)(),E=Object(n.useRef)(),A=T;if("touch"!==y.a.primaryInput){var M=Object(n.useRef)(0),C=Object(n.useRef)(0),_=Object(n.useRef)(m),P=Object(n.useRef)(0),N=Object(n.useRef)(null),j=Object(n.useRef)(0),R=Object(n.useRef)(0),I=Object(n.useRef)(0),L=+s-1,F=function(e){M.current=e.innerWidth,C.current=e.innerHeight,L&&E.current&&(j.current=Object(l.a)(E.current),I.current=E.current.offsetHeight,R.current=C.current<I.current?j.current%C.current:0,"center"===w?R.current=(R.current/2+C.current-I.current>>1)-j.current:"bottom"===w&&(R.current+=C.current-j.current))};Object(n.useEffect)((function(){E.current=r?k.current.querySelector(r):k.current,F({innerWidth:M.current||window.innerWidth,innerHeight:C.current||window.innerHeight})}),[]),Object(c.a)(h(F)),g((function(){if(L){var e=j.current-O.y,t=(-O.y-R.current)*L;if(P.current+=(t-P.current)*p,v){var i=-v*e/C.current+m;_.current+=(i-_.current)*p}var n=(100*P.current|0)/100;if(E.current&&n!==N.current){var r=1!==u?" scale(".concat(u,")"):"",a=_.current?" rotate(".concat(_.current,"deg)"):"";E.current.style.transform="translate3d(0,".concat(n,"px,0)").concat(a).concat(r)}N.current=n}}))}return S(A,{ref:k,className:i},t)},P=i("9WlP"),N=i.n(P),j=i("TeCs"),R=i("Drer"),I=i("z/o8"),L=r.a.createElement,F=function(e){return L("svg",e,L("path",{d:"M5.657 0v12.674l-4.464-4.6L0 9.305 6.5 16 13 9.303l-1.193-1.228-4.464 4.599V0z",fill:"#fff"}))};F.defaultProps={fill:"none",height:"16",viewBox:"0 0 13 16",width:"13",xmlns:"http://www.w3.org/2000/svg"};var D=function(e){var t=e.title,i=e.videoSrcs,r=Object(n.useRef)(),a=Object(n.useRef)(),s=Object(n.useRef)();return Object(c.a)((function(e){r.current.style.height=e.innerHeight+"px"})),Object(n.useEffect)((function(){I.a.to(a.current.querySelectorAll("span>span"),1.6,{y:0,stagger:.04,ease:"expo.out",delay:.5}),I.a.fromTo(s.current,1.4,{y:-20},{opacity:1,delay:1.2,y:0,clearProps:"transform",ease:"expo.out"})}),[]),L("header",{className:N.a.header,ref:r},L(_,{className:N.a.mediaWrapper,ratio:.6,origin:"top"},L(j.a,{className:N.a.media,ratio:16/9,srcs:i,loop:!0})),L("h1",{className:N.a.title,ref:a},o.RichText.asText(t).split(" ").map((function(e,t){return L("span",{key:t},L("span",null,e))}))),L("button",{onClick:function(){I.a.to(window,{scrollTo:{y:R.a.innerHeight},duration:1,ease:"quart.out"})},className:k()("btn",N.a.button),ref:s,"aria-label":"Scroll to continue"},L(F,null)))},B=i("qLLh"),z=r.a.createElement,U=function(){var e="".concat(B.b.replace(".cdn","").slice(0,-6),"documents/");return z(r.a.Fragment,null,z("div",{className:"setup-repo"},z("h1",null,"Good job!"),z("h2",null,"You're halfway done with setting up your Prismic website"),z("h4",null,"Just visit your ",z("a",{href:e},"Prismic dashboard")," and add some content there")))},V=i("xw4e"),q=i.n(V),H=r.a.createElement,W=function(e){var t=e.data;return H("section",{className:q.a.about,id:"about"},H("p",null,o.RichText.asText(t.intro_text)))},X=i("ODXe"),Y=i("yKRf"),G=i.n(Y),K=i("udPl"),$=i("ob4f"),Q=i("CdJN"),J=r.a.createElement,Z=function(e){var t=e.data,i=Object(n.useContext)(Q.a).setBackground,r=Object(n.useRef)(),a=Object($.b)({rootMargin:"-100% 0px 2000px 0px"}),s=Object(X.a)(a,2),l=s[0],c=s[1],u=Object(n.useCallback)((function(e){r.current=e,l(e)}),[l]);return Object(K.a)(r),Object(n.useEffect)((function(){setTimeout((function(){i(c?"#3B60BF":"#0E1122")}),0)}),[c]),J("section",{className:G.a.motion},J("div",{ref:u},J("h2",{className:G.a.title},o.RichText.asText(t.motion_title)),J(j.a,{className:G.a.media,ratio:1,srcs:[{src:t.motion_video_hd[0].text,minWidth:1500},{src:t.motion_video_md[0].text,minWidth:900},{src:t.motion_video_sd[0].text,minWidth:0}]})))},ee=i("A12Y"),te=i.n(ee),ie=i("1OyB"),ne=i("vuIU"),re=i("JX7q"),ae=i("Ji7U"),se=i("md7G"),oe=i("foSv"),le=i("Ff2n"),ce=i("wx14"),ue=i("rePB"),he=i("NNSm"),de=i.n(he),me=r.a.createElement;function fe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Object(oe.a)(e);if(t){var r=Object(oe.a)(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Object(se.a)(this,i)}}function pe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ge(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(i),!0).forEach((function(t){Object(ue.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):pe(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var ve,ye=function(e){var t=ge({},e),i=t.sizes,n=t.critical;return i&&(t.fluid=i,delete t.sizes),n&&(t.loading="eager"),t.fluid&&(t.fluid=function(e){var t=[],i=[];e.forEach((function(e){return(e.media?t:i).push(e)})),i.length>1&&!1;return[].concat(t,i)}([].concat(t.fluid))),t},be=function(e){var t=e.media;return!!t&&(Ae&&!!window.matchMedia(t).matches)},we=function(e){var t=e.fluid;return xe(t).src},xe=function(e){if(Ae&&function(e){return!!e&&Array.isArray(e)&&e.some((function(e){return"undefined"!==typeof e.media}))}(e)){var t=e.findIndex(be);if(-1!==t)return e[t];var i=e.findIndex((function(e){return"undefined"===typeof e.media}));if(-1!==i)return e[i]}return e[0]},Te=Object.create({}),ke=function(e){var t=ye(e),i=we(t);return Te[i]||!1},Ee=!1,Ae=!0,Me=Ae&&window.IntersectionObserver,Ce=new WeakMap;function Oe(e){return e.map((function(e){var t=e.src,i=e.media,n=e.base64;return me("source",{key:t,media:i,srcSet:n})}))}var Se=function(e,t){var i=("undefined"===typeof ve&&Ae&&window.IntersectionObserver&&(ve=new window.IntersectionObserver((function(e){e.forEach((function(e){if(Ce.has(e.target)){var t=Ce.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(ve.unobserve(e.target),Ce.delete(e.target),t())}}))}),{rootMargin:"500px"})),ve);return i&&(i.observe(e),Ce.set(e,t)),function(){i.unobserve(e),Ce.delete(e)}},_e=function(e){var t=e.src,i=e.imageVariants,n=e.generateSources,r=e.spreadProps,a=e.ariaHidden,s=me(Pe,Object(ce.a)({src:t},r,{ariaHidden:a}));return i.length>1?me("picture",null,n(i),s):s},Pe=r.a.forwardRef((function(e,t){var i=e.sizes,n=(e.srcSet,e.src),r=e.style,a=e.onLoad,s=e.onError,o=e.loading,l=e.draggable,c=e.ariaHidden,u=Object(le.a)(e,["sizes","srcSet","src","style","onLoad","onError","loading","draggable","ariaHidden"]);return me("img",Object(ce.a)({"aria-hidden":c,sizes:i,src:n},u,{onLoad:a,onError:s,ref:t,loading:o,draggable:l,style:ge({position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",objectPosition:"center"},r)}))})),Ne=function(e){Object(ae.a)(i,e);var t=fe(i);function i(e){var n;Object(ie.a)(this,i),(n=t.call(this,e)).seenBefore=Ae&&ke(e),n.isCritical="eager"===e.loading||e.critical,n.addNoScript=!(n.isCritical&&!e.fadeIn),n.useIOSupport=!Ee&&Me&&!n.isCritical&&!n.seenBefore;var a=n.isCritical||Ae&&(Ee||!n.useIOSupport);return n.state={hasMounted:!1,isVisible:a,imgLoaded:!1,imgCached:!1,fadeIn:!n.seenBefore&&e.fadeIn},n.innerRef=e.innerRef,n.imageRef=r.a.createRef(),n.handleImageLoaded=n.handleImageLoaded.bind(Object(re.a)(n)),n.handleRef=n.handleRef.bind(Object(re.a)(n)),n}return Object(ne.a)(i,[{key:"componentDidMount",value:function(){if(this.state.isVisible&&"function"===typeof this.props.onStartLoad&&this.props.onStartLoad({wasCached:ke(this.props)}),this.isCritical){var e=this.imageRef.current;e&&e.complete&&this.handleImageLoaded()}this.setState({hasMounted:!0})}},{key:"componentWillUnmount",value:function(){this.cleanUpListeners&&this.cleanUpListeners()}},{key:"handleRef",value:function(e){var t=this;this.innerRef&&(this.innerRef.current=e),this.useIOSupport&&e&&(this.cleanUpListeners=Se(e,(function(){var e=ke(t.props);t.state.isVisible||"function"!==typeof t.props.onStartLoad||t.props.onStartLoad({wasCached:e}),t.setState({isVisible:!0},(function(){t.setState({imgLoaded:e,imgCached:!(!t.imageRef.current||!t.imageRef.current.currentSrc)})}))})))}},{key:"handleImageLoaded",value:function(){!function(e){var t=ye(e),i=we(t);Te[i]=!0}(this.props),this.setState({imgLoaded:!0}),this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){this.state.hasMounted;var e=ye(this.props),t=e.title,i=e.alt,n=e.className,a=e.style,s=void 0===a?{}:a,o=e.imgStyle,l=void 0===o?{}:o,c=e.placeholderStyle,u=void 0===c?{}:c,h=e.placeholderClassName,d=e.fluid,m=e.backgroundColor,f=e.durationFadeIn,p=e.Tag,g=e.itemProp,v=e.loading,y=e.draggable,b=!1===this.state.fadeIn||this.state.imgLoaded,w=!0===this.state.fadeIn&&!this.state.imgCached,x=ge({opacity:b?1:0,transition:w?"opacity ".concat(f,"ms cubic-bezier( 0.26, 1.04, 0.54, 1 )"):"none"},l),T="boolean"===typeof m?"lightgray":m,E={transitionDelay:"".concat(f,"ms")},A=ge(ge(ge({opacity:this.state.imgLoaded?0:1},w&&E),l),u),M={title:t,alt:this.state.isVisible?"":i,style:A,className:h,itemProp:g};if(d){var C=d,O=xe(d);return me(p,{className:k()(de.a.image,n),style:ge({},s),ref:this.handleRef,key:"fluid-".concat(JSON.stringify(O.srcSet))},me(p,{"aria-hidden":!0,style:{width:"100%",paddingBottom:"".concat(100/O.aspectRatio,"%")}}),T&&me(p,{"aria-hidden":!0,title:t,style:{backgroundColor:T,position:"absolute",top:0,bottom:0,right:0,left:0}}),O.base64&&me(_e,{ariaHidden:!0,src:O.base64,spreadProps:M,imageVariants:C,generateSources:Oe}),this.state.isVisible&&me("picture",null,function(e){return e.map((function(e){var t=e.src,i=e.srcSet,n=e.srcSetWebp,a=e.media,s=e.sizes;return me(r.a.Fragment,{key:t},n&&me("source",{type:"image/webp",media:a,srcSet:n,sizes:s}),me("source",{media:a,srcSet:i,sizes:s}))}))}(C),me(Pe,{alt:i,title:t,sizes:O.sizes,src:O.src,crossOrigin:this.props.crossOrigin,style:x,ref:this.imageRef,onLoad:this.handleImageLoaded,onError:this.props.onError,itemProp:g,loading:v,draggable:y})))}return null}}]),i}(r.a.Component);Ne.defaultProps={fadeIn:!0,durationFadeIn:700,alt:"",Tag:"div",loading:"lazy"};var je=r.a.forwardRef((function(e,t){return me(Ne,Object(ce.a)({},e,{innerRef:t}))})),Re=i("x0nm"),Ie=i("KQm4"),Le=i("Eu8j"),Fe=i.n(Le),De=r.a.createElement,Be=function(e){var t=e.value,i=void 0===t?0:t,r=e.animate,a=void 0!==r&&r,s=e.delay,o=void 0===s?0:s,l=e.className,c=Object(n.useRef)(),u=Object(n.useRef)(),h=Object(n.useRef)(Object(Ie.a)(Array(10).keys()));return Object(n.useEffect)((function(){if(a){var e=Object(Ie.a)(Array(15).keys()).map((function(e,t){return{duration:0,y:"-".concat((parseInt(i)+t+1-5)%10,"em"),delay:.04}}));u.current&&u.current.pause(),u.current=I.a.to(c.current,{delay:o,ease:"expo.out",keyframes:e})}}),[a]),De("span",{className:k()(Fe.a.numbers,l)},De("span",{ref:c,className:Fe.a.numbersWrapper},h.current.map((function(e,t){return De("span",{key:"letter".concat(t),className:Fe.a.number},e)}))))},ze=function(e){var t=e.children,i=e.className,r=e.separator,a=void 0===r?",":r,s=Object(n.useRef)(t&&t.toString().split("")),o=Object($.b)(),l=Object(X.a)(o,2),c=l[0],u=l[1],h=0;return De("span",{ref:c,className:k()(Fe.a.counter,i)},s.current&&s.current.map((function(e,t){return"."===e||","===e?De("span",{key:"letter".concat(h)},a):De(Be,{key:"letters".concat(h),value:e,animate:u,delay:.1*h++})})))},Ue=function(e,t){var i=t.from,r=t.to,a=t.easing,s=t.speedRatio,o=void 0===s?1:s,u=t.easeRatio,h=void 0===u?1:u;if("touch"!==y.a.primaryInput){var d=Object(n.useRef)(),m=Object(n.useRef)(0),f=Object(n.useRef)(0),p=Object(n.useRef)(0),v=Object(n.useRef)(0);Object(c.a)((function(){e.current&&(m.current=Object(l.a)(e.current),f.current=e.current.offsetHeight,d.current=I.a.timeline({paused:!0,easing:a}),d.current.fromTo(e.current,i,r))}),!0),g((function(){var e=(O.y-m.current+R.a.innerHeight)*o/(R.a.innerHeight+f.current),t=Math.min(Math.max(e,0),1);p.current+=(t-p.current)*h,p.current=(1e3*p.current|0)/1e3,v.current!==p.current&&d.current&&d.current.progress(p.current),v.current=p.current}))}},Ve=i("pc+1"),qe=r.a.createElement,He=function(e){return qe("svg",e,qe("path",{d:"M-153.948 780.634L86.529 592.116l488.438 282-43.023 302.514 141.595 81.75L833.51 138.308 598.384 2.558l-891.329 697.826zm824.324-566.771l-74.473 512.992-392.31-226.5 408.326-320.242zM992.199 1442.36L1517.2 533.036l-135.1-78-525.001 909.324z",fill:"#fff"}),qe("path",{d:"M-153.948 780.634l-1 1.732 1.17.676 1.064-.834zM86.529 592.116l1-1.732-1.17-.676-1.064.834zm488.438 282l1.98.282.19-1.338-1.17-.676zm-43.023 302.514l-1.98-.28-.19 1.34 1.17.68zm141.595 81.75l-1 1.74 2.562 1.48.418-2.93zM833.51 138.308l1.979.282.192-1.338-1.171-.676zM598.384 2.558l1-1.732-1.17-.676-1.063.833zm-891.329 697.826l-1.233-1.574-2.332 1.825 2.565 1.481zm963.321-486.521l1.979.288.195-1.342-1.174-.678zm-74.473 512.992l-1 1.732 2.555 1.475.424-2.92zm-392.31-226.5l-1.234-1.574-2.329 1.826 2.563 1.48zm408.326-320.242l1-1.732-1.17-.676-1.064.835zm-764.633 602.095L87.763 593.69l-2.468-3.148-240.477 188.518zm238.243-188.36l488.438 282 2-3.464-488.438-282zm487.458 279.986l-43.023 302.516 3.96.57 43.023-302.522zm-42.043 304.536l141.595 81.75 2-3.47-141.595-81.75zm144.575 80.3l159.97-1120.08-3.959-.565L671.559 1258.1zM834.51 136.576L599.384.826l-2 3.464L832.51 140.04zM597.151.983L-294.178 698.81l2.466 3.149L599.617 4.132zm-891.096 701.133l138.997 80.25 2-3.464-138.997-80.25zm962.342-488.54l-74.474 512.991 3.959.575 74.473-512.991zm-71.494 511.547l-392.31-226.5-2 3.464 392.31 226.5zM204.827 501.928l408.326-320.241-2.468-3.147-408.326 320.241zm406.092-320.083l58.457 33.75 2-3.464-58.457-33.75zm381.28 1260.515l-1 1.73 1.732 1 1-1.73zM1517.2 533.036l1.73 1 1-1.732-1.73-1zm-135.1-78l1-1.732-1.73-1-1 1.732zM857.099 1364.36l-1.732-1-1 1.73 1.732 1zm136.832 79l524.999-909.324-3.46-2-525.003 909.324zM1518.2 531.304l-135.1-78-2 3.464 135.1 78zm-137.83-77.268L855.367 1363.36l3.464 2 524.999-909.324zM856.099 1366.09l135.1 78 2-3.46-135.1-78z",fill:"#3b60bf"}))};He.defaultProps={fill:"none",height:"1446",viewBox:"0 0 1440 1446",width:"1440",xmlns:"http://www.w3.org/2000/svg"};var We=function(e){var t=e.data,i=Object(n.useRef)(),r=Object(n.useRef)(),a=Object(n.useRef)(),s=Object(n.useRef)(),l=Object(n.useRef)();return Object(K.a)(i),Ue(r,{from:{x:"-15vw",y:"-10vw"},to:{x:0,y:0},easing:Ve.c.easeOut,speedRatio:1.5}),Ue(a,{from:{x:"10vw",y:"8vw"},to:{x:0,y:0},easing:Ve.c.easeOut,speedRatio:1.5}),Ue(s,{from:{y:"-10vw"},to:{y:"10vw"},speedRatio:1}),Ue(l,{from:{y:"-10vw"},to:{y:0},speedRatio:1.5}),qe("section",{className:te.a.change,ref:i},qe("div",{ref:l,className:te.a.wrapper},qe(He,{className:te.a.ai}),qe("div",{className:te.a.description,ref:s},o.RichText.render(t.change_description)),t.tablet.url&&qe(je,{ref:r,className:te.a.tablet,fluid:Object(Re.c)(t.tablet,{sizeLandscape:105})}),t.mobile.url&&qe(je,{ref:a,className:te.a.mobile,fluid:Object(Re.c)(t.mobile,{sizeLandscape:39.375})})),qe("div",{className:te.a.shipments},qe(ze,{className:te.a.shipments__number},t.shipments_optimized),qe("span",{className:te.a.shipments__description},o.RichText.asText(t.shipments_optimized_description))))},Xe=i("Di7X"),Ye=i.n(Xe),Ge=r.a.createElement,Ke=function(e){var t=e.data,i=Object(n.useContext)(Q.a).setRenderCanvas,r=Object($.b)({rootMargin:"0px 0px 5000px 0px"}),a=Object(X.a)(r,2),s=a[0],l=a[1];return Object(n.useEffect)((function(){i(l)}),[l]),Ge("section",{className:Ye.a.moved,ref:s,id:"moved"},Ge("h2",{className:Ye.a.title},o.RichText.asText(t.moved_title)),o.RichText.render(t.moved_description))},$e=i("X2xm"),Qe=i.n($e),Je=i("OMcD"),Ze=i.n(Je),et=i("T7iU"),tt=i.n(et),it=r.a.createElement,nt=function(e){return it("svg",e,it("circle",{cx:"37",cy:"37",r:"35.5",stroke:"#fff",strokeWidth:"3"}),it("path",{d:"M31 26.608L49 37 31 47.392V26.608z",stroke:"#fff",strokeWidth:"3"}))};nt.defaultProps={width:"74",height:"74",viewBox:"0 0 74 74",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var rt=function(e){var t=e.videoId,i=e.coverSrcs,r=e.className,a=Object(n.useRef)(),s=Object(n.useRef)(),o=Object(n.useRef)(),l=Object(n.useState)(),c=l[0],u=l[1];Object(n.useEffect)((function(){a.current=new tt.a(s.current,{settings:[],controls:["play","progress","mute","fullscreen"],loadSprite:!1,clickToPlay:!1,autoplay:!1,disableContextMenu:!1,iconUrl:"/svg/plyr.svg"})}),[]);return it("div",{className:k()(Ze.a.videoPlayer,r)},it("button",{className:k()("btn",Ze.a.cta),onClick:function(){u(!1),I.a.to(o.current,.6,{autoAlpha:0,ease:"quart.out"}),a.current.play()},ref:o,"aria-label":"Play"},it(nt,null)),it(j.a,{enable:c,className:Ze.a.media,ratio:16/9,ratioMobile:1,srcs:i}),t&&it($.a,{onChange:function(e,t){t.target.isInView=e,!e&&a.current&&a.current.pause()},className:Ze.a.plyr},it("div",{ref:s,"data-plyr-provider":"vimeo","data-plyr-embed-id":t})))},at=r.a.createElement,st=function(e){var t=e.data;return at("section",{className:Qe.a.trailer},t.trailer_vimeo.html&&at(rt,{className:Qe.a.videoPlayer,videoId:t.trailer_vimeo.video_id,coverSrcs:[{src:t.trailer_video_hd[0].text,minWidth:1400},{src:t.trailer_video_md[0].text,minWidth:900},{src:t.trailer_video_sd[0].text,minWidth:0}]}))},ot=i("6DJn"),lt=i.n(ot),ct=i("A0Lk"),ut=i.n(ct),ht=r.a.createElement,dt=function(e){var t=e.data,i=Object(n.useRef)(),r=Object(n.useRef)(),a=Object(n.useRef)(),s=Object(n.useRef)(),c=Object(n.useRef)(),u=Object(n.useRef)(),h=Object(n.useRef)(),d=Object(n.useRef)(),m=Object(n.useRef)(),f=Object($.b)({triggerOnce:!0,rootMargin:"100%"}),p=Object(X.a)(f,2),v=p[0],w=p[1],x=Object(n.useCallback)((function(e){s.current=e,v(e)}),[v]),T=function(){u.current&&(c.current=Object(l.a)(s.current)),R.a.innerWidth>=1024?(m.current&&!i.current.metadataLoaded&&i.current.load(),d.current||(d.current=I.a.timeline({paused:!0}),d.current.fromTo(a.current.children,1,{y:"100vh"},{y:0,ease:"quart.out",stagger:.1}))):d.current&&(r.current.style.transform="",d.current=null,I.a.set(a.current.children,{clearProps:"all"}))};return Object(n.useEffect)((function(){var e=new ut.a("hoefler-web"),t=new ut.a("din-web");Promise.all([e.load(),t.load()]).then((function(){u.current=!0,T()}))}),[]),Object(n.useEffect)((function(){w&&R.a.innerWidth>=1024&&!i.current.metadataLoaded&&i.current.load(),m.current=w}),[w]),Object(b.a)(s,(function(e){h.current=e.height,T()})),g((function(){var e;if(!c.current)return!1;if(h.current&&R.a.innerWidth>=1024){var t=h.current-R.a.innerHeight,n=Math.max(Math.min((O.y-c.current)/t,1),0);i.current.metadataLoaded&&(e=n*i.current.duration),"touch"!==y.a.primaryInput&&(r.current.style.transform="translate3d(0,".concat(n*t,"px,0)"),d.current&&d.current.progress(n))}i.current.metadataLoaded&&e&&e!==i.current.currentTime&&(i.current.currentTime=e)})),ht("section",{className:lt.a.team,ref:x},ht("div",{className:lt.a.teamWrapper,ref:r},ht("div",{className:k()(lt.a.content,"link-container"),ref:a},t.team_title&&ht("h2",{className:lt.a.title},o.RichText.asText(t.team_title)),t.team_description&&o.RichText.render(t.team_description)),t.image_fallback&&t.image_fallback.url&&ht(je,{className:lt.a.image,fluid:Object(Re.c)(t.image_fallback,{portraitOnly:!0})}),ht("video",{className:lt.a.video,ref:i,preload:"none",onLoadedMetadata:function(e){e.target.metadataLoaded=!0},muted:!0,playsInline:!0},ht("source",{src:"/videos/team.webm",type:"video/webm"}),ht("source",{src:"/videos/team.mp4",type:"video/mp4"}))),ht("div",{id:"careers",className:lt.a.navTarget}))},mt=i("zbGB"),ft=i.n(mt),pt=i("/P0+"),gt=i("eoXp"),vt=i.n(gt),yt=r.a.createElement,bt=function(e){return yt("textarea",Object(ce.a)({},e,{className:vt.a.textarea}))},wt=i("ywv4"),xt=i.n(wt),Tt=r.a.createElement,kt=function(e){return Tt("svg",e,Tt("path",{d:"M1 1l7 7 7-7",stroke:"#fff"}))};kt.defaultProps={fill:"none",height:"9",viewBox:"0 0 16 9",width:"16",xmlns:"http://www.w3.org/2000/svg"};var Et=function(e){var t=e.children,i=e.disabled,n=void 0!==i&&i,r=e.name,a=e.required;return Tt("div",{className:xt.a.selectWrapper},Tt("select",{className:xt.a.select,disabled:n,name:r,"aria-label":r.charAt(0).toUpperCase()+r.slice(1),required:a,onChange:function(e){e.currentTarget.value&&e.currentTarget.classList.add(xt.a.isSelected)}},t),Tt(kt,{className:xt.a.arrow}))},At=i("5Wrh"),Mt=i("+6QQ"),Ct=i.n(Mt),Ot=i("vtUw"),St=i.n(Ot),_t=r.a.createElement;function Pt(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"===typeof e)return Nt(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Nt(e,t)}(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==i.return||i.return()}finally{if(o)throw a}}}}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var jt=function(e){var t=e.data,i=Object(n.useState)(!1),r=i[0],a=i[1],s=Object(n.useRef)(),l=Object(n.useRef)(),c=Object(n.useRef)(),u=Object(n.useRef)(),h=Object(n.useRef)();t.disclaimer[0]&&t.disclaimer[0].spans.forEach((function(e){e.data.target="_blank"})),Object(n.useEffect)((function(){return l.current=new Ct.a(s.current,{classTo:St.a.field,errorTextParent:null,errorClass:St.a.hasDanger,successClass:St.a.hasSuccess,silent:!0},!0),function(){l.current.destroy()}}),[s]);return _t("div",{className:St.a.formWrapper},_t("form",{className:St.a.form,ref:s,onSubmit:function(e){if(e.preventDefault(),l.current.validate(null,!0)){var t,i=e.currentTarget,n=new FormData(i),r=new URLSearchParams,o=Pt(n);try{for(o.s();!(t=o.n()).done;){var c=t.value;r.append(c[0],c[1])}}catch(d){o.e(d)}finally{o.f()}a(!0),fetch(i.action,{method:i.method,body:r}).then((function(e){a(!1);var t=200===e.status?h.current:u.current,i=I.a.timeline();i.to(s.current.children,1,{ease:"expo.out",stagger:.04,y:-40,autoAlpha:0,onComplete:function(){s.current.reset()}}),i.fromTo(t,1,{y:20},{ease:"expo.out",y:0,opacity:1,visibility:"inherit",onComplete:function(){var e=I.a.timeline();e.to(t,1,{ease:"expo.out",y:-20,opacity:0,clearProps:"all"},.5),e.fromTo(s.current.children,1,{y:40},{ease:"expo.out",stagger:.04,y:0,autoAlpha:1},"-=0.8")}},"-=0.9")}))}},action:"/api/contact",method:"post",noValidate:!0},_t("div",{className:St.a.field},_t(pt.a,{placeholder:"Name",name:"name",type:"text","aria-label":"Name",required:!0})),_t("div",{className:St.a.field},_t(pt.a,{placeholder:"Email",name:"email",type:"email","aria-label":"Email",required:!0})),t.contact_subjects&&_t("div",{className:St.a.field},_t(Et,{name:"subject",required:!0,value:"",defaultValue:o.RichText.asText(t.contact_subjects[0].subject)},t.contact_subjects.map((function(e,t){var i=o.RichText.asText(e.subject);return _t("option",{value:i,key:t},i)})))),_t("div",{className:St.a.field},_t(bt,{placeholder:"Message",name:"body",type:"text","aria-label":"Message",required:!0})),t.disclaimer&&_t("span",{className:St.a.disclaimer},o.RichText.render(t.disclaimer)),_t(At.a,{type:"submit",loading:r,className:St.a.button},"Submit")),_t("div",{className:St.a.result,ref:c},_t("span",{ref:h},o.RichText.asText(t.contact_success_message)),_t("span",{ref:u},o.RichText.asText(t.contact_error_message))))},Rt=r.a.createElement,It=function(e){var t=e.data,i=Object(n.useRef)(),r=Object(n.useRef)();return Ue(i,{from:{y:"10vw"},to:{y:"0"},speedRatio:2}),Ue(r,{from:{y:"-10vw"},to:{y:"0"},speedRatio:2}),Rt("section",{className:ft.a.contact,id:"contact"},Rt("div",{className:ft.a.left},t.contact_title&&Rt("h2",{ref:i,className:ft.a.title},o.RichText.asText(t.contact_title)),t.contact_image.url&&Rt(je,{ref:r,className:ft.a.media,fluid:Object(Re.c)(t.contact_image,{sizeLandscape:50})})),Rt(jt,{data:t}))},Lt=i("JwsL"),Ft=i("o0o1"),Dt=i.n(Ft),Bt=i("HaE+"),zt=i("9jn/"),Ut=i.n(zt);let Vt=1;const qt={};class Ht{constructor(e,{vertex:t,fragment:i,uniforms:n={},transparent:r=!1,cullFace:a=e.BACK,frontFace:s=e.CCW,depthTest:o=!0,depthWrite:l=!0,depthFunc:c=e.LESS}={}){e.canvas||console.error("gl not passed as fist argument to Program"),this.gl=e,this.uniforms=n,this.id=Vt++,t||console.warn("vertex shader not supplied"),i||console.warn("fragment shader not supplied"),this.transparent=r,this.cullFace=a,this.frontFace=s,this.depthTest=o,this.depthWrite=l,this.depthFunc=c,this.blendFunc={},this.blendEquation={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA));const u=e.createShader(e.VERTEX_SHADER);e.shaderSource(u,t),e.compileShader(u),""!==e.getShaderInfoLog(u)&&console.warn(`${e.getShaderInfoLog(u)}\nVertex Shader\n${Xt(t)}`);const h=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(h,i),e.compileShader(h),""!==e.getShaderInfoLog(h)&&console.warn(`${e.getShaderInfoLog(h)}\nFragment Shader\n${Xt(i)}`),this.program=e.createProgram(),e.attachShader(this.program,u),e.attachShader(this.program,h),e.linkProgram(this.program),!e.getProgramParameter(this.program,e.LINK_STATUS))return console.warn(e.getProgramInfoLog(this.program));e.deleteShader(u),e.deleteShader(h),this.uniformLocations=new Map;let d=e.getProgramParameter(this.program,e.ACTIVE_UNIFORMS);for(let p=0;p<d;p++){let t=e.getActiveUniform(this.program,p);this.uniformLocations.set(t,e.getUniformLocation(this.program,t.name));const i=t.name.match(/(\w+)/g);t.uniformName=i[0],3===i.length?(t.isStructArray=!0,t.structIndex=Number(i[1]),t.structProperty=i[2]):2===i.length&&isNaN(Number(i[1]))&&(t.isStruct=!0,t.structProperty=i[1])}this.attributeLocations=new Map;const m=[],f=e.getProgramParameter(this.program,e.ACTIVE_ATTRIBUTES);for(let p=0;p<f;p++){const t=e.getActiveAttrib(this.program,p),i=e.getAttribLocation(this.program,t.name);m[i]=t.name,this.attributeLocations.set(t,i)}this.attributeOrder=m.join("")}setBlendFunc(e,t,i,n){this.blendFunc.src=e,this.blendFunc.dst=t,this.blendFunc.srcAlpha=i,this.blendFunc.dstAlpha=n,e&&(this.transparent=!0)}setBlendEquation(e,t){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=t}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.blendEquation.modeRGB&&this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha)}use({flipFaces:e=!1}={}){let t=-1;this.gl.renderer.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.currentProgram=this.id),this.uniformLocations.forEach((e,i)=>{let n=i.uniformName,r=this.uniforms[n];if(i.isStruct&&(r=r[i.structProperty],n+=`.${i.structProperty}`),i.isStructArray&&(r=r[i.structIndex][i.structProperty],n+=`[${i.structIndex}].${i.structProperty}`),!r)return Gt(`Active uniform ${n} has not been supplied`);if(r&&void 0===r.value)return Gt(`${n} uniform is missing a value parameter`);if(r.value.texture)return t+=1,r.value.update(t),Wt(this.gl,i.type,e,t);if(r.value.length&&r.value[0].texture){const n=[];return r.value.forEach(e=>{t+=1,e.update(t),n.push(t)}),Wt(this.gl,i.type,e,n)}Wt(this.gl,i.type,e,r.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function Wt(e,t,i,n){n=n.length?function(e){const t=e.length,i=e[0].length;if(void 0===i)return e;const n=t*i;let r=qt[n];r||(qt[n]=r=new Float32Array(n));for(let a=0;a<t;a++)r.set(e[a],a*i);return r}(n):n;const r=e.renderer.state.uniformLocations.get(i);if(n.length)if(void 0===r||r.length!==n.length)e.renderer.state.uniformLocations.set(i,n.slice(0));else{if(function(e,t){if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0}(r,n))return;r.set?r.set(n):function(e,t){for(let i=0,n=e.length;i<n;i++)e[i]=t[i]}(r,n),e.renderer.state.uniformLocations.set(i,r)}else{if(r===n)return;e.renderer.state.uniformLocations.set(i,n)}switch(t){case 5126:return n.length?e.uniform1fv(i,n):e.uniform1f(i,n);case 35664:return e.uniform2fv(i,n);case 35665:return e.uniform3fv(i,n);case 35666:return e.uniform4fv(i,n);case 35670:case 5124:case 35678:case 35680:return n.length?e.uniform1iv(i,n):e.uniform1i(i,n);case 35671:case 35667:return e.uniform2iv(i,n);case 35672:case 35668:return e.uniform3iv(i,n);case 35673:case 35669:return e.uniform4iv(i,n);case 35674:return e.uniformMatrix2fv(i,!1,n);case 35675:return e.uniformMatrix3fv(i,!1,n);case 35676:return e.uniformMatrix4fv(i,!1,n)}}function Xt(e){let t=e.split("\n");for(let i=0;i<t.length;i++)t[i]=i+1+": "+t[i];return t.join("\n")}let Yt=0;function Gt(e){Yt>100||(console.warn(e),Yt++,Yt>100&&console.warn("More than 100 program warnings - stopping logs."))}function Kt(e){let t=e[0],i=e[1],n=e[2];return Math.sqrt(t*t+i*i+n*n)}function $t(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Qt(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function Jt(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function Zt(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function ei(e){let t=e[0],i=e[1],n=e[2];return t*t+i*i+n*n}function ti(e,t){let i=t[0],n=t[1],r=t[2],a=i*i+n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function ii(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ni(e,t,i){let n=t[0],r=t[1],a=t[2],s=i[0],o=i[1],l=i[2];return e[0]=r*l-a*o,e[1]=a*s-n*l,e[2]=n*o-r*s,e}const ri=function(){const e=[0,0,0],t=[0,0,0];return function(i,n){$t(e,i),$t(t,n),ti(e,e),ti(t,t);let r=ii(e,t);return r>1?0:r<-1?Math.PI:Math.acos(r)}}();class ai extends Array{constructor(e=0,t=e,i=e){return super(e,t,i),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,t=e,i=e){return e.length?this.copy(e):(function(e,t,i,n){e[0]=t,e[1]=i,e[2]=n}(this,e,t,i),this)}copy(e){return $t(this,e),this}add(e,t){return t?Qt(this,e,t):Qt(this,this,e),this}sub(e,t){return t?Jt(this,e,t):Jt(this,this,e),this}multiply(e){var t,i,n;return e.length?(i=this,n=e,(t=this)[0]=i[0]*n[0],t[1]=i[1]*n[1],t[2]=i[2]*n[2]):Zt(this,this,e),this}divide(e){var t,i,n;return e.length?(i=this,n=e,(t=this)[0]=i[0]/n[0],t[1]=i[1]/n[1],t[2]=i[2]/n[2]):Zt(this,this,1/e),this}inverse(e=this){var t,i;return i=e,(t=this)[0]=1/i[0],t[1]=1/i[1],t[2]=1/i[2],this}len(){return Kt(this)}distance(e){return e?function(e,t){let i=t[0]-e[0],n=t[1]-e[1],r=t[2]-e[2];return Math.sqrt(i*i+n*n+r*r)}(this,e):Kt(this)}squaredLen(){return ei(this)}squaredDistance(e){return e?function(e,t){let i=t[0]-e[0],n=t[1]-e[1],r=t[2]-e[2];return i*i+n*n+r*r}(this,e):ei(this)}negate(e=this){var t,i;return i=e,(t=this)[0]=-i[0],t[1]=-i[1],t[2]=-i[2],this}cross(e,t){return t?ni(this,e,t):ni(this,this,e),this}scale(e){return Zt(this,this,e),this}normalize(){return ti(this,this),this}dot(e){return ii(this,e)}equals(e){return i=e,(t=this)[0]===i[0]&&t[1]===i[1]&&t[2]===i[2];var t,i}applyMatrix4(e){return function(e,t,i){let n=t[0],r=t[1],a=t[2],s=i[3]*n+i[7]*r+i[11]*a+i[15];s=s||1,e[0]=(i[0]*n+i[4]*r+i[8]*a+i[12])/s,e[1]=(i[1]*n+i[5]*r+i[9]*a+i[13])/s,e[2]=(i[2]*n+i[6]*r+i[10]*a+i[14])/s}(this,this,e),this}scaleRotateMatrix4(e){return function(e,t,i){let n=t[0],r=t[1],a=t[2],s=i[3]*n+i[7]*r+i[11]*a+i[15];s=s||1,e[0]=(i[0]*n+i[4]*r+i[8]*a)/s,e[1]=(i[1]*n+i[5]*r+i[9]*a)/s,e[2]=(i[2]*n+i[6]*r+i[10]*a)/s}(this,this,e),this}applyQuaternion(e){return function(e,t,i){let n=t[0],r=t[1],a=t[2],s=i[0],o=i[1],l=i[2],c=o*a-l*r,u=l*n-s*a,h=s*r-o*n,d=o*h-l*u,m=l*c-s*h,f=s*u-o*c,p=2*i[3];c*=p,u*=p,h*=p,d*=2,m*=2,f*=2,e[0]=n+c+d,e[1]=r+u+m,e[2]=a+h+f}(this,this,e),this}angle(e){return ri(this,e)}lerp(e,t){return function(e,t,i,n){let r=t[0],a=t[1],s=t[2];e[0]=r+n*(i[0]-r),e[1]=a+n*(i[1]-a),e[2]=s+n*(i[2]-s)}(this,this,e,t),this}clone(){return new ai(this[0],this[1],this[2])}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}transformDirection(e){const t=this[0],i=this[1],n=this[2];return this[0]=e[0]*t+e[4]*i+e[8]*n,this[1]=e[1]*t+e[5]*i+e[9]*n,this[2]=e[2]*t+e[6]*i+e[10]*n,this.normalize()}}const si=new ai;let oi=1,li=1,ci=!1;class ui{constructor(e,t={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=t,this.id=oi++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let i in t)this.addAttribute(i,t[i])}addAttribute(e,t){if(this.attributes[e]=t,t.id=li++,t.size=t.size||1,t.type=t.type||(t.data.constructor===Float32Array?this.gl.FLOAT:t.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),t.target="index"===e?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,t.normalized=t.normalized||!1,t.stride=t.stride||0,t.offset=t.offset||0,t.count=t.count||(t.stride?t.data.byteLength/t.stride:t.data.length/t.size),t.divisor=t.instanced||0,t.needsUpdate=!1,t.buffer||(t.buffer=this.gl.createBuffer(),this.updateAttribute(t)),t.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==t.count*t.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,t.count*t.divisor);this.instancedCount=t.count*t.divisor}else"index"===e?this.drawRange.count=t.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,t.count))}updateAttribute(e){this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),this.gl.bufferData(e.target,e.data,this.gl.STATIC_DRAW),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((e,{name:t,type:i})=>{if(!this.attributes[t])return void console.warn(`active attribute ${t} not being supplied`);const n=this.attributes[t];this.gl.bindBuffer(n.target,n.buffer),this.glState.boundBuffer=n.buffer;let r=1;35674===i&&(r=2),35675===i&&(r=3),35676===i&&(r=4);const a=n.size/r,s=1===r?0:r*r*r,o=1===r?0:r*r;for(let l=0;l<r;l++)this.gl.vertexAttribPointer(e+l,a,n.type,n.normalized,n.stride+s,n.offset+l*o),this.gl.enableVertexAttribArray(e+l),this.gl.renderer.vertexAttribDivisor(e+l,n.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:t=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((e,{name:t})=>{const i=this.attributes[t];i.needsUpdate&&this.updateAttribute(i)}),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(t,this.drawRange.count,this.attributes.index.type,this.drawRange.start,this.instancedCount):this.gl.renderer.drawArraysInstanced(t,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+2*this.drawRange.start):this.gl.drawArrays(t,this.drawRange.start,this.drawRange.count)}getPositionArray(){const e=this.attributes.position;return e.min?[...e.min,...e.max]:e.data?e.data:ci?void 0:(console.warn("No position buffer data found to compute bounds"),ci=!0)}computeBoundingBox(e){e||(e=this.getPositionArray()),this.bounds||(this.bounds={min:new ai,max:new ai,center:new ai,scale:new ai,radius:1/0});const t=this.bounds.min,i=this.bounds.max,n=this.bounds.center,r=this.bounds.scale;t.set(1/0),i.set(-1/0);for(let a=0,s=e.length;a<s;a+=3){const n=e[a],r=e[a+1],s=e[a+2];t.x=Math.min(n,t.x),t.y=Math.min(r,t.y),t.z=Math.min(s,t.z),i.x=Math.max(n,i.x),i.y=Math.max(r,i.y),i.z=Math.max(s,i.z)}r.sub(i,t),n.add(t,i).divide(2)}computeBoundingSphere(e){e||(e=this.getPositionArray()),this.bounds||this.computeBoundingBox(e);let t=0;for(let i=0,n=e.length;i<n;i+=3)si.fromArray(e,i),t=Math.max(t,this.bounds.center.squaredDistance(si));this.bounds.radius=Math.sqrt(t)}remove(){this.vao&&this.gl.renderer.deleteVertexArray(this.vao);for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}function hi(e,t,i){let n=t[0],r=t[1],a=t[2],s=t[3],o=i[0],l=i[1],c=i[2],u=i[3];return e[0]=n*u+s*o+r*c-a*l,e[1]=r*u+s*l+a*o-n*c,e[2]=a*u+s*c+n*l-r*o,e[3]=s*u-n*o-r*l-a*c,e}const di=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},mi=function(e,t,i,n,r){return e[0]=t,e[1]=i,e[2]=n,e[3]=r,e},fi=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},pi=function(e,t){let i=t[0],n=t[1],r=t[2],a=t[3],s=i*i+n*n+r*r+a*a;return s>0&&(s=1/Math.sqrt(s)),e[0]=i*s,e[1]=n*s,e[2]=r*s,e[3]=a*s,e};class gi extends Array{constructor(e=0,t=0,i=0,n=1){return super(e,t,i,n),this.onChange=()=>{},this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this[0]=e,this.onChange()}set y(e){this[1]=e,this.onChange()}set z(e){this[2]=e,this.onChange()}set w(e){this[3]=e,this.onChange()}identity(){var e;return(e=this)[0]=0,e[1]=0,e[2]=0,e[3]=1,this.onChange(),this}set(e,t,i,n){return e.length?this.copy(e):(mi(this,e,t,i,n),this.onChange(),this)}rotateX(e){return function(e,t,i){i*=.5;let n=t[0],r=t[1],a=t[2],s=t[3],o=Math.sin(i),l=Math.cos(i);e[0]=n*l+s*o,e[1]=r*l+a*o,e[2]=a*l-r*o,e[3]=s*l-n*o}(this,this,e),this.onChange(),this}rotateY(e){return function(e,t,i){i*=.5;let n=t[0],r=t[1],a=t[2],s=t[3],o=Math.sin(i),l=Math.cos(i);e[0]=n*l-a*o,e[1]=r*l+s*o,e[2]=a*l+n*o,e[3]=s*l-r*o}(this,this,e),this.onChange(),this}rotateZ(e){return function(e,t,i){i*=.5;let n=t[0],r=t[1],a=t[2],s=t[3],o=Math.sin(i),l=Math.cos(i);e[0]=n*l+r*o,e[1]=r*l-n*o,e[2]=a*l+s*o,e[3]=s*l-a*o}(this,this,e),this.onChange(),this}inverse(e=this){return function(e,t){let i=t[0],n=t[1],r=t[2],a=t[3],s=i*i+n*n+r*r+a*a,o=s?1/s:0;e[0]=-i*o,e[1]=-n*o,e[2]=-r*o,e[3]=a*o}(this,e),this.onChange(),this}conjugate(e=this){var t,i;return i=e,(t=this)[0]=-i[0],t[1]=-i[1],t[2]=-i[2],t[3]=i[3],this.onChange(),this}copy(e){return di(this,e),this.onChange(),this}normalize(e=this){return pi(this,e),this.onChange(),this}multiply(e,t){return t?hi(this,e,t):hi(this,this,e),this.onChange(),this}dot(e){return fi(this,e)}fromMatrix3(e){return function(e,t){let i,n=t[0]+t[4]+t[8];if(n>0)i=Math.sqrt(n+1),e[3]=.5*i,i=.5/i,e[0]=(t[5]-t[7])*i,e[1]=(t[6]-t[2])*i,e[2]=(t[1]-t[3])*i;else{let n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);let r=(n+1)%3,a=(n+2)%3;i=Math.sqrt(t[3*n+n]-t[3*r+r]-t[3*a+a]+1),e[n]=.5*i,i=.5/i,e[3]=(t[3*r+a]-t[3*a+r])*i,e[r]=(t[3*r+n]+t[3*n+r])*i,e[a]=(t[3*a+n]+t[3*n+a])*i}}(this,e),this.onChange(),this}fromEuler(e){return function(e,t,i="YXZ"){let n=Math.sin(.5*t[0]),r=Math.cos(.5*t[0]),a=Math.sin(.5*t[1]),s=Math.cos(.5*t[1]),o=Math.sin(.5*t[2]),l=Math.cos(.5*t[2]);"XYZ"===i?(e[0]=n*s*l+r*a*o,e[1]=r*a*l-n*s*o,e[2]=r*s*o+n*a*l,e[3]=r*s*l-n*a*o):"YXZ"===i?(e[0]=n*s*l+r*a*o,e[1]=r*a*l-n*s*o,e[2]=r*s*o-n*a*l,e[3]=r*s*l+n*a*o):"ZXY"===i?(e[0]=n*s*l-r*a*o,e[1]=r*a*l+n*s*o,e[2]=r*s*o+n*a*l,e[3]=r*s*l-n*a*o):"ZYX"===i?(e[0]=n*s*l-r*a*o,e[1]=r*a*l+n*s*o,e[2]=r*s*o-n*a*l,e[3]=r*s*l+n*a*o):"YZX"===i?(e[0]=n*s*l+r*a*o,e[1]=r*a*l+n*s*o,e[2]=r*s*o-n*a*l,e[3]=r*s*l-n*a*o):"XZY"===i&&(e[0]=n*s*l-r*a*o,e[1]=r*a*l-n*s*o,e[2]=r*s*o+n*a*l,e[3]=r*s*l+n*a*o)}(this,e,e.order),this}fromAxisAngle(e,t){return function(e,t,i){i*=.5;let n=Math.sin(i);e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(i)}(this,e,t),this}slerp(e,t){return function(e,t,i,n){let r,a,s,o,l,c=t[0],u=t[1],h=t[2],d=t[3],m=i[0],f=i[1],p=i[2],g=i[3];a=c*m+u*f+h*p+d*g,a<0&&(a=-a,m=-m,f=-f,p=-p,g=-g),1-a>1e-6?(r=Math.acos(a),s=Math.sin(r),o=Math.sin((1-n)*r)/s,l=Math.sin(n*r)/s):(o=1-n,l=n),e[0]=o*c+l*m,e[1]=o*u+l*f,e[2]=o*h+l*p,e[3]=o*d+l*g}(this,this,e,t),this}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this[3]=e[t+3],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}}const vi=1e-6;function yi(e,t,i){let n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],m=t[10],f=t[11],p=t[12],g=t[13],v=t[14],y=t[15],b=i[0],w=i[1],x=i[2],T=i[3];return e[0]=b*n+w*o+x*h+T*p,e[1]=b*r+w*l+x*d+T*g,e[2]=b*a+w*c+x*m+T*v,e[3]=b*s+w*u+x*f+T*y,b=i[4],w=i[5],x=i[6],T=i[7],e[4]=b*n+w*o+x*h+T*p,e[5]=b*r+w*l+x*d+T*g,e[6]=b*a+w*c+x*m+T*v,e[7]=b*s+w*u+x*f+T*y,b=i[8],w=i[9],x=i[10],T=i[11],e[8]=b*n+w*o+x*h+T*p,e[9]=b*r+w*l+x*d+T*g,e[10]=b*a+w*c+x*m+T*v,e[11]=b*s+w*u+x*f+T*y,b=i[12],w=i[13],x=i[14],T=i[15],e[12]=b*n+w*o+x*h+T*p,e[13]=b*r+w*l+x*d+T*g,e[14]=b*a+w*c+x*m+T*v,e[15]=b*s+w*u+x*f+T*y,e}function bi(e,t){let i=t[0],n=t[1],r=t[2],a=t[4],s=t[5],o=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.hypot(i,n,r),e[1]=Math.hypot(a,s,o),e[2]=Math.hypot(l,c,u),e}const wi=function(){const e=[0,0,0];return function(t,i){let n=e;bi(n,i);let r=1/n[0],a=1/n[1],s=1/n[2],o=i[0]*r,l=i[1]*a,c=i[2]*s,u=i[4]*r,h=i[5]*a,d=i[6]*s,m=i[8]*r,f=i[9]*a,p=i[10]*s,g=o+h+p,v=0;return g>0?(v=2*Math.sqrt(g+1),t[3]=.25*v,t[0]=(d-f)/v,t[1]=(m-c)/v,t[2]=(l-u)/v):o>h&&o>p?(v=2*Math.sqrt(1+o-h-p),t[3]=(d-f)/v,t[0]=.25*v,t[1]=(l+u)/v,t[2]=(m+c)/v):h>p?(v=2*Math.sqrt(1+h-o-p),t[3]=(m-c)/v,t[0]=(l+u)/v,t[1]=.25*v,t[2]=(d+f)/v):(v=2*Math.sqrt(1+p-o-h),t[3]=(l-u)/v,t[0]=(m+c)/v,t[1]=(d+f)/v,t[2]=.25*v),t}}();class xi extends Array{constructor(e=1,t=0,i=0,n=0,r=0,a=1,s=0,o=0,l=0,c=0,u=1,h=0,d=0,m=0,f=0,p=1){return super(e,t,i,n,r,a,s,o,l,c,u,h,d,m,f,p),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,t,i,n,r,a,s,o,l,c,u,h,d,m,f,p){return e.length?this.copy(e):(function(e,t,i,n,r,a,s,o,l,c,u,h,d,m,f,p,g){e[0]=t,e[1]=i,e[2]=n,e[3]=r,e[4]=a,e[5]=s,e[6]=o,e[7]=l,e[8]=c,e[9]=u,e[10]=h,e[11]=d,e[12]=m,e[13]=f,e[14]=p,e[15]=g}(this,e,t,i,n,r,a,s,o,l,c,u,h,d,m,f,p),this)}translate(e,t=this){return function(e,t,i){let n,r,a,s,o,l,c,u,h,d,m,f,p=i[0],g=i[1],v=i[2];t===e?(e[12]=t[0]*p+t[4]*g+t[8]*v+t[12],e[13]=t[1]*p+t[5]*g+t[9]*v+t[13],e[14]=t[2]*p+t[6]*g+t[10]*v+t[14],e[15]=t[3]*p+t[7]*g+t[11]*v+t[15]):(n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],m=t[10],f=t[11],e[0]=n,e[1]=r,e[2]=a,e[3]=s,e[4]=o,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=m,e[11]=f,e[12]=n*p+o*g+h*v+t[12],e[13]=r*p+l*g+d*v+t[13],e[14]=a*p+c*g+m*v+t[14],e[15]=s*p+u*g+f*v+t[15])}(this,t,e),this}rotate(e,t,i=this){return function(e,t,i,n){let r,a,s,o,l,c,u,h,d,m,f,p,g,v,y,b,w,x,T,k,E,A,M,C,O=n[0],S=n[1],_=n[2],P=Math.hypot(O,S,_);Math.abs(P)<vi||(P=1/P,O*=P,S*=P,_*=P,r=Math.sin(i),a=Math.cos(i),s=1-a,o=t[0],l=t[1],c=t[2],u=t[3],h=t[4],d=t[5],m=t[6],f=t[7],p=t[8],g=t[9],v=t[10],y=t[11],b=O*O*s+a,w=S*O*s+_*r,x=_*O*s-S*r,T=O*S*s-_*r,k=S*S*s+a,E=_*S*s+O*r,A=O*_*s+S*r,M=S*_*s-O*r,C=_*_*s+a,e[0]=o*b+h*w+p*x,e[1]=l*b+d*w+g*x,e[2]=c*b+m*w+v*x,e[3]=u*b+f*w+y*x,e[4]=o*T+h*k+p*E,e[5]=l*T+d*k+g*E,e[6]=c*T+m*k+v*E,e[7]=u*T+f*k+y*E,e[8]=o*A+h*M+p*C,e[9]=l*A+d*M+g*C,e[10]=c*A+m*M+v*C,e[11]=u*A+f*M+y*C,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]))}(this,i,e,t),this}scale(e,t=this){return function(e,t,i){let n=i[0],r=i[1],a=i[2];e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]}(this,t,"number"===typeof e?[e,e,e]:e),this}multiply(e,t){return t?yi(this,e,t):yi(this,this,e),this}identity(){var e;return(e=this)[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}copy(e){var t,i;return i=e,(t=this)[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}fromPerspective({fov:e,aspect:t,near:i,far:n}={}){return function(e,t,i,n,r){let a=1/Math.tan(t/2),s=1/(n-r);e[0]=a/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(r+n)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*r*n*s,e[15]=0}(this,e,t,i,n),this}fromOrthogonal({left:e,right:t,bottom:i,top:n,near:r,far:a}){return function(e,t,i,n,r,a,s){let o=1/(t-i),l=1/(n-r),c=1/(a-s);e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+i)*o,e[13]=(r+n)*l,e[14]=(s+a)*c,e[15]=1}(this,e,t,i,n,r,a),this}fromQuaternion(e){return function(e,t){let i=t[0],n=t[1],r=t[2],a=t[3],s=i+i,o=n+n,l=r+r,c=i*s,u=n*s,h=n*o,d=r*s,m=r*o,f=r*l,p=a*s,g=a*o,v=a*l;e[0]=1-h-f,e[1]=u+v,e[2]=d-g,e[3]=0,e[4]=u-v,e[5]=1-c-f,e[6]=m+p,e[7]=0,e[8]=d+g,e[9]=m-p,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return function(e,t){let i=t[0],n=t[1],r=t[2],a=t[3],s=t[4],o=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],m=t[11],f=t[12],p=t[13],g=t[14],v=t[15],y=i*o-n*s,b=i*l-r*s,w=i*c-a*s,x=n*l-r*o,T=n*c-a*o,k=r*c-a*l,E=u*p-h*f,A=u*g-d*f,M=u*v-m*f,C=h*g-d*p,O=h*v-m*p,S=d*v-m*g,_=y*S-b*O+w*C+x*M-T*A+k*E;_&&(_=1/_,e[0]=(o*S-l*O+c*C)*_,e[1]=(r*O-n*S-a*C)*_,e[2]=(p*k-g*T+v*x)*_,e[3]=(d*T-h*k-m*x)*_,e[4]=(l*M-s*S-c*A)*_,e[5]=(i*S-r*M+a*A)*_,e[6]=(g*w-f*k-v*b)*_,e[7]=(u*k-d*w+m*b)*_,e[8]=(s*O-o*M+c*E)*_,e[9]=(n*M-i*O-a*E)*_,e[10]=(f*T-p*w+v*y)*_,e[11]=(h*w-u*T-m*y)*_,e[12]=(o*A-s*C-l*E)*_,e[13]=(i*C-n*A+r*E)*_,e[14]=(p*b-f*x-g*y)*_,e[15]=(u*x-h*b+d*y)*_)}(this,e),this}compose(e,t,i){return function(e,t,i,n){let r=t[0],a=t[1],s=t[2],o=t[3],l=r+r,c=a+a,u=s+s,h=r*l,d=r*c,m=r*u,f=a*c,p=a*u,g=s*u,v=o*l,y=o*c,b=o*u,w=n[0],x=n[1],T=n[2];e[0]=(1-(f+g))*w,e[1]=(d+b)*w,e[2]=(m-y)*w,e[3]=0,e[4]=(d-b)*x,e[5]=(1-(h+g))*x,e[6]=(p+v)*x,e[7]=0,e[8]=(m+y)*T,e[9]=(p-v)*T,e[10]=(1-(h+f))*T,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1}(this,e,t,i),this}getRotation(e){return wi(e,this),this}getTranslation(e){var t,i;return i=this,(t=e)[0]=i[12],t[1]=i[13],t[2]=i[14],this}getScaling(e){return bi(e,this),this}getMaxScaleOnAxis(){return function(e){let t=e[0],i=e[1],n=e[2],r=e[4],a=e[5],s=e[6],o=e[8],l=e[9],c=e[10];const u=t*t+i*i+n*n,h=r*r+a*a+s*s,d=o*o+l*l+c*c;return Math.sqrt(Math.max(u,h,d))}(this)}lookAt(e,t,i){return function(e,t,i,n){let r=t[0],a=t[1],s=t[2],o=n[0],l=n[1],c=n[2],u=r-i[0],h=a-i[1],d=s-i[2],m=u*u+h*h+d*d;0===m?d=1:(m=1/Math.sqrt(m),u*=m,h*=m,d*=m);let f=l*d-c*h,p=c*u-o*d,g=o*h-l*u;m=f*f+p*p+g*g,0===m&&(c?o+=1e-6:l?c+=1e-6:l+=1e-6,f=l*d-c*h,p=c*u-o*d,g=o*h-l*u,m=f*f+p*p+g*g),m=1/Math.sqrt(m),f*=m,p*=m,g*=m,e[0]=f,e[1]=p,e[2]=g,e[3]=0,e[4]=h*g-d*p,e[5]=d*f-u*g,e[6]=u*p-h*f,e[7]=0,e[8]=u,e[9]=h,e[10]=d,e[11]=0,e[12]=r,e[13]=a,e[14]=s,e[15]=1}(this,e,t,i),this}determinant(){return function(e){let t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],m=e[12],f=e[13],p=e[14],g=e[15];return(t*s-i*a)*(h*g-d*p)-(t*o-n*a)*(u*g-d*f)+(t*l-r*a)*(u*p-h*f)+(i*o-n*s)*(c*g-d*m)-(i*l-r*s)*(c*p-h*m)+(n*l-r*o)*(c*f-u*m)}(this)}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this[3]=e[t+3],this[4]=e[t+4],this[5]=e[t+5],this[6]=e[t+6],this[7]=e[t+7],this[8]=e[t+8],this[9]=e[t+9],this[10]=e[t+10],this[11]=e[t+11],this[12]=e[t+12],this[13]=e[t+13],this[14]=e[t+14],this[15]=e[t+15],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e[t+4]=this[4],e[t+5]=this[5],e[t+6]=this[6],e[t+7]=this[7],e[t+8]=this[8],e[t+9]=this[9],e[t+10]=this[10],e[t+11]=this[11],e[t+12]=this[12],e[t+13]=this[13],e[t+14]=this[14],e[t+15]=this[15],e}}const Ti=new xi;class ki extends Array{constructor(e=0,t=e,i=e,n="YXZ"){return super(e,t,i),this.order=n,this.onChange=()=>{},this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e,this.onChange()}set y(e){this[1]=e,this.onChange()}set z(e){this[2]=e,this.onChange()}set(e,t=e,i=e){return e.length?this.copy(e):(this[0]=e,this[1]=t,this[2]=i,this.onChange(),this)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.onChange(),this}reorder(e){return this.order=e,this.onChange(),this}fromRotationMatrix(e,t=this.order){return function(e,t,i="YXZ"){"XYZ"===i?(e[1]=Math.asin(Math.min(Math.max(t[8],-1),1)),Math.abs(t[8])<.99999?(e[0]=Math.atan2(-t[9],t[10]),e[2]=Math.atan2(-t[4],t[0])):(e[0]=Math.atan2(t[6],t[5]),e[2]=0)):"YXZ"===i?(e[0]=Math.asin(-Math.min(Math.max(t[9],-1),1)),Math.abs(t[9])<.99999?(e[1]=Math.atan2(t[8],t[10]),e[2]=Math.atan2(t[1],t[5])):(e[1]=Math.atan2(-t[2],t[0]),e[2]=0)):"ZXY"===i?(e[0]=Math.asin(Math.min(Math.max(t[6],-1),1)),Math.abs(t[6])<.99999?(e[1]=Math.atan2(-t[2],t[10]),e[2]=Math.atan2(-t[4],t[5])):(e[1]=0,e[2]=Math.atan2(t[1],t[0]))):"ZYX"===i?(e[1]=Math.asin(-Math.min(Math.max(t[2],-1),1)),Math.abs(t[2])<.99999?(e[0]=Math.atan2(t[6],t[10]),e[2]=Math.atan2(t[1],t[0])):(e[0]=0,e[2]=Math.atan2(-t[4],t[5]))):"YZX"===i?(e[2]=Math.asin(Math.min(Math.max(t[1],-1),1)),Math.abs(t[1])<.99999?(e[0]=Math.atan2(-t[9],t[5]),e[1]=Math.atan2(-t[2],t[0])):(e[0]=0,e[1]=Math.atan2(t[8],t[10]))):"XZY"===i&&(e[2]=Math.asin(-Math.min(Math.max(t[4],-1),1)),Math.abs(t[4])<.99999?(e[0]=Math.atan2(t[6],t[5]),e[1]=Math.atan2(t[8],t[0])):(e[0]=Math.atan2(-t[9],t[10]),e[1]=0))}(this,e,t),this}fromQuaternion(e,t=this.order){return Ti.fromQuaternion(e),this.fromRotationMatrix(Ti,t)}}class Ei{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new xi,this.worldMatrix=new xi,this.matrixAutoUpdate=!0,this.position=new ai,this.quaternion=new gi,this.scale=new ai(1),this.rotation=new ki,this.up=new ai(0,1,0),this.rotation.onChange=()=>this.quaternion.fromEuler(this.rotation),this.quaternion.onChange=()=>this.rotation.fromQuaternion(this.quaternion)}setParent(e,t=!0){t&&this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,t&&e&&e.addChild(this,!1)}addChild(e,t=!0){~this.children.indexOf(e)||this.children.push(e),t&&e.setParent(this,!1)}removeChild(e,t=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),t&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(null===this.parent?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let t=0,i=this.children.length;t<i;t++)this.children[t].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let t=0,i=this.children.length;t<i;t++)this.children[t].traverse(e)}decompose(){this.matrix.getTranslation(this.position),this.matrix.getRotation(this.quaternion),this.matrix.getScaling(this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,t=!1){t?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion),this.rotation.fromQuaternion(this.quaternion)}}const Ai=new Uint8Array(4);function Mi(e){return 0===(e&e-1)}let Ci=1;class Oi{constructor(e,{image:t,target:i=e.TEXTURE_2D,type:n=e.UNSIGNED_BYTE,format:r=e.RGBA,internalFormat:a=r,wrapS:s=e.CLAMP_TO_EDGE,wrapT:o=e.CLAMP_TO_EDGE,generateMipmaps:l=!0,minFilter:c=(l?e.NEAREST_MIPMAP_LINEAR:e.LINEAR),magFilter:u=e.LINEAR,premultiplyAlpha:h=!1,unpackAlignment:d=4,flipY:m=i==e.TEXTURE_2D,anisotropy:f=0,level:p=0,width:g,height:v=g}={}){this.gl=e,this.id=Ci++,this.image=t,this.target=i,this.type=n,this.format=r,this.internalFormat=a,this.minFilter=c,this.magFilter=u,this.wrapS=s,this.wrapT=o,this.generateMipmaps=l,this.premultiplyAlpha=h,this.unpackAlignment=d,this.flipY=m,this.anisotropy=Math.min(f,this.gl.renderer.parameters.maxAnisotropy),this.level=p,this.width=g,this.height=v,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={},this.state.minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this.state.magFilter=this.gl.LINEAR,this.state.wrapS=this.gl.REPEAT,this.state.wrapT=this.gl.REPEAT,this.state.anisotropy=0}bind(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}update(e=0){const t=!(this.image===this.store.image&&!this.needsUpdate);if((t||this.glState.textureUnits[e]!==this.id)&&(this.gl.renderer.activeTexture(e),this.bind()),t){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(let e=0;e<6;e++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+e,this.level,this.internalFormat,this.format,this.type,this.image[e]);else if(ArrayBuffer.isView(this.image))this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image);else if(this.image.isCompressedTexture)for(let e=0;e<this.image.length;e++)this.gl.compressedTexImage2D(this.target,e,this.internalFormat,this.image[e].width,this.image[e].height,0,this.image[e].data);else this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image);this.generateMipmaps&&(this.gl.renderer.isWebgl2||Mi(this.image.width)&&Mi(this.image.height)?this.gl.generateMipmap(this.target):(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR)),this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(let e=0;e<6;e++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,Ai);else this.width?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,Ai);this.store.image=this.image}}}function Si(e,t,i){let n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=i[0],m=i[1],f=i[2],p=i[3],g=i[4],v=i[5],y=i[6],b=i[7],w=i[8];return e[0]=d*n+m*s+f*c,e[1]=d*r+m*o+f*u,e[2]=d*a+m*l+f*h,e[3]=p*n+g*s+v*c,e[4]=p*r+g*o+v*u,e[5]=p*a+g*l+v*h,e[6]=y*n+b*s+w*c,e[7]=y*r+b*o+w*u,e[8]=y*a+b*l+w*h,e}class _i extends Array{constructor(e=1,t=0,i=0,n=0,r=1,a=0,s=0,o=0,l=1){return super(e,t,i,n,r,a,s,o,l),this}set(e,t,i,n,r,a,s,o,l){return e.length?this.copy(e):(function(e,t,i,n,r,a,s,o,l,c){e[0]=t,e[1]=i,e[2]=n,e[3]=r,e[4]=a,e[5]=s,e[6]=o,e[7]=l,e[8]=c}(this,e,t,i,n,r,a,s,o,l),this)}translate(e,t=this){return function(e,t,i){let n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=i[0],m=i[1];e[0]=n,e[1]=r,e[2]=a,e[3]=s,e[4]=o,e[5]=l,e[6]=d*n+m*s+c,e[7]=d*r+m*o+u,e[8]=d*a+m*l+h}(this,t,e),this}rotate(e,t=this){return function(e,t,i){let n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=Math.sin(i),m=Math.cos(i);e[0]=m*n+d*s,e[1]=m*r+d*o,e[2]=m*a+d*l,e[3]=m*s-d*n,e[4]=m*o-d*r,e[5]=m*l-d*a,e[6]=c,e[7]=u,e[8]=h}(this,t,e),this}scale(e,t=this){return function(e,t,i){let n=i[0],r=i[1];e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8]}(this,t,e),this}multiply(e,t){return t?Si(this,e,t):Si(this,this,e),this}identity(){var e;return(e=this)[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,this}copy(e){var t,i;return i=e,(t=this)[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}fromMatrix4(e){var t,i;return i=e,(t=this)[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[4],t[4]=i[5],t[5]=i[6],t[6]=i[8],t[7]=i[9],t[8]=i[10],this}fromQuaternion(e){return function(e,t){let i=t[0],n=t[1],r=t[2],a=t[3],s=i+i,o=n+n,l=r+r,c=i*s,u=n*s,h=n*o,d=r*s,m=r*o,f=r*l,p=a*s,g=a*o,v=a*l;e[0]=1-h-f,e[3]=u-v,e[6]=d+g,e[1]=u+v,e[4]=1-c-f,e[7]=m-p,e[2]=d-g,e[5]=m+p,e[8]=1-c-h}(this,e),this}fromBasis(e,t,i){return this.set(e[0],e[1],e[2],t[0],t[1],t[2],i[0],i[1],i[2]),this}inverse(e=this){return function(e,t){let i=t[0],n=t[1],r=t[2],a=t[3],s=t[4],o=t[5],l=t[6],c=t[7],u=t[8],h=u*s-o*c,d=-u*a+o*l,m=c*a-s*l,f=i*h+n*d+r*m;f&&(f=1/f,e[0]=h*f,e[1]=(-u*n+r*c)*f,e[2]=(o*n-r*s)*f,e[3]=d*f,e[4]=(u*i-r*l)*f,e[5]=(-o*i+r*a)*f,e[6]=m*f,e[7]=(-c*i+n*l)*f,e[8]=(s*i-n*a)*f)}(this,e),this}getNormalMatrix(e){return function(e,t){let i=t[0],n=t[1],r=t[2],a=t[3],s=t[4],o=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],m=t[11],f=t[12],p=t[13],g=t[14],v=t[15],y=i*o-n*s,b=i*l-r*s,w=i*c-a*s,x=n*l-r*o,T=n*c-a*o,k=r*c-a*l,E=u*p-h*f,A=u*g-d*f,M=u*v-m*f,C=h*g-d*p,O=h*v-m*p,S=d*v-m*g,_=y*S-b*O+w*C+x*M-T*A+k*E;_&&(_=1/_,e[0]=(o*S-l*O+c*C)*_,e[1]=(l*M-s*S-c*A)*_,e[2]=(s*O-o*M+c*E)*_,e[3]=(r*O-n*S-a*C)*_,e[4]=(i*S-r*M+a*A)*_,e[5]=(n*M-i*O-a*E)*_,e[6]=(p*k-g*T+v*x)*_,e[7]=(g*w-f*k-v*b)*_,e[8]=(f*T-p*w+v*y)*_)}(this,e),this}}let Pi=0;class Ni extends Ei{constructor(e,{geometry:t,program:i,mode:n=e.TRIANGLES,frustumCulled:r=!0,renderOrder:a=0}={}){super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=Pi++,this.geometry=t,this.program=i,this.mode=n,this.frustumCulled=r,this.renderOrder=a,this.modelViewMatrix=new xi,this.normalMatrix=new _i,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){this.beforeRenderCallbacks.forEach(t=>t&&t({mesh:this,camera:e})),e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix);let t=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:t}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(t=>t&&t({mesh:this,camera:e}))}}const ji=new ai,Ri=new ai,Ii=new ai,Li=new ai,Fi=new gi,Di=new gi,Bi=new gi,zi=new gi;class Ui{constructor(e,t=1){this.data=e,this.elapsed=0,this.weight=t,this.loop=!0,this.duration=e.reduce((e,{times:t})=>Math.max(e,t[t.length-1]),0)}update(e=1,t){const i=t?1:this.weight/e,n=this.loop?this.elapsed%this.duration:Math.min(this.elapsed,this.duration);this.data.forEach(({node:e,transform:t,interpolation:r,times:a,values:s})=>{const o=Math.max(1,a.findIndex(e=>e>n))-1,l=o+1;let c=(n-a[o])/(a[l]-a[o]);"STEP"===r&&(c=0);let u=ji,h=Ri,d=Ii,m=Li,f=3;"quaternion"===t&&(u=Fi,h=Di,d=Bi,m=zi,f=4),"CUBICSPLINE"===r?(u.fromArray(s,o*f*3+1*f),h.fromArray(s,o*f*3+2*f),d.fromArray(s,l*f*3+0*f),m.fromArray(s,l*f*3+1*f),u=this.cubicSplineInterpolate(c,u,h,d,m),4===f&&u.normalize()):(u.fromArray(s,o*f),m.fromArray(s,l*f),4===f?u.slerp(m,c):u.lerp(m,c)),4===f?e[t].slerp(u,i):e[t].lerp(u,i)})}cubicSplineInterpolate(e,t,i,n,r){const a=e*e,s=a*e,o=3*a-2*s,l=s-a,c=1-o,u=l-a+e;for(let h=0;h<t.length;h++)t[h]=c*t[h]+u*(1-e)*i[h]+o*r[h]+l*e*n[h];return t}}const Vi=new xi,qi=new xi;class Hi extends Ni{constructor(e,{skeleton:t,geometry:i,program:n,mode:r=e.TRIANGLES}={}){super(e,{geometry:i,program:n,mode:r}),this.skeleton=t,this.program=n,this.createBoneTexture(),this.animations=[]}createBoneTexture(){if(!this.skeleton.joints.length)return;const e=Math.max(4,Math.pow(2,Math.ceil(Math.log(Math.sqrt(4*this.skeleton.joints.length))/Math.LN2)));this.boneMatrices=new Float32Array(e*e*4),this.boneTextureSize=e,this.boneTexture=new Oi(this.gl,{image:this.boneMatrices,generateMipmaps:!1,type:this.gl.FLOAT,internalFormat:this.gl.renderer.isWebgl2?this.gl.RGBA16F:this.gl.RGBA,flipY:!1,width:e})}updateUniforms(){this.skeleton.joints.forEach((e,t)=>{Vi.multiply(e.worldMatrix,e.bindInverse),this.boneMatrices.set(Vi,16*t)}),this.boneTexture&&(this.boneTexture.needsUpdate=!0)}draw({camera:e}={}){this.program.uniforms.boneTexture||Object.assign(this.program.uniforms,{boneTexture:{value:this.boneTexture},boneTextureSize:{value:this.boneTextureSize}}),this.updateUniforms();const t=this.worldMatrix;this.worldMatrix=qi,super.draw({camera:e}),this.worldMatrix=t}}const Wi="\n    precision highp float;\n    precision highp int;\n\n    attribute vec3 position;\n    attribute vec3 normal;\n\n    uniform mat3 normalMatrix;\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n\n    varying vec3 vNormal;\n\n    void main() {\n        vNormal = normalize(normalMatrix * normal);\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n",Xi="\n    precision highp float;\n    precision highp int;\n\n    varying vec3 vNormal;\n\n    void main() {\n        gl_FragColor.rgb = normalize(vNormal);\n        gl_FragColor.a = 1.0;\n    }\n";function Yi(e){return new Ht(e,{vertex:Wi,fragment:Xi,cullFace:null})}const Gi={5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array,"image/jpeg":Uint8Array,"image/png":Uint8Array},Ki={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},$i={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Qi={translation:"position",rotation:"quaternion",scale:"scale"};class Ji{static async load(e,t){const i=t.split("/").slice(0,-1).join("/")+"/",n=await this.parseDesc(t);return await this.parse(e,n,i)}static async parse(e,t,i){(void 0===t.asset||t.asset.version[0]<2)&&console.warn("Only GLTF >=2.0 supported. Attempting to parse.");const n=await this.loadBuffers(t,i);e.renderer.bindVertexArray(null);const r=this.parseBufferViews(e,t,n),a=this.parseImages(e,t,i,r),s=this.parseTextures(e,t,a),o=this.parseMaterials(e,t,s),l=this.parseSkins(e,t,r),c=this.parseMeshes(e,t,r,o,l),u=this.parseNodes(e,t,c,l);this.populateSkins(l,u);const h=this.parseAnimations(e,t,u,r),d=this.parseScenes(t,u),m=d[t.scene];for(let f=u.length;f>=0;f--)u[f]||u.splice(f,1);return{json:t,buffers:n,bufferViews:r,images:a,textures:s,materials:o,meshes:c,nodes:u,animations:h,scenes:d,scene:m}}static async parseDesc(e){return e.match(/\.glb$/)?await fetch(e).then(e=>e.arrayBuffer()).then(e=>this.unpackGLB(e)):await fetch(e).then(e=>e.json())}static unpackGLB(e){const t=new Uint32Array(e,0,3);if(1179937895!==t[0])throw new Error("Invalid glTF asset.");if(2!==t[1])throw new Error(`Unsupported glTF binary version, "${t[1]}".`);const i=new Uint32Array(e,12,2),n=i[0];if(1313821514!==i[1])throw new Error("Unexpected GLB layout.");const r=(new TextDecoder).decode(e.slice(20,20+n)),a=JSON.parse(r);if(20+n===e.byteLength)return a;const s=new Uint32Array(e,20+n,2);if(5130562!==s[1])throw new Error("Unexpected GLB layout.");const o=20+n+8,l=s[0],c=e.slice(o,o+l);return a.buffers[0].binary=c,a}static resolveURI(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e)}static async loadBuffers(e,t){return e.buffers?await Promise.all(e.buffers.map(e=>{if(e.binary)return e.binary;const i=this.resolveURI(e.uri,t);return fetch(i).then(e=>e.arrayBuffer())})):null}static parseBufferViews(e,t,i){if(!t.bufferViews)return null;const n=t.bufferViews.map(e=>Object.assign({},e));return t.meshes&&t.meshes.forEach(({primitives:i})=>{i.forEach(({attributes:i,indices:r})=>{for(let e in i)n[t.accessors[i[e]].bufferView].isAttribute=!0;void 0!==r&&(n[t.accessors[r].bufferView].isAttribute=!0,n[t.accessors[r].bufferView].target=e.ELEMENT_ARRAY_BUFFER)})}),t.accessors.forEach(({bufferView:e,componentType:t})=>{n[e].componentType=t}),t.images&&t.images.forEach(({uri:e,bufferView:t,mimeType:i})=>{void 0!==t&&(n[t].mimeType=i)}),n.forEach(({buffer:t,byteOffset:r=0,byteLength:a,byteStride:s,target:o=e.ARRAY_BUFFER,name:l,extensions:c,extras:u,componentType:h,mimeType:d,isAttribute:m},f)=>{const p=Gi[h||d],g=p.BYTES_PER_ELEMENT,v=new p(i[t],r,a/g);if(n[f].data=v,!m)return;const y=e.createBuffer();e.bindBuffer(o,y),e.renderer.state.boundBuffer=y,e.bufferData(o,v,e.STATIC_DRAW),n[f].buffer=y}),n}static parseImages(e,t,i,n){return t.images?t.images.map(({uri:e,bufferView:t,mimeType:r,name:a})=>{const s=new Image;if(s.name=a,e)s.src=this.resolveURI(e,i);else if(void 0!==t){const{data:e}=n[t],i=new Blob([e],{type:r});s.src=URL.createObjectURL(i)}return s.ready=new Promise(e=>{s.onload=()=>e()}),s}):null}static parseTextures(e,t,i){return t.textures?t.textures.map(({sampler:n,source:r,name:a,extensions:s,extras:o})=>{const l={flipY:!1,wrapS:e.REPEAT,wrapT:e.REPEAT},c=void 0!==n?t.samplers[n]:null;c&&["magFilter","minFilter","wrapS","wrapT"].forEach(e=>{c[e]&&(l[e]=c[e])});const u=new Oi(e,l);u.name=a;const h=i[r];return h.ready.then(()=>u.image=h),u}):null}static parseMaterials(e,t,i){return t.materials?t.materials.map(({name:e,extensions:t,extras:n,pbrMetallicRoughness:r={},normalTexture:a,occlusionTexture:s,emissiveTexture:o,emissiveFactor:l=[0,0,0],alphaMode:c="OPAQUE",alphaCutoff:u=.5,doubleSided:h=!1})=>{const{baseColorFactor:d=[1,1,1,1],baseColorTexture:m,metallicFactor:f=1,roughnessFactor:p=1,metallicRoughnessTexture:g}=r;return m&&(m.texture=i[m.index]),a&&(a.texture=i[a.index]),g&&(g.texture=i[g.index]),s&&(s.texture=i[s.index]),o&&(o.texture=i[o.index]),{name:e,baseColorFactor:d,baseColorTexture:m,metallicFactor:f,roughnessFactor:p,metallicRoughnessTexture:g,normalTexture:a,occlusionTexture:s,emissiveTexture:o,emissiveFactor:l,alphaMode:c,alphaCutoff:u,doubleSided:h}}):null}static parseSkins(e,t,i){return t.skins?t.skins.map(({inverseBindMatrices:e,skeleton:n,joints:r})=>({inverseBindMatrices:this.parseAccessor(e,t,i),skeleton:n,joints:r})):null}static parseMeshes(e,t,i,n,r){return t.meshes?t.meshes.map(({primitives:a,weights:s,name:o,extensions:l,extras:c},u)=>{let h=0,d=!1;return t.nodes&&t.nodes.forEach(({mesh:e,skin:t})=>{e===u&&(h++,void 0!==t&&(d=t))}),{primitives:a=this.parsePrimitives(e,a,t,i,n,h).map(({geometry:t,program:i,mode:n})=>{const a="number"===typeof d?new Hi(e,{skeleton:r[d],geometry:t,program:i,mode:n}):new Ni(e,{geometry:t,program:i,mode:n});return a.name=o,a.geometry.isInstanced&&(a.numInstances=h,a.frustumCulled=!1),a}),weights:s,name:o}}):null}static parsePrimitives(e,t,i,n,r,a){return t.map(({attributes:t,indices:s,material:o,mode:l=4,targets:c,extensions:u,extras:h})=>{const d=new ui(e);for(let e in t)d.addAttribute($i[e],this.parseAccessor(t[e],i,n));void 0!==s&&d.addAttribute("index",this.parseAccessor(s,i,n)),a>1&&d.addAttribute("instanceMatrix",{instanced:1,size:16,data:new Float32Array(16*a)});const m=new Yi(e);return void 0!==o&&(m.gltfMaterial=r[o]),{geometry:d,program:m,mode:l}})}static parseAccessor(e,t,i){const{bufferView:n,byteOffset:r=0,componentType:a,normalized:s=!1,count:o,type:l,min:c,max:u,sparse:h}=t.accessors[e],{data:d,buffer:m,byteStride:f=0,target:p}=i[n];return{data:d,size:Ki[l],type:a,normalized:s,buffer:m,stride:f,offset:r,count:o,min:c,max:u}}static parseNodes(e,t,i,n){if(!t.nodes)return null;const r=t.nodes.map(({camera:e,children:t,skin:n,matrix:r,mesh:a,rotation:s,scale:o,translation:l,weights:c,name:u,extensions:h,extras:d})=>{const m=new Ei;u&&(m.name=u),r?(m.matrix.copy(r),m.decompose()):(s&&m.quaternion.copy(s),o&&m.scale.copy(o),l&&m.position.copy(l),m.updateMatrix());let f=!1,p=!0;if(void 0!==a&&i[a].primitives.forEach(e=>{e.geometry.isInstanced&&(f=!0,e.instanceCount?p=!1:e.instanceCount=0,m.matrix.toArray(e.geometry.attributes.instanceMatrix.data,16*e.instanceCount),e.instanceCount++,e.instanceCount===e.numInstances&&(delete e.numInstances,delete e.instanceCount,e.geometry.attributes.instanceMatrix.needsUpdate=!0)),f?p&&e.setParent(m):e.setParent(m)}),f){if(!p)return null;m.matrix.identity(),m.decompose()}return m});return t.nodes.forEach(({children:e=[]},t)=>{e.forEach(e=>{r[e]&&r[e].setParent(r[t])})}),r}static populateSkins(e,t){e&&e.forEach(e=>{e.joints=e.joints.map((i,n)=>{const r=t[i];return r.bindInverse=new xi(...e.inverseBindMatrices.data.slice(16*n,16*(n+1))),r}),e.skeleton&&(e.skeleton=t[e.skeleton])})}static parseAnimations(e,t,i,n){return t.animations?t.animations.map(({channels:e,samplers:r,name:a})=>{const s=e.map(({sampler:e,target:a})=>{const{input:s,interpolation:o="LINEAR",output:l}=r[e],{node:c,path:u}=a,h=i[c],d=Qi[u],m=this.parseAccessor(s,t,n),f=m.data.slice(m.offset/4,m.offset/4+m.count*m.size),p=this.parseAccessor(l,t,n);return{node:h,transform:d,interpolation:o,times:f,values:p.data.slice(p.offset/4,p.offset/4+p.count*p.size)}});return{name:a,animation:new Ui(s)}}):null}static parseScenes(e,t){return e.scenes?e.scenes.map(({nodes:e=[],name:i,extensions:n,extras:r})=>e.reduce((e,i)=>(t[i]&&e.push(t[i]),e),[])):null}}const Zi={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#00ff00",blue:"#0000ff",fuchsia:"#ff00ff",cyan:"#00ffff",yellow:"#ffff00",orange:"#ff8000"};function en(e){4===e.length&&(e=e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t||console.warn(`Unable to convert hex string ${e} to rgb values`),[parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255]}function tn(e){return void 0===e?[0,0,0]:3===arguments.length?arguments:isNaN(e)?"#"===e[0]?en(e):Zi[e.toLowerCase()]?en(Zi[e.toLowerCase()]):(console.warn("Color format not recognised"),[0,0,0]):(t=e,[((t=parseInt(t))>>16&255)/255,(t>>8&255)/255,(255&t)/255]);var t}class nn extends Array{constructor(e){return Array.isArray(e)?super(...e):super(...tn(...arguments))}get r(){return this[0]}get g(){return this[1]}get b(){return this[2]}set r(e){this[0]=e}set g(e){this[1]=e}set b(e){this[2]=e}set(e){return Array.isArray(e)?this.copy(e):this.copy(tn(...arguments))}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this}}const rn=new ai;let an=1;class sn{constructor({canvas:e=document.createElement("canvas"),width:t=300,height:i=150,dpr:n=1,alpha:r=!1,depth:a=!0,stencil:s=!1,antialias:o=!1,premultipliedAlpha:l=!1,preserveDrawingBuffer:c=!1,powerPreference:u="default",autoClear:h=!0,webgl:d=2}={}){const m={alpha:r,depth:a,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u};this.dpr=n,this.alpha=r,this.color=!0,this.depth=a,this.stencil=s,this.premultipliedAlpha=l,this.autoClear=h,this.id=an++,2===d&&(this.gl=e.getContext("webgl2",m)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",m)||e.getContext("experimental-webgl",m)),this.gl.renderer=this,this.setSize(t,i),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=null,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LESS,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,t){this.width=e,this.height=t,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=t*this.dpr,Object.assign(this.gl.canvas.style,{width:e+"px",height:t+"px"})}setViewport(e,t){this.state.viewport.width===e&&this.state.viewport.height===t||(this.state.viewport.width=e,this.state.viewport.height=t,this.gl.viewport(0,0,e,t))}enable(e){!0!==this.state[e]&&(this.gl.enable(e),this.state[e]=!0)}disable(e){!1!==this.state[e]&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,t,i,n){this.state.blendFunc.src===e&&this.state.blendFunc.dst===t&&this.state.blendFunc.srcAlpha===i&&this.state.blendFunc.dstAlpha===n||(this.state.blendFunc.src=e,this.state.blendFunc.dst=t,this.state.blendFunc.srcAlpha=i,this.state.blendFunc.dstAlpha=n,void 0!==i?this.gl.blendFuncSeparate(e,t,i,n):this.gl.blendFunc(e,t))}setBlendEquation(e,t){this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===t||(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=t,void 0!==t?this.gl.blendEquationSeparate(e,t):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:t=null}={}){this.state.framebuffer!==t&&(this.state.framebuffer=t,this.gl.bindFramebuffer(e,t))}getExtension(e,t,i){return t&&this.gl[t]?this.gl[t].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),t?this.extensions[e]?this.extensions[e][i].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:e.zDepth!==t.zDepth?e.zDepth-t.zDepth:t.id-e.id}sortTransparent(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.zDepth!==t.zDepth?t.zDepth-e.zDepth:t.id-e.id}sortUI(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:t.id-e.id}getRenderList({scene:e,camera:t,frustumCull:i,sort:n}){let r=[];if(t&&i&&t.updateFrustum(),e.traverse(e=>{if(!e.visible)return!0;e.draw&&(i&&e.frustumCulled&&t&&!t.frustumIntersectsMesh(e)||r.push(e))}),n){const e=[],i=[],n=[];r.forEach(r=>{r.program.transparent?r.program.depthTest?i.push(r):n.push(r):e.push(r),r.zDepth=0,0===r.renderOrder&&r.program.depthTest&&t&&(r.worldMatrix.getTranslation(rn),rn.applyMatrix4(t.projectionViewMatrix),r.zDepth=rn.z)}),e.sort(this.sortOpaque),i.sort(this.sortTransparent),n.sort(this.sortUI),r=e.concat(i,n)}return r}render({scene:e,camera:t,target:i=null,update:n=!0,sort:r=!0,frustumCull:a=!0,clear:s}){null===i?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(i),this.setViewport(i.width,i.height)),(s||this.autoClear&&!1!==s)&&(!this.depth||i&&!i.depth||(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),n&&e.updateMatrixWorld(),t&&t.updateMatrixWorld(),this.getRenderList({scene:e,camera:t,frustumCull:a,sort:r}).forEach(e=>{e.draw({camera:t})})}}const on=new xi,ln=new ai,cn=new ai;class un extends Ei{constructor(e,{near:t=.1,far:i=100,fov:n=45,aspect:r=1,left:a,right:s,bottom:o,top:l,zoom:c=1}={}){super(),Object.assign(this,{near:t,far:i,fov:n,aspect:r,left:a,right:s,bottom:o,top:l,zoom:c}),this.projectionMatrix=new xi,this.viewMatrix=new xi,this.projectionViewMatrix=new xi,this.worldPosition=new ai,this.type=a||s?"orthographic":"perspective","orthographic"===this.type?this.orthographic():this.perspective()}perspective({near:e=this.near,far:t=this.far,fov:i=this.fov,aspect:n=this.aspect}={}){return Object.assign(this,{near:e,far:t,fov:i,aspect:n}),this.projectionMatrix.fromPerspective({fov:i*(Math.PI/180),aspect:n,near:e,far:t}),this.type="perspective",this}orthographic({near:e=this.near,far:t=this.far,left:i=this.left,right:n=this.right,bottom:r=this.bottom,top:a=this.top,zoom:s=this.zoom}={}){return Object.assign(this,{near:e,far:t,left:i,right:n,bottom:r,top:a,zoom:s}),i/=s,n/=s,r/=s,a/=s,this.projectionMatrix.fromOrthogonal({left:i,right:n,bottom:r,top:a,near:e,far:t}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}lookAt(e){return super.lookAt(e,!0),this}project(e){return e.applyMatrix4(this.viewMatrix),e.applyMatrix4(this.projectionMatrix),this}unproject(e){return e.applyMatrix4(on.inverse(this.projectionMatrix)),e.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new ai,new ai,new ai,new ai,new ai,new ai]);const e=this.projectionViewMatrix;this.frustum[0].set(e[3]-e[0],e[7]-e[4],e[11]-e[8]).constant=e[15]-e[12],this.frustum[1].set(e[3]+e[0],e[7]+e[4],e[11]+e[8]).constant=e[15]+e[12],this.frustum[2].set(e[3]+e[1],e[7]+e[5],e[11]+e[9]).constant=e[15]+e[13],this.frustum[3].set(e[3]-e[1],e[7]-e[5],e[11]-e[9]).constant=e[15]-e[13],this.frustum[4].set(e[3]-e[2],e[7]-e[6],e[11]-e[10]).constant=e[15]-e[14],this.frustum[5].set(e[3]+e[2],e[7]+e[6],e[11]+e[10]).constant=e[15]+e[14];for(let t=0;t<6;t++){const e=1/this.frustum[t].distance();this.frustum[t].multiply(e),this.frustum[t].constant*=e}}frustumIntersectsMesh(e){if(!e.geometry.attributes.position)return!0;if(e.geometry.bounds&&e.geometry.bounds.radius!==1/0||e.geometry.computeBoundingSphere(),!e.geometry.bounds)return!0;const t=ln;t.copy(e.geometry.bounds.center),t.applyMatrix4(e.worldMatrix);const i=e.geometry.bounds.radius*e.worldMatrix.getMaxScaleOnAxis();return this.frustumIntersectsSphere(t,i)}frustumIntersectsSphere(e,t){const i=cn;for(let n=0;n<6;n++){const r=this.frustum[n];if(i.copy(r).dot(e)+r.constant<-t)return!1}return!0}}var hn=r.a.createElement,dn="\n\tprecision highp float;\n\tprecision highp int;\n\n\tattribute vec2 uv;\n\tattribute vec3 position;\n\tattribute vec3 normal;\n\n\tuniform mat4 modelViewMatrix;\n\tuniform mat4 projectionMatrix;\n\tuniform mat3 normalMatrix;\n\n\tvarying vec2 vUv;\n\tvarying vec4 vMVPos;\n\tvarying vec3 vNormal;\n\n\tvoid main() {\n\t\tvUv = uv;\n\t\tvNormal = normalize(normalMatrix * normal);\n\t\tvMVPos = modelViewMatrix * vec4(position, 1.0);\n\n\t\tgl_Position = projectionMatrix * vMVPos;\n\t}\n",mn=function(){var e=Object(Bt.a)(Dt.a.mark((function e(t,i){var n,r,a;return Dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\n\t\tprecision highp float;\n\t\tprecision highp int;\n\n\t\tuniform vec3 uFogColor;\n\t\tuniform float uFogNear;\n\t\tuniform float uFogFar;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vMVPos;\n\t\tvarying vec3 vNormal;\n\n\t\tvoid main() {\n\t\t\tvec3 normal = normalize(vNormal);\n\n\t\t\tfloat dist = length(vMVPos);\n\t\t\tfloat fog = smoothstep(uFogNear, uFogFar, dist);\n\n\t\t\t// vec4 color = vec4(1., 1., 1., fog);\n\t\t\tvec3 color = mix(vec3(1.), uFogColor, fog);\n\n\t\t\t// float lighting = dot(normal, normalize(vec3(-0.3, 0.8, 0.6)));\n\n\t\t\tgl_FragColor = vec4(color, 1.);\n\t\t\t// gl_FragColor.rgba = color + lighting * 0.1;\n\t\t\t// gl_FragColor.a = .1;\n\t\t}\n\t",n=new Ht(t,{vertex:dn,fragment:"\n\t\tprecision highp float;\n\t\tprecision highp int;\n\n\t\tuniform vec3 uFogColor;\n\t\tuniform float uFogNear;\n\t\tuniform float uFogFar;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vMVPos;\n\t\tvarying vec3 vNormal;\n\n\t\tvoid main() {\n\t\t\tvec3 normal = normalize(vNormal);\n\n\t\t\tfloat dist = length(vMVPos);\n\t\t\tfloat fog = smoothstep(uFogNear, uFogFar, dist);\n\n\t\t\t// vec4 color = vec4(1., 1., 1., fog);\n\t\t\tvec3 color = mix(vec3(1.), uFogColor, fog);\n\n\t\t\t// float lighting = dot(normal, normalize(vec3(-0.3, 0.8, 0.6)));\n\n\t\t\tgl_FragColor = vec4(color, 1.);\n\t\t\t// gl_FragColor.rgba = color + lighting * 0.1;\n\t\t\t// gl_FragColor.a = .1;\n\t\t}\n\t",transparent:!1,depthTest:!0,depthWrite:!1,uniforms:{uFogColor:{value:i},uFogNear:{value:4},uFogFar:{value:7}},cullFace:null}),r=[],a=function(){var e=Object(Bt.a)(Dt.a.mark((function e(){var i,a,s,o;return Dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ji.load(t,"meshes/cube-sub.json");case 2:for(i=e.sent,a=i.meshes[0].primitives[0].geometry,s=0;s<3;s++)o=new Ni(t,{geometry:a,program:n}),r[s]=o;return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",a());case 5:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),fn=function(e){e.fogNear,e.fogFar;var t=Object(n.useRef)(),i=Object(n.useRef)(),r=Object(n.useRef)(),a=Object(n.useRef)(),s=Object(n.useRef)(),o=Object(n.useRef)(),u=Object(n.useRef)(),h=Object(n.useRef)(0),d=Object(n.useRef)(0),m=Object(n.useRef)(0),f=Object(n.useContext)(Q.a),p=f.background,v=f.renderCanvas,y=Object(n.useRef)(),b=Object(n.useRef)(),w=Object(n.useRef)();return Object(n.useEffect)((function(){var e;(y.current=new nn(p),b.current=new nn("#0E1122"===p?"#3B60BF":"#657fc9"),u.current)&&(e=u.current).clearColor.apply(e,Object(Ie.a)(y.current).concat([1]))}),[p]),Object(n.useEffect)((function(){var e;i.current=new sn({dpr:1,antialias:!0,alpha:!0,canvas:t.current}),u.current=i.current.gl;var n=new nn(p);(e=u.current).clearColor.apply(e,Object(Ie.a)(n).concat([1])),r.current=new un(u,{fov:40}),r.current.position.set(0,0,5),r.current.lookAt([0,0,0]),a.current=new Ei,o.current=function(e,t,i){var n=new Ht(e,{vertex:dn,fragment:"\n\t\tprecision highp float;\n\t\tprecision highp int;\n\n\t\tuniform vec3 uColor;\n\t\t// uniform vec3 uFogColor;\n\t\tuniform float uFogNear;\n\t\tuniform float uFogFar;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vMVPos;\n\t\tvarying vec3 vNormal;\n\n\t\tvoid main() {\n\t\t\tvec3 normal = normalize(vNormal);\n\n\t\t\tfloat dist = length(vMVPos);\n\t\t\tfloat fog = smoothstep(uFogNear, uFogFar, dist);\n\n\t\t\tgl_FragColor.rgba = vec4(uColor, 1.);\n\t\t}\n\t",transparent:!1,depthTest:!1,depthWrite:!1,uniforms:{uColor:{value:new ai(1)},uFogNear:{value:2},uFogFar:{value:.55}},cullFace:null}),r=new Ei;return Object(Bt.a)(Dt.a.mark((function t(){var i;return Dt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ji.load(e,"meshes/cube.json");case 2:(i=t.sent).scene[0].traverse((function(e){e.program&&(e.program=n)})),i.scene.forEach((function(e){e.setParent(r)}));case 5:case"end":return t.stop()}}),t)})))(),r.setParent(t),{mesh:r,program:n}}(u.current,a.current),o.current.mesh.position.z=5;o.current.mesh.scale.set(.1,.1,.1),o.current.mesh.rotation.set(.85,.5,0),Object(Bt.a)(Dt.a.mark((function e(){return Dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mn(u.current,n);case 2:s.current=e.sent,s.current.forEach((function(e,t){e.scale.set(.006,.006,.006),0===t?(e.positionInit=new ai(.5,1,0),e.rotationInit=new ai(.001,.003,0)):1===t?(e.scale.y=.003,e.positionInit=new ai(-.8,2,0),e.rotationInit=new ai(-6e-4,.002,.001)):(e.positionInit=new ai(-1,Object(l.a)(document.getElementById("moved"))/R.a.innerHeight+.7,0),e.rotationInit=new ai(.001,.003,.001)),e.setParent(a.current)})),m.current++;case 5:case"end":return e.stop()}}),e)})))()}),[]),Object(c.a)((function(e){if(w.current!==e.innerWidth){var t=window.outerHeight||R.a.innerHeight;s.current&&(s.current[2].positionInit.y=Object(l.a)(document.getElementById("moved"))/t+.7),i.current.setSize(e.innerWidth,t),r.current.perspective({aspect:u.current.canvas.width/u.current.canvas.height}),w.current=e.innerWidth}}),!0),g((function(){if(v&&m.current>=1){h.current+=.005*O.vy/R.a.innerHeight,h.current*=.96,d.current+=.0015*O.vy/R.a.innerHeight,d.current*=.8;var e=Math.abs(h.current);e>.008&&(e=.008);var t=O.y/R.a.innerHeight;s.current.forEach((function(i){i.rotation.x-=i.rotationInit.x+e,i.rotation.y-=i.rotationInit.y+e,i.rotation.z-=i.rotationInit.z+e,i.position=i.positionInit.clone(),i.position.y=1.5*(t-i.positionInit.y)+10*h.current,i.program.uniforms.uFogColor.value=y.current})),o.current&&o.current.mesh&&(o.current.mesh.position.y=O.y/R.a.innerHeight*1.5-6,o.current.program.uniforms.uColor.value=b.current);var n=R.a.innerWidth<410?R.a.innerWidth/320:R.a.innerWidth<1024?R.a.innerWidth/768:R.a.innerWidth/1440;a.current.scale.set(n,n,n),i.current.render({scene:a.current,camera:r.current})}})),hn("canvas",{ref:t,className:Ut.a.cubes})},pn=r.a.createElement,gn=!0;t.default=function(e){var t=e.data,i=e.nav;return t?pn(r.a.Fragment,null,pn(O,null,pn("main",null,pn(s.a,null,pn("title",null,o.RichText.asText(t.title))),pn(D,{image:t.hero,title:t.title,videoSrcs:[{src:t.hero_video_sd[0].text,minWidth:0},{src:t.hero_video_md[0].text,minWidth:900},{src:t.hero_video_hd[0].text,minWidth:1500}]}),pn(W,{data:t}),pn(Z,{data:t}),pn(Ke,{data:t}),pn(st,{data:t}),pn(We,{data:t}),pn(dt,{data:t}),pn(It,{data:t})),pn(Lt.a,{file:i.privacy_pdf})),pn(fn,null)):pn(U,null)}},T7iU:function(e,t,i){(function(t){"object"==typeof navigator&&(e.exports=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return i}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function m(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function f(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?m(Object(i),!0).forEach((function(t){d(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var p={addCSS:!0,thumbWidth:15,watch:!0};function g(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}var v,y,b,w=function(e){return null!=e?e.constructor:null},x=function(e,t){return!!(e&&t&&e instanceof t)},T=function(e){return w(e)===String},k=function(e){return Array.isArray(e)},E=function(e){return x(e,NodeList)},A=T,M=k,C=E,O=function(e){return x(e,Element)},S=function(e){return x(e,Event)},_=function(e){return function(e){return null==e}(e)||(T(e)||k(e)||E(e))&&!e.length||function(e){return w(e)===Object}(e)&&!Object.keys(e).length},P=function(){function e(t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),O(t)?this.element=t:A(t)&&(this.element=document.querySelector(t)),O(this.element)&&_(this.element.rangeTouch)&&(this.config=f({},p,{},i),this.init())}return function(e,t,i){t&&h(e.prototype,t),i&&h(e,i)}(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,i=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(e){t.element[i](e,(function(e){return t.set(e)}),!1)}))}},{key:"get",value:function(t){if(!e.enabled||!S(t))return null;var i,n=t.target,r=t.changedTouches[0],a=parseFloat(n.getAttribute("min"))||0,s=parseFloat(n.getAttribute("max"))||100,o=parseFloat(n.getAttribute("step"))||1,l=n.getBoundingClientRect(),c=100/l.width*(this.config.thumbWidth/2)/100;return 0>(i=100/l.width*(r.clientX-l.left))?i=0:100<i&&(i=100),50>i?i-=(100-2*i)*c:50<i&&(i+=2*(i-50)*c),a+function(e,t){if(1>t){var i=function(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}(t);return parseFloat(e.toFixed(i))}return Math.round(e/t)*t}(i/100*(s-a),o)}},{key:"set",value:function(t){e.enabled&&S(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),function(e,t){if(e&&t){var i=new Event(t,{bubbles:!0});e.dispatchEvent(i)}}(t.target,"touchend"===t.type?"change":"input"))}}],[{key:"setup",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=null;if(_(t)||A(t)?n=Array.from(document.querySelectorAll(A(t)?t:'input[type="range"]')):O(t)?n=[t]:C(t)?n=Array.from(t):M(t)&&(n=t.filter(O)),_(n))return null;var r=f({},p,{},i);if(A(t)&&r.watch){var a=new MutationObserver((function(i){Array.from(i).forEach((function(i){Array.from(i.addedNodes).forEach((function(i){O(i)&&g(i,t)&&new e(i,r)}))}))}));a.observe(document.body,{childList:!0,subtree:!0})}return n.map((function(t){return new e(t,i)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}(),N=function(e){return null!=e?e.constructor:null},j=function(e,t){return Boolean(e&&t&&e instanceof t)},R=function(e){return null==e},I=function(e){return N(e)===Object},L=function(e){return N(e)===String},F=function(e){return N(e)===Function},D=function(e){return Array.isArray(e)},B=function(e){return j(e,NodeList)},z=function(e){return R(e)||(L(e)||D(e)||B(e))&&!e.length||I(e)&&!Object.keys(e).length},U=R,V=I,q=function(e){return N(e)===Number&&!Number.isNaN(e)},H=L,W=function(e){return N(e)===Boolean},X=F,Y=D,G=B,K=function(e){return j(e,Element)},$=function(e){return j(e,Event)},Q=function(e){return j(e,KeyboardEvent)},J=function(e){return j(e,TextTrack)||!R(e)&&L(e.kind)},Z=function(e){return j(e,Promise)&&F(e.then)},ee=function(e){if(j(e,window.URL))return!0;if(!L(e))return!1;var t=e;e.startsWith("http://")&&e.startsWith("https://")||(t="http://".concat(e));try{return!z(new URL(t).hostname)}catch(e){return!1}},te=z,ie=(v=document.createElement("span"),y={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},b=Object.keys(y).find((function(e){return void 0!==v.style[e]})),!!H(b)&&y[b]);function ne(e,t){setTimeout((function(){try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(e){}}),t)}var re={isIE:!!document.documentMode,isEdge:window.navigator.userAgent.includes("Edge"),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:/(iPad|iPhone|iPod)/gi.test(navigator.platform)};function ae(e,t){return t.split(".").reduce((function(e,t){return e&&e[t]}),e)}function se(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(!i.length)return e;var a=i.shift();return V(a)?(Object.keys(a).forEach((function(t){V(a[t])?(Object.keys(e).includes(t)||Object.assign(e,r({},t,{})),se(e[t],a[t])):Object.assign(e,r({},t,a[t]))})),se.apply(void 0,[e].concat(i))):e}function oe(e,t){var i=e.length?e:[e];Array.from(i).reverse().forEach((function(e,i){var n=i>0?t.cloneNode(!0):t,r=e.parentNode,a=e.nextSibling;n.appendChild(e),a?r.insertBefore(n,a):r.appendChild(n)}))}function le(e,t){K(e)&&!te(t)&&Object.entries(t).filter((function(e){var t=o(e,2)[1];return!U(t)})).forEach((function(t){var i=o(t,2),n=i[0],r=i[1];return e.setAttribute(n,r)}))}function ce(e,t,i){var n=document.createElement(e);return V(t)&&le(n,t),H(i)&&(n.innerText=i),n}function ue(e,t,i,n){K(t)&&t.appendChild(ce(e,i,n))}function he(e){G(e)||Y(e)?Array.from(e).forEach(he):K(e)&&K(e.parentNode)&&e.parentNode.removeChild(e)}function de(e){if(K(e))for(var t=e.childNodes.length;t>0;)e.removeChild(e.lastChild),t-=1}function me(e,t){return K(t)&&K(t.parentNode)&&K(e)?(t.parentNode.replaceChild(e,t),e):null}function fe(e,t){if(!H(e)||te(e))return{};var i={},n=se({},t);return e.split(",").forEach((function(e){var t=e.trim(),r=t.replace(".",""),a=t.replace(/[[\]]/g,"").split("="),s=o(a,1)[0],l=a.length>1?a[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":H(n.class)?i.class="".concat(n.class," ").concat(r):i.class=r;break;case"#":i.id=t.replace("#","");break;case"[":i[s]=l}})),se(n,i)}function pe(e,t){if(K(e)){var i=t;W(i)||(i=!e.hidden),e.hidden=i}}function ge(e,t,i){if(G(e))return Array.from(e).map((function(e){return ge(e,t,i)}));if(K(e)){var n="toggle";return void 0!==i&&(n=i?"add":"remove"),e.classList[n](t),e.classList.contains(t)}return!1}function ve(e,t){return K(e)&&e.classList.contains(t)}function ye(e,t){var i=Element.prototype;return(i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function be(e){return this.elements.container.querySelectorAll(e)}function we(e){return this.elements.container.querySelector(e)}function xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];K(e)&&(e.focus({preventScroll:!0}),t&&ge(e,this.config.classNames.tabFocus))}var Te,ke={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},Ee={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check:function(e,t,i){var n=re.isIPhone&&i&&Ee.playsinline,r=Ee[e]||"html5"!==t;return{api:r,ui:r&&Ee.rangeInput&&("video"!==e||!re.isIPhone||n)}},pip:!(re.isIPhone||!X(ce("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||ce("video").disablePictureInPicture)),airplay:X(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime:function(e){if(te(e))return!1;var t=o(e.split("/"),1)[0],i=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(ke).includes(i)&&(i+='; codecs="'.concat(ke[e],'"'));try{return Boolean(i&&this.media.canPlayType(i).replace(/no/,""))}catch(e){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(Te=document.createElement("input"),Te.type="range","range"===Te.type),touch:"ontouchstart"in document.documentElement,transitions:!1!==ie,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},Ae=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,null}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}();function Me(e,t,i){var n=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e&&"addEventListener"in e&&!te(t)&&X(i)){var o=t.split(" "),l=s;Ae&&(l={passive:a,capture:s}),o.forEach((function(t){n&&n.eventListeners&&r&&n.eventListeners.push({element:e,type:t,callback:i,options:l}),e[r?"addEventListener":"removeEventListener"](t,i,l)}))}}function Ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Me.call(this,e,t,i,!0,n,r)}function Oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Me.call(this,e,t,i,!1,n,r)}function Se(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Me.call(this,e,i,(function s(){Oe(e,i,s,r,a);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];n.apply(t,l)}),!0,r,a)}function _e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(K(e)&&!te(t)){var r=new CustomEvent(t,{bubbles:i,detail:s(s({},n),{},{plyr:this})});e.dispatchEvent(r)}}function Pe(){this&&this.eventListeners&&(this.eventListeners.forEach((function(e){var t=e.element,i=e.type,n=e.callback,r=e.options;t.removeEventListener(i,n,r)})),this.eventListeners=[])}function Ne(){var e=this;return new Promise((function(t){return e.ready?setTimeout(t,0):Ce.call(e,e.elements.container,"ready",t)})).then((function(){}))}function je(e){Z(e)&&e.then(null,(function(){}))}function Re(e){return!!(Y(e)||H(e)&&e.includes(":"))&&(Y(e)?e:e.split(":")).map(Number).every(q)}function Ie(e){if(!Y(e)||!e.every(q))return null;var t=o(e,2),i=t[0],n=t[1],r=function e(t,i){return 0===i?t:e(i,t%i)}(i,n);return[i/r,n/r]}function Le(e){var t=function(e){return Re(e)?e.split(":").map(Number):null},i=t(e);if(null===i&&(i=t(this.config.ratio)),null===i&&!te(this.embed)&&Y(this.embed.ratio)&&(i=this.embed.ratio),null===i&&this.isHTML5){var n=this.media;i=Ie([n.videoWidth,n.videoHeight])}return i}function Fe(e){if(!this.isVideo)return{};var t=this.elements.wrapper,i=Le.call(this,e),n=o(Y(i)?i:[0,0],2),r=100/n[0]*n[1];if(t.style.paddingBottom="".concat(r,"%"),this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){var a=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),s=(a-r)/(a/50);this.media.style.transform="translateY(-".concat(s,"%)")}else this.isHTML5&&t.classList.toggle(this.config.classNames.videoFixedRatio,null!==i);return{padding:r,ratio:i}}var De={getSources:function(){var e=this;return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter((function(t){var i=t.getAttribute("type");return!!te(i)||Ee.mime.call(e,i)})):[]},getQualityOptions:function(){return this.config.quality.forced?this.config.quality.options:De.getSources.call(this).map((function(e){return Number(e.getAttribute("size"))})).filter(Boolean)},setup:function(){if(this.isHTML5){var e=this;e.options.speed=e.config.speed.options,te(this.config.ratio)||Fe.call(e),Object.defineProperty(e.media,"quality",{get:function(){var t=De.getSources.call(e).find((function(t){return t.getAttribute("src")===e.source}));return t&&Number(t.getAttribute("size"))},set:function(t){if(e.quality!==t){if(e.config.quality.forced&&X(e.config.quality.onChange))e.config.quality.onChange(t);else{var i=De.getSources.call(e).find((function(e){return Number(e.getAttribute("size"))===t}));if(!i)return;var n=e.media,r=n.currentTime,a=n.paused,s=n.preload,o=n.readyState,l=n.playbackRate;e.media.src=i.getAttribute("src"),("none"!==s||o)&&(e.once("loadedmetadata",(function(){e.speed=l,e.currentTime=r,a||je(e.play())})),e.media.load())}_e.call(e,e.media,"qualitychange",!1,{quality:t})}}})}},cancelRequests:function(){this.isHTML5&&(he(De.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function Be(e){return Y(e)?e.filter((function(t,i){return e.indexOf(t)===i})):e}function ze(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return te(e)?e:e.toString().replace(/{(\d+)}/g,(function(e,t){return i[t].toString()}))}var Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),i.toString())},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toString().replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))};function qe(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString();return e=Ue(e,"-"," "),e=Ue(e,"_"," "),e=Ve(e),Ue(e," ","")}function He(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML}var We={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(te(e)||te(t))return"";var i=ae(t.i18n,e);if(te(i))return Object.keys(We).includes(e)?We[e]:"";var n={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(n).forEach((function(e){var t=o(e,2),n=t[0],r=t[1];i=Ue(i,n,r)})),i},Ye=function(){function t(i){e(this,t),this.enabled=i.config.storage.enabled,this.key=i.config.storage.key}return n(t,[{key:"get",value:function(e){if(!t.supported||!this.enabled)return null;var i=window.localStorage.getItem(this.key);if(te(i))return null;var n=JSON.parse(i);return H(e)&&e.length?n[e]:n}},{key:"set",value:function(e){if(t.supported&&this.enabled&&V(e)){var i=this.get();te(i)&&(i={}),se(i,e),window.localStorage.setItem(this.key,JSON.stringify(i))}}}],[{key:"supported",get:function(){try{return"localStorage"in window&&(window.localStorage.setItem("___test","___test"),window.localStorage.removeItem("___test"),!0)}catch(e){return!1}}}]),t}();function Ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return new Promise((function(i,n){try{var r=new XMLHttpRequest;if(!("withCredentials"in r))return;r.addEventListener("load",(function(){if("text"===t)try{i(JSON.parse(r.responseText))}catch(e){i(r.responseText)}else i(r.response)})),r.addEventListener("error",(function(){throw new Error(r.status)})),r.open("GET",e,!0),r.responseType=t,r.send()}catch(e){n(e)}}))}function Ke(e,t){if(H(e)){var i=H(t),n=function(){return null!==document.getElementById(t)},r=function(e,t){e.innerHTML=t,i&&n()||document.body.insertAdjacentElement("afterbegin",e)};if(!i||!n()){var a=Ye.supported,s=document.createElement("div");if(s.setAttribute("hidden",""),i&&s.setAttribute("id",t),a){var o=window.localStorage.getItem("".concat("cache","-").concat(t));if(null!==o){var l=JSON.parse(o);r(s,l.content)}}Ge(e).then((function(e){te(e)||(a&&window.localStorage.setItem("".concat("cache","-").concat(t),JSON.stringify({content:e})),r(s,e))})).catch((function(){}))}}}var $e=function(e){return Math.trunc(e/60/60%60,10)},Qe=function(e){return Math.trunc(e/60%60,10)},Je=function(e){return Math.trunc(e%60,10)};function Ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!q(e))return Ze(void 0,t,i);var n=function(e){return"0".concat(e).slice(-2)},r=$e(e),a=Qe(e),s=Je(e);return r=t||r>0?"".concat(r,":"):"","".concat(i&&e>0?"-":"").concat(r).concat(n(a),":").concat(n(s))}var et={getIconUrl:function(){var e=new URL(this.config.iconUrl,window.location).host!==window.location.host||re.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:e}},findElements:function(){try{return this.elements.controls=we.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:be.call(this,this.config.selectors.buttons.play),pause:we.call(this,this.config.selectors.buttons.pause),restart:we.call(this,this.config.selectors.buttons.restart),rewind:we.call(this,this.config.selectors.buttons.rewind),fastForward:we.call(this,this.config.selectors.buttons.fastForward),mute:we.call(this,this.config.selectors.buttons.mute),pip:we.call(this,this.config.selectors.buttons.pip),airplay:we.call(this,this.config.selectors.buttons.airplay),settings:we.call(this,this.config.selectors.buttons.settings),captions:we.call(this,this.config.selectors.buttons.captions),fullscreen:we.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=we.call(this,this.config.selectors.progress),this.elements.inputs={seek:we.call(this,this.config.selectors.inputs.seek),volume:we.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:we.call(this,this.config.selectors.display.buffer),currentTime:we.call(this,this.config.selectors.display.currentTime),duration:we.call(this,this.config.selectors.display.duration)},K(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip))),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon:function(e,t){var i=et.getIconUrl.call(this),n="".concat(i.cors?"":i.url,"#").concat(this.config.iconPrefix),r=document.createElementNS("http://www.w3.org/2000/svg","svg");le(r,se(t,{"aria-hidden":"true",focusable:"false"}));var a=document.createElementNS("http://www.w3.org/2000/svg","use"),s="".concat(n,"-").concat(e);return"href"in a&&a.setAttributeNS("http://www.w3.org/1999/xlink","href",s),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s),r.appendChild(a),r},createLabel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Xe(e,this.config),n=s(s({},t),{},{class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")});return ce("span",n,i)},createBadge:function(e){if(te(e))return null;var t=ce("span",{class:this.config.classNames.menu.value});return t.appendChild(ce("span",{class:this.config.classNames.menu.badge},e)),t},createButton:function(e,t){var i=this,n=se({},t),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.toString();return(t=qe(t)).charAt(0).toLowerCase()+t.slice(1)}(e),a={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach((function(e){Object.keys(n).includes(e)&&(a[e]=n[e],delete n[e])})),"button"!==a.element||Object.keys(n).includes("type")||(n.type="button"),Object.keys(n).includes("class")?n.class.split(" ").some((function(e){return e===i.config.classNames.control}))||se(n,{class:"".concat(n.class," ").concat(this.config.classNames.control)}):n.class=this.config.classNames.control,e){case"play":a.toggle=!0,a.label="play",a.labelPressed="pause",a.icon="play",a.iconPressed="pause";break;case"mute":a.toggle=!0,a.label="mute",a.labelPressed="unmute",a.icon="volume",a.iconPressed="muted";break;case"captions":a.toggle=!0,a.label="enableCaptions",a.labelPressed="disableCaptions",a.icon="captions-off",a.iconPressed="captions-on";break;case"fullscreen":a.toggle=!0,a.label="enterFullscreen",a.labelPressed="exitFullscreen",a.icon="enter-fullscreen",a.iconPressed="exit-fullscreen";break;case"play-large":n.class+=" ".concat(this.config.classNames.control,"--overlaid"),r="play",a.label="play",a.icon="play";break;default:te(a.label)&&(a.label=r),te(a.icon)&&(a.icon=e)}var s=ce(a.element);return a.toggle?(s.appendChild(et.createIcon.call(this,a.iconPressed,{class:"icon--pressed"})),s.appendChild(et.createIcon.call(this,a.icon,{class:"icon--not-pressed"})),s.appendChild(et.createLabel.call(this,a.labelPressed,{class:"label--pressed"})),s.appendChild(et.createLabel.call(this,a.label,{class:"label--not-pressed"}))):(s.appendChild(et.createIcon.call(this,a.icon)),s.appendChild(et.createLabel.call(this,a.label))),se(n,fe(this.config.selectors.buttons[r],n)),le(s,n),"play"===r?(Y(this.elements.buttons[r])||(this.elements.buttons[r]=[]),this.elements.buttons[r].push(s)):this.elements.buttons[r]=s,s},createRange:function(e,t){var i=ce("input",se(fe(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Xe(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=i,et.updateRangeFill.call(this,i),P.setup(i),i},createProgress:function(e,t){var i=ce("progress",se(fe(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if("volume"!==e){i.appendChild(ce("span",null,"0"));var n={played:"played",buffer:"buffered"}[e],r=n?Xe(n,this.config):"";i.innerText="% ".concat(r.toLowerCase())}return this.elements.display[e]=i,i},createTime:function(e,t){var i=fe(this.config.selectors.display[e],t),n=ce("div",se(i,{class:"".concat(i.class?i.class:""," ").concat(this.config.classNames.display.time," ").trim(),"aria-label":Xe(e,this.config)}),"00:00");return this.elements.display[e]=n,n},bindMenuItemShortcuts:function(e,t){var i=this;Ce.call(this,e,"keydown keyup",(function(n){if([32,38,39,40].includes(n.which)&&(n.preventDefault(),n.stopPropagation(),"keydown"!==n.type)){var r,a=ye(e,'[role="menuitemradio"]');!a&&[32,39].includes(n.which)?et.showMenuPanel.call(i,t,!0):32!==n.which&&(40===n.which||a&&39===n.which?(r=e.nextElementSibling,K(r)||(r=e.parentNode.firstElementChild)):(r=e.previousElementSibling,K(r)||(r=e.parentNode.lastElementChild)),xe.call(i,r,!0))}}),!1),Ce.call(this,e,"keyup",(function(e){13===e.which&&et.focusFirstMenuItem.call(i,null,!0)}))},createMenuItem:function(e){var t=this,i=e.value,n=e.list,r=e.type,a=e.title,s=e.badge,o=void 0===s?null:s,l=e.checked,c=void 0!==l&&l,u=fe(this.config.selectors.inputs[r]),h=ce("button",se(u,{type:"button",role:"menuitemradio",class:"".concat(this.config.classNames.control," ").concat(u.class?u.class:"").trim(),"aria-checked":c,value:i})),d=ce("span");d.innerHTML=a,K(o)&&d.appendChild(o),h.appendChild(d),Object.defineProperty(h,"checked",{enumerable:!0,get:function(){return"true"===h.getAttribute("aria-checked")},set:function(e){e&&Array.from(h.parentNode.children).filter((function(e){return ye(e,'[role="menuitemradio"]')})).forEach((function(e){return e.setAttribute("aria-checked","false")})),h.setAttribute("aria-checked",e?"true":"false")}}),this.listeners.bind(h,"click keyup",(function(e){if(!Q(e)||32===e.which){switch(e.preventDefault(),e.stopPropagation(),h.checked=!0,r){case"language":t.currentTrack=Number(i);break;case"quality":t.quality=i;break;case"speed":t.speed=parseFloat(i)}et.showMenuPanel.call(t,"home",Q(e))}}),r,!1),et.bindMenuItemShortcuts.call(this,h,r),n.appendChild(h)},formatTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!q(e))return e;var i=$e(this.duration)>0;return Ze(e,i,t)},updateTimeDisplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];K(e)&&q(t)&&(e.innerText=et.formatTime(t,i))},updateVolume:function(){this.supported.ui&&(K(this.elements.inputs.volume)&&et.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),K(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;K(e)&&(e.value=t,et.updateRangeFill.call(this,e))},updateProgress:function(e){var t=this;if(this.supported.ui&&$(e)){var i,n,r=0;if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":i=this.currentTime,n=this.duration,r=0===i||0===n||Number.isNaN(i)||Number.isNaN(n)?0:(i/n*100).toFixed(2),"timeupdate"===e.type&&et.setRange.call(this,this.elements.inputs.seek,r);break;case"playing":case"progress":!function(e,i){var n=q(i)?i:0,r=K(e)?e:t.elements.display.buffer;if(K(r)){r.value=n;var a=r.getElementsByTagName("span")[0];K(a)&&(a.childNodes[0].nodeValue=n)}}(this.elements.display.buffer,100*this.buffered)}}},updateRangeFill:function(e){var t=$(e)?e.target:e;if(K(t)&&"range"===t.getAttribute("type")){if(ye(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);var i=et.formatTime(this.currentTime),n=et.formatTime(this.duration),r=Xe("seekLabel",this.config);t.setAttribute("aria-valuetext",r.replace("{currentTime}",i).replace("{duration}",n))}else if(ye(t,this.config.selectors.inputs.volume)){var a=100*t.value;t.setAttribute("aria-valuenow",a),t.setAttribute("aria-valuetext","".concat(a.toFixed(1),"%"))}else t.setAttribute("aria-valuenow",t.value);re.isWebkit&&t.style.setProperty("--value","".concat(t.value/t.max*100,"%"))}},updateSeekTooltip:function(e){var t=this;if(this.config.tooltips.seek&&K(this.elements.inputs.seek)&&K(this.elements.display.seekTooltip)&&0!==this.duration){var i="".concat(this.config.classNames.tooltip,"--visible"),n=function(e){return ge(t.elements.display.seekTooltip,i,e)};if(this.touch)n(!1);else{var r=0,a=this.elements.progress.getBoundingClientRect();if($(e))r=100/a.width*(e.pageX-a.left);else{if(!ve(this.elements.display.seekTooltip,i))return;r=parseFloat(this.elements.display.seekTooltip.style.left,10)}r<0?r=0:r>100&&(r=100),et.updateTimeDisplay.call(this,this.elements.display.seekTooltip,this.duration/100*r),this.elements.display.seekTooltip.style.left="".concat(r,"%"),$(e)&&["mouseenter","mouseleave"].includes(e.type)&&n("mouseenter"===e.type)}}},timeUpdate:function(e){var t=!K(this.elements.display.duration)&&this.config.invertTime;et.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||et.updateProgress.call(this,e)},durationUpdate:function(){if(this.supported.ui&&(this.config.invertTime||!this.currentTime)){if(this.duration>=Math.pow(2,32))return pe(this.elements.display.currentTime,!0),void pe(this.elements.progress,!0);K(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);var e=K(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&et.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&et.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),et.updateSeekTooltip.call(this)}},toggleMenuButton:function(e,t){pe(this.elements.settings.buttons[e],!t)},updateSetting:function(e,t,i){var n=this.elements.settings.panels[e],r=null,a=t;if("captions"===e)r=this.currentTrack;else{if(r=te(i)?this[e]:i,te(r)&&(r=this.config[e].default),!te(this.options[e])&&!this.options[e].includes(r))return void this.debug.warn("Unsupported value of '".concat(r,"' for ").concat(e));if(!this.config[e].options.includes(r))return void this.debug.warn("Disabled value of '".concat(r,"' for ").concat(e))}if(K(a)||(a=n&&n.querySelector('[role="menu"]')),K(a)){this.elements.settings.buttons[e].querySelector(".".concat(this.config.classNames.menu.value)).innerHTML=et.getLabel.call(this,e,r);var s=a&&a.querySelector('[value="'.concat(r,'"]'));K(s)&&(s.checked=!0)}},getLabel:function(e,t){switch(e){case"speed":return 1===t?Xe("normal",this.config):"".concat(t,"&times;");case"quality":if(q(t)){var i=Xe("qualityLabel.".concat(t),this.config);return i.length?i:"".concat(t,"p")}return Ve(t);case"captions":return nt.getLabel.call(this);default:return null}},setQualityMenu:function(e){var t=this;if(K(this.elements.settings.panels.quality)){var i=this.elements.settings.panels.quality.querySelector('[role="menu"]');Y(e)&&(this.options.quality=Be(e).filter((function(e){return t.config.quality.options.includes(e)})));var n=!te(this.options.quality)&&this.options.quality.length>1;if(et.toggleMenuButton.call(this,"quality",n),de(i),et.checkMenu.call(this),n){var r=function(e){var i=Xe("qualityBadge.".concat(e),t.config);return i.length?et.createBadge.call(t,i):null};this.options.quality.sort((function(e,i){var n=t.config.quality.options;return n.indexOf(e)>n.indexOf(i)?1:-1})).forEach((function(e){et.createMenuItem.call(t,{value:e,list:i,type:"quality",title:et.getLabel.call(t,"quality",e),badge:r(e)})})),et.updateSetting.call(this,"quality",i)}}},setCaptionsMenu:function(){var e=this;if(K(this.elements.settings.panels.captions)){var t=this.elements.settings.panels.captions.querySelector('[role="menu"]'),i=nt.getTracks.call(this),n=Boolean(i.length);if(et.toggleMenuButton.call(this,"captions",n),de(t),et.checkMenu.call(this),n){var r=i.map((function(i,n){return{value:n,checked:e.captions.toggled&&e.currentTrack===n,title:nt.getLabel.call(e,i),badge:i.language&&et.createBadge.call(e,i.language.toUpperCase()),list:t,type:"language"}}));r.unshift({value:-1,checked:!this.captions.toggled,title:Xe("disabled",this.config),list:t,type:"language"}),r.forEach(et.createMenuItem.bind(this)),et.updateSetting.call(this,"captions",t)}}},setSpeedMenu:function(){var e=this;if(K(this.elements.settings.panels.speed)){var t=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter((function(t){return t>=e.minimumSpeed&&t<=e.maximumSpeed}));var i=!te(this.options.speed)&&this.options.speed.length>1;et.toggleMenuButton.call(this,"speed",i),de(t),et.checkMenu.call(this),i&&(this.options.speed.forEach((function(i){et.createMenuItem.call(e,{value:i,list:t,type:"speed",title:et.getLabel.call(e,"speed",i)})})),et.updateSetting.call(this,"speed",t))}},checkMenu:function(){var e=this.elements.settings.buttons,t=!te(e)&&Object.values(e).some((function(e){return!e.hidden}));pe(this.elements.settings.menu,!t)},focusFirstMenuItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.elements.settings.popup.hidden){var i=e;K(i)||(i=Object.values(this.elements.settings.panels).find((function(e){return!e.hidden})));var n=i.querySelector('[role^="menuitem"]');xe.call(this,n,t)}},toggleMenu:function(e){var t=this.elements.settings.popup,i=this.elements.buttons.settings;if(K(t)&&K(i)){var n=t.hidden,r=n;if(W(e))r=e;else if(Q(e)&&27===e.which)r=!1;else if($(e)){var a=X(e.composedPath)?e.composedPath()[0]:e.target,s=t.contains(a);if(s||!s&&e.target!==i&&r)return}i.setAttribute("aria-expanded",r),pe(t,!r),ge(this.elements.container,this.config.classNames.menu.open,r),r&&Q(e)?et.focusFirstMenuItem.call(this,null,!0):r||n||xe.call(this,i,Q(e))}},getMenuSize:function(e){var t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);var i=t.scrollWidth,n=t.scrollHeight;return he(t),{width:i,height:n}},showMenuPanel:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.elements.container.querySelector("#plyr-settings-".concat(this.id,"-").concat(t));if(K(n)){var r=n.parentNode,a=Array.from(r.children).find((function(e){return!e.hidden}));if(Ee.transitions&&!Ee.reducedMotion){r.style.width="".concat(a.scrollWidth,"px"),r.style.height="".concat(a.scrollHeight,"px");var s=et.getMenuSize.call(this,n),o=function t(i){i.target===r&&["width","height"].includes(i.propertyName)&&(r.style.width="",r.style.height="",Oe.call(e,r,ie,t))};Ce.call(this,r,ie,o),r.style.width="".concat(s.width,"px"),r.style.height="".concat(s.height,"px")}pe(a,!0),pe(n,!1),et.focusFirstMenuItem.call(this,n,i)}},setDownloadUrl:function(){var e=this.elements.buttons.download;K(e)&&e.setAttribute("href",this.download)},create:function(e){var t=this,i=et.bindMenuItemShortcuts,n=et.createButton,r=et.createProgress,a=et.createRange,s=et.createTime,o=et.setQualityMenu,l=et.setSpeedMenu,c=et.showMenuPanel;this.elements.controls=null,Y(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(n.call(this,"play-large"));var u=ce("div",fe(this.config.selectors.controls.wrapper));this.elements.controls=u;var h={class:"plyr__controls__item"};return Be(Y(this.config.controls)?this.config.controls:[]).forEach((function(o){if("restart"===o&&u.appendChild(n.call(t,"restart",h)),"rewind"===o&&u.appendChild(n.call(t,"rewind",h)),"play"===o&&u.appendChild(n.call(t,"play",h)),"fast-forward"===o&&u.appendChild(n.call(t,"fast-forward",h)),"progress"===o){var l=ce("div",{class:"".concat(h.class," plyr__progress__container")}),d=ce("div",fe(t.config.selectors.progress));if(d.appendChild(a.call(t,"seek",{id:"plyr-seek-".concat(e.id)})),d.appendChild(r.call(t,"buffer")),t.config.tooltips.seek){var m=ce("span",{class:t.config.classNames.tooltip},"00:00");d.appendChild(m),t.elements.display.seekTooltip=m}t.elements.progress=d,l.appendChild(t.elements.progress),u.appendChild(l)}if("current-time"===o&&u.appendChild(s.call(t,"currentTime",h)),"duration"===o&&u.appendChild(s.call(t,"duration",h)),"mute"===o||"volume"===o){var f=t.elements.volume;if(K(f)&&u.contains(f)||(f=ce("div",se({},h,{class:"".concat(h.class," plyr__volume").trim()})),t.elements.volume=f,u.appendChild(f)),"mute"===o&&f.appendChild(n.call(t,"mute")),"volume"===o&&!re.isIos){var p={max:1,step:.05,value:t.config.volume};f.appendChild(a.call(t,"volume",se(p,{id:"plyr-volume-".concat(e.id)})))}}if("captions"===o&&u.appendChild(n.call(t,"captions",h)),"settings"===o&&!te(t.config.settings)){var g=ce("div",se({},h,{class:"".concat(h.class," plyr__menu").trim(),hidden:""}));g.appendChild(n.call(t,"settings",{"aria-haspopup":!0,"aria-controls":"plyr-settings-".concat(e.id),"aria-expanded":!1}));var v=ce("div",{class:"plyr__menu__container",id:"plyr-settings-".concat(e.id),hidden:""}),y=ce("div"),b=ce("div",{id:"plyr-settings-".concat(e.id,"-home")}),w=ce("div",{role:"menu"});b.appendChild(w),y.appendChild(b),t.elements.settings.panels.home=b,t.config.settings.forEach((function(n){var r=ce("button",se(fe(t.config.selectors.buttons.settings),{type:"button",class:"".concat(t.config.classNames.control," ").concat(t.config.classNames.control,"--forward"),role:"menuitem","aria-haspopup":!0,hidden:""}));i.call(t,r,n),Ce.call(t,r,"click",(function(){c.call(t,n,!1)}));var a=ce("span",null,Xe(n,t.config)),s=ce("span",{class:t.config.classNames.menu.value});s.innerHTML=e[n],a.appendChild(s),r.appendChild(a),w.appendChild(r);var o=ce("div",{id:"plyr-settings-".concat(e.id,"-").concat(n),hidden:""}),l=ce("button",{type:"button",class:"".concat(t.config.classNames.control," ").concat(t.config.classNames.control,"--back")});l.appendChild(ce("span",{"aria-hidden":!0},Xe(n,t.config))),l.appendChild(ce("span",{class:t.config.classNames.hidden},Xe("menuBack",t.config))),Ce.call(t,o,"keydown",(function(e){37===e.which&&(e.preventDefault(),e.stopPropagation(),c.call(t,"home",!0))}),!1),Ce.call(t,l,"click",(function(){c.call(t,"home",!1)})),o.appendChild(l),o.appendChild(ce("div",{role:"menu"})),y.appendChild(o),t.elements.settings.buttons[n]=r,t.elements.settings.panels[n]=o})),v.appendChild(y),g.appendChild(v),u.appendChild(g),t.elements.settings.popup=v,t.elements.settings.menu=g}if("pip"===o&&Ee.pip&&u.appendChild(n.call(t,"pip",h)),"airplay"===o&&Ee.airplay&&u.appendChild(n.call(t,"airplay",h)),"download"===o){var x=se({},h,{element:"a",href:t.download,target:"_blank"});t.isHTML5&&(x.download="");var T=t.config.urls.download;!ee(T)&&t.isEmbed&&se(x,{icon:"logo-".concat(t.provider),label:t.provider}),u.appendChild(n.call(t,"download",x))}"fullscreen"===o&&u.appendChild(n.call(t,"fullscreen",h))})),this.isHTML5&&o.call(this,De.getQualityOptions.call(this)),l.call(this),u},inject:function(){var e=this;if(this.config.loadSprite){var t=et.getIconUrl.call(this);t.cors&&Ke(t.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());var i=null;this.elements.controls=null;var n,r,a={id:this.id,seektime:this.config.seekTime,title:this.config.title},s=!0;if(X(this.config.controls)&&(this.config.controls=this.config.controls.call(this,a)),this.config.controls||(this.config.controls=[]),K(this.config.controls)||H(this.config.controls)?i=this.config.controls:(i=et.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:nt.getLabel.call(this)}),s=!1),s&&H(this.config.controls)&&(n=i,Object.entries(a).forEach((function(e){var t=o(e,2),i=t[0],r=t[1];n=Ue(n,"{".concat(i,"}"),r)})),i=n),H(this.config.selectors.controls.container)&&(r=document.querySelector(this.config.selectors.controls.container)),K(r)||(r=this.elements.container),r[K(i)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",i),K(this.elements.controls)||et.findElements.call(this),!te(this.elements.buttons)){var l=function(t){var i=e.config.classNames.controlPressed;Object.defineProperty(t,"pressed",{enumerable:!0,get:function(){return ve(t,i)},set:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ge(t,i,e)}})};Object.values(this.elements.buttons).filter(Boolean).forEach((function(e){Y(e)||G(e)?Array.from(e).filter(Boolean).forEach(l):l(e)}))}if(re.isEdge&&ne(r),this.config.tooltips.controls){var c=this.config,u=c.classNames,h=c.selectors,d="".concat(h.controls.wrapper," ").concat(h.labels," .").concat(u.hidden),m=be.call(this,d);Array.from(m).forEach((function(t){ge(t,e.config.classNames.hidden,!1),ge(t,e.config.classNames.tooltip,!0)}))}}};function tt(e){var t=e;if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){var i=document.createElement("a");i.href=t,t=i.href}try{return new URL(t)}catch(e){return null}}function it(e){var t=new URLSearchParams;return V(e)&&Object.entries(e).forEach((function(e){var i=o(e,2),n=i[0],r=i[1];t.set(n,r)})),t}var nt={setup:function(){if(this.supported.ui)if(!this.isVideo||this.isYouTube||this.isHTML5&&!Ee.textTracks)Y(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&et.setCaptionsMenu.call(this);else{if(K(this.elements.captions)||(this.elements.captions=ce("div",fe(this.config.selectors.captions)),function(e,t){K(e)&&K(t)&&t.parentNode.insertBefore(e,t.nextSibling)}(this.elements.captions,this.elements.wrapper)),re.isIE&&window.URL){var e=this.media.querySelectorAll("track");Array.from(e).forEach((function(e){var t=e.getAttribute("src"),i=tt(t);null!==i&&i.hostname!==window.location.href.hostname&&["http:","https:"].includes(i.protocol)&&Ge(t,"blob").then((function(t){e.setAttribute("src",window.URL.createObjectURL(t))})).catch((function(){he(e)}))}))}var t=Be((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map((function(e){return e.split("-")[0]}))),i=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===i&&(i=o(t,1)[0]);var n=this.storage.get("captions");if(W(n)||(n=this.config.captions.active),Object.assign(this.captions,{toggled:!1,active:n,language:i,languages:t}),this.isHTML5){var r=this.config.captions.update?"addtrack removetrack":"removetrack";Ce.call(this,this.media.textTracks,r,nt.update.bind(this))}setTimeout(nt.update.bind(this),0)}},update:function(){var e=this,t=nt.getTracks.call(this,!0),i=this.captions,n=i.active,r=i.language,a=i.meta,s=i.currentTrackNode,o=Boolean(t.find((function(e){return e.language===r})));this.isHTML5&&this.isVideo&&t.filter((function(e){return!a.get(e)})).forEach((function(t){e.debug.log("Track added",t),a.set(t,{default:"showing"===t.mode}),"showing"===t.mode&&(t.mode="hidden"),Ce.call(e,t,"cuechange",(function(){return nt.updateCues.call(e)}))})),(o&&this.language!==r||!t.includes(s))&&(nt.setLanguage.call(this,r),nt.toggle.call(this,n&&o)),ge(this.elements.container,this.config.classNames.captions.enabled,!te(t)),Y(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&et.setCaptionsMenu.call(this)},toggle:function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.supported.ui){var n=this.captions.toggled,r=this.config.classNames.captions.active,a=U(e)?!n:e;if(a!==n){if(i||(this.captions.active=a,this.storage.set({captions:a})),!this.language&&a&&!i){var s=nt.getTracks.call(this),o=nt.findTrack.call(this,[this.captions.language].concat(l(this.captions.languages)),!0);return this.captions.language=o.language,void nt.set.call(this,s.indexOf(o))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=a),ge(this.elements.container,r,a),this.captions.toggled=a,et.updateSetting.call(this,"captions"),_e.call(this,this.media,a?"captionsenabled":"captionsdisabled")}setTimeout((function(){a&&t.captions.toggled&&(t.captions.currentTrackNode.mode="hidden")}))}},set:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=nt.getTracks.call(this);if(-1!==e)if(q(e))if(e in i){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;var n=i[e],r=n||{},a=r.language;this.captions.currentTrackNode=n,et.updateSetting.call(this,"captions"),t||(this.captions.language=a,this.storage.set({language:a})),this.isVimeo&&this.embed.enableTextTrack(a),_e.call(this,this.media,"languagechange")}nt.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&nt.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else nt.toggle.call(this,!1,t)},setLanguage:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(H(e)){var i=e.toLowerCase();this.captions.language=i;var n=nt.getTracks.call(this),r=nt.findTrack.call(this,[i]);nt.set.call(this,n.indexOf(r),t)}else this.debug.warn("Invalid language argument",e)},getTracks:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=Array.from((this.media||{}).textTracks||[]);return i.filter((function(i){return!e.isHTML5||t||e.captions.meta.has(i)})).filter((function(e){return["captions","subtitles"].includes(e.kind)}))},findTrack:function(e){var t,i=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=nt.getTracks.call(this),a=function(e){return Number((i.captions.meta.get(e)||{}).default)},s=Array.from(r).sort((function(e,t){return a(t)-a(e)}));return e.every((function(e){return!(t=s.find((function(t){return t.language===e})))})),t||(n?s[0]:void 0)},getCurrentTrack:function(){return nt.getTracks.call(this)[this.currentTrack]},getLabel:function(e){var t=e;return!J(t)&&Ee.textTracks&&this.captions.toggled&&(t=nt.getCurrentTrack.call(this)),J(t)?te(t.label)?te(t.language)?Xe("enabled",this.config):e.language.toUpperCase():t.label:Xe("disabled",this.config)},updateCues:function(e){if(this.supported.ui)if(K(this.elements.captions))if(U(e)||Array.isArray(e)){var t=e;if(!t){var i=nt.getCurrentTrack.call(this);t=Array.from((i||{}).activeCues||[]).map((function(e){return e.getCueAsHTML()})).map(He)}var n=t.map((function(e){return e.trim()})).join("\n");if(n!==this.elements.captions.innerHTML){de(this.elements.captions);var r=ce("span",fe(this.config.selectors.caption));r.innerHTML=n,this.elements.captions.appendChild(r),_e.call(this,this.media,"cuechange")}}else this.debug.warn("updateCues: Invalid input",e);else this.debug.warn("No captions element to render to")}},rt={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.6.2/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/v2/video/{0}.json"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,premium:!1,referrerPolicy:null},youtube:{noCookie:!0,rel:0,showinfo:0,iv_load_policy:3,modestbranding:1}},at="picture-in-picture",st={html5:"html5",youtube:"youtube",vimeo:"vimeo"},ot="video",lt=function(){},ct=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e(this,t),this.enabled=window.console&&i,this.enabled&&this.log("Debugging enabled")}return n(t,[{key:"log",get:function(){return this.enabled?Function.prototype.bind.call(console.log,console):lt}},{key:"warn",get:function(){return this.enabled?Function.prototype.bind.call(console.warn,console):lt}},{key:"error",get:function(){return this.enabled?Function.prototype.bind.call(console.error,console):lt}}]),t}(),ut=function(){function t(i){var n=this;e(this,t),this.player=i,this.prefix=t.prefix,this.property=t.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===i.config.fullscreen.fallback,this.player.elements.fullscreen=i.config.fullscreen.container&&function(e,t){return(Element.prototype.closest||function(){var e=this;do{if(ye.matches(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}).call(e,t)}(this.player.elements.container,i.config.fullscreen.container),Ce.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":"".concat(this.prefix,"fullscreenchange"),(function(){n.onChange()})),Ce.call(this.player,this.player.elements.container,"dblclick",(function(e){K(n.player.elements.controls)&&n.player.elements.controls.contains(e.target)||n.toggle()})),Ce.call(this,this.player.elements.container,"keydown",(function(e){return n.trapFocus(e)})),this.update()}return n(t,[{key:"onChange",value:function(){if(this.enabled){var e=this.player.elements.buttons.fullscreen;K(e)&&(e.pressed=this.active),_e.call(this.player,this.target,this.active?"enterfullscreen":"exitfullscreen",!0)}}},{key:"toggleFallback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=e?"hidden":"",ge(this.target,this.player.config.classNames.fullscreen.fallback,e),re.isIos){var t=document.head.querySelector('meta[name="viewport"]'),i="viewport-fit=cover";t||(t=document.createElement("meta")).setAttribute("name","viewport");var n=H(t.content)&&t.content.includes(i);e?(this.cleanupViewport=!n,n||(t.content+=",".concat(i))):this.cleanupViewport&&(t.content=t.content.split(",").filter((function(e){return e.trim()!==i})).join(","))}this.onChange()}},{key:"trapFocus",value:function(e){if(!re.isIos&&this.active&&"Tab"===e.key&&9===e.keyCode){var t=document.activeElement,i=be.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),n=o(i,1)[0],r=i[i.length-1];t!==r||e.shiftKey?t===n&&e.shiftKey&&(r.focus(),e.preventDefault()):(n.focus(),e.preventDefault())}}},{key:"update",value:function(){var e;this.enabled?(e=this.forceFallback?"Fallback (forced)":t.native?"Native":"Fallback",this.player.debug.log("".concat(e," fullscreen enabled"))):this.player.debug.log("Fullscreen not supported and fallback disabled"),ge(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)}},{key:"enter",value:function(){this.enabled&&(re.isIos&&this.player.config.fullscreen.iosNative?this.target.webkitEnterFullscreen():!t.native||this.forceFallback?this.toggleFallback(!0):this.prefix?te(this.prefix)||this.target["".concat(this.prefix,"Request").concat(this.property)]():this.target.requestFullscreen({navigationUI:"hide"}))}},{key:"exit",value:function(){if(this.enabled)if(re.isIos&&this.player.config.fullscreen.iosNative)this.target.webkitExitFullscreen(),je(this.player.play());else if(!t.native||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!te(this.prefix)){var e="moz"===this.prefix?"Cancel":"Exit";document["".concat(this.prefix).concat(e).concat(this.property)]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}},{key:"toggle",value:function(){this.active?this.exit():this.enter()}},{key:"usingNative",get:function(){return t.native&&!this.forceFallback}},{key:"enabled",get:function(){return(t.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}},{key:"active",get:function(){if(!this.enabled)return!1;if(!t.native||this.forceFallback)return ve(this.target,this.player.config.classNames.fullscreen.fallback);var e=this.prefix?document["".concat(this.prefix).concat(this.property,"Element")]:document.fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}},{key:"target",get:function(){return re.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen||this.player.elements.container}}],[{key:"native",get:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},{key:"prefix",get:function(){if(X(document.exitFullscreen))return"";var e="";return["webkit","moz","ms"].some((function(t){return!(!X(document["".concat(t,"ExitFullscreen")])&&!X(document["".concat(t,"CancelFullScreen")]))&&(e=t,!0)})),e}},{key:"property",get:function(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}}]),t}();function ht(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((function(i,n){var r=new Image,a=function(){delete r.onload,delete r.onerror,(r.naturalWidth>=t?i:n)(r)};Object.assign(r,{onload:a,onerror:a,src:e})}))}var dt={addStyleHook:function(){ge(this.elements.container,this.config.selectors.container.replace(".",""),!0),ge(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build:function(){var e=this;if(this.listeners.media(),!this.supported.ui)return this.debug.warn("Basic support only for ".concat(this.provider," ").concat(this.type)),void dt.toggleNativeControls.call(this,!0);K(this.elements.controls)||(et.inject.call(this),this.listeners.controls()),dt.toggleNativeControls.call(this),this.isHTML5&&nt.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,et.updateVolume.call(this),et.timeUpdate.call(this),dt.checkPlaying.call(this),ge(this.elements.container,this.config.classNames.pip.supported,Ee.pip&&this.isHTML5&&this.isVideo),ge(this.elements.container,this.config.classNames.airplay.supported,Ee.airplay&&this.isHTML5),ge(this.elements.container,this.config.classNames.isIos,re.isIos),ge(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout((function(){_e.call(e,e.media,"ready")}),0),dt.setTitle.call(this),this.poster&&dt.setPoster.call(this,this.poster,!1).catch((function(){})),this.config.duration&&et.durationUpdate.call(this)},setTitle:function(){var e=Xe("play",this.config);if(H(this.config.title)&&!te(this.config.title)&&(e+=", ".concat(this.config.title)),Array.from(this.elements.buttons.play||[]).forEach((function(t){t.setAttribute("aria-label",e)})),this.isEmbed){var t=we.call(this,"iframe");if(!K(t))return;var i=te(this.config.title)?"video":this.config.title,n=Xe("frameTitle",this.config);t.setAttribute("title",n.replace("{title}",i))}},togglePoster:function(e){ge(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster:function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return i&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",e),Ne.call(this).then((function(){return ht(e)})).catch((function(i){throw e===t.poster&&dt.togglePoster.call(t,!1),i})).then((function(){if(e!==t.poster)throw new Error("setPoster cancelled by later call to setPoster")})).then((function(){return Object.assign(t.elements.poster.style,{backgroundImage:"url('".concat(e,"')"),backgroundSize:""}),dt.togglePoster.call(t,!0),e})))},checkPlaying:function(e){var t=this;ge(this.elements.container,this.config.classNames.playing,this.playing),ge(this.elements.container,this.config.classNames.paused,this.paused),ge(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach((function(e){Object.assign(e,{pressed:t.playing}),e.setAttribute("aria-label",Xe(t.playing?"pause":"play",t.config))})),$(e)&&"timeupdate"===e.type||dt.toggleControls.call(this)},checkLoading:function(e){var t=this;this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout((function(){ge(t.elements.container,t.config.classNames.loading,t.loading),dt.toggleControls.call(t)}),this.loading?250:0)},toggleControls:function(e){var t=this.elements.controls;if(t&&this.config.hideControls){var i=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||i))}},migrateStyles:function(){var e=this;Object.values(s({},this.media.style)).filter((function(e){return!te(e)&&e.startsWith("--plyr")})).forEach((function(t){e.elements.container.style.setProperty(t,e.media.style.getPropertyValue(t)),e.media.style.removeProperty(t)})),te(this.media.style)&&this.media.removeAttribute("style")}},mt=function(){function t(i){e(this,t),this.player=i,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}return n(t,[{key:"handleKey",value:function(e){var t=this.player,i=t.elements,n=e.keyCode?e.keyCode:e.which,r="keydown"===e.type,a=r&&n===this.lastKey;if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)&&q(n))if(r){var s=document.activeElement;if(K(s)){var o=t.config.selectors.editable;if(s!==i.inputs.seek&&ye(s,o))return;if(32===e.which&&ye(s,'button, [role^="menuitem"]'))return}switch([32,37,38,39,40,48,49,50,51,52,53,54,56,57,67,70,73,75,76,77,79].includes(n)&&(e.preventDefault(),e.stopPropagation()),n){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:a||(t.currentTime=t.duration/10*(n-48));break;case 32:case 75:a||je(t.togglePlay());break;case 38:t.increaseVolume(.1);break;case 40:t.decreaseVolume(.1);break;case 77:a||(t.muted=!t.muted);break;case 39:t.forward();break;case 37:t.rewind();break;case 70:t.fullscreen.toggle();break;case 67:a||t.toggleCaptions();break;case 76:t.loop=!t.loop}27===n&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=n}else this.lastKey=null}},{key:"toggleMenu",value:function(e){et.toggleMenu.call(this.player,e)}},{key:"firstTouch",value:function(){var e=this.player,t=e.elements;e.touch=!0,ge(t.container,e.config.classNames.isTouch,!0)}},{key:"setTabFocus",value:function(e){var t=this.player,i=t.elements;if(clearTimeout(this.focusTimer),"keydown"!==e.type||9===e.which){"keydown"===e.type&&(this.lastKeyDown=e.timeStamp);var n,r=e.timeStamp-this.lastKeyDown<=20;("focus"!==e.type||r)&&(n=t.config.classNames.tabFocus,ge(be.call(t,".".concat(n)),n,!1),"focusout"!==e.type&&(this.focusTimer=setTimeout((function(){var e=document.activeElement;i.container.contains(e)&&ge(document.activeElement,t.config.classNames.tabFocus,!0)}),10)))}}},{key:"global",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.player;t.config.keyboard.global&&Me.call(t,window,"keydown keyup",this.handleKey,e,!1),Me.call(t,document.body,"click",this.toggleMenu,e),Se.call(t,document.body,"touchstart",this.firstTouch),Me.call(t,document.body,"keydown focus blur focusout",this.setTabFocus,e,!1,!0)}},{key:"container",value:function(){var e=this.player,t=e.config,i=e.elements,n=e.timers;!t.keyboard.global&&t.keyboard.focused&&Ce.call(e,i.container,"keydown keyup",this.handleKey,!1),Ce.call(e,i.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",(function(t){var r=i.controls;r&&"enterfullscreen"===t.type&&(r.pressed=!1,r.hover=!1);var a=0;["touchstart","touchmove","mousemove"].includes(t.type)&&(dt.toggleControls.call(e,!0),a=e.touch?3e3:2e3),clearTimeout(n.controls),n.controls=setTimeout((function(){return dt.toggleControls.call(e,!1)}),a)}));var r=function(t){if(!t)return Fe.call(e);var n=i.container.getBoundingClientRect(),r=n.width,a=n.height;return Fe.call(e,"".concat(r,":").concat(a))},a=function(){clearTimeout(n.resized),n.resized=setTimeout(r,50)};Ce.call(e,i.container,"enterfullscreen exitfullscreen",(function(t){var n=e.fullscreen,s=n.target,l=n.usingNative;if(s===i.container&&(e.isEmbed||!te(e.config.ratio))){var c="enterfullscreen"===t.type,u=r(c);u.padding,function(t,i,n){if(e.isVimeo&&!e.config.vimeo.premium){var r=e.elements.wrapper.firstChild,a=o(t,2)[1],s=o(Le.call(e),2),l=s[0],c=s[1];r.style.maxWidth=n?"".concat(a/c*l,"px"):null,r.style.margin=n?"0 auto":null}}(u.ratio,0,c),l||(c?Ce.call(e,window,"resize",a):Oe.call(e,window,"resize",a))}}))}},{key:"media",value:function(){var e=this,t=this.player,i=t.elements;if(Ce.call(t,t.media,"timeupdate seeking seeked",(function(e){return et.timeUpdate.call(t,e)})),Ce.call(t,t.media,"durationchange loadeddata loadedmetadata",(function(e){return et.durationUpdate.call(t,e)})),Ce.call(t,t.media,"ended",(function(){t.isHTML5&&t.isVideo&&t.config.resetOnEnd&&(t.restart(),t.pause())})),Ce.call(t,t.media,"progress playing seeking seeked",(function(e){return et.updateProgress.call(t,e)})),Ce.call(t,t.media,"volumechange",(function(e){return et.updateVolume.call(t,e)})),Ce.call(t,t.media,"playing play pause ended emptied timeupdate",(function(e){return dt.checkPlaying.call(t,e)})),Ce.call(t,t.media,"waiting canplay seeked playing",(function(e){return dt.checkLoading.call(t,e)})),t.supported.ui&&t.config.clickToPlay&&!t.isAudio){var n=we.call(t,".".concat(t.config.classNames.video));if(!K(n))return;Ce.call(t,i.container,"click",(function(r){([i.container,n].includes(r.target)||n.contains(r.target))&&(t.touch&&t.config.hideControls||(t.ended?(e.proxy(r,t.restart,"restart"),e.proxy(r,(function(){je(t.play())}),"play")):e.proxy(r,(function(){je(t.togglePlay())}),"play")))}))}t.supported.ui&&t.config.disableContextMenu&&Ce.call(t,i.wrapper,"contextmenu",(function(e){e.preventDefault()}),!1),Ce.call(t,t.media,"volumechange",(function(){t.storage.set({volume:t.volume,muted:t.muted})})),Ce.call(t,t.media,"ratechange",(function(){et.updateSetting.call(t,"speed"),t.storage.set({speed:t.speed})})),Ce.call(t,t.media,"qualitychange",(function(e){et.updateSetting.call(t,"quality",null,e.detail.quality)})),Ce.call(t,t.media,"ready qualitychange",(function(){et.setDownloadUrl.call(t)}));var r=t.config.events.concat(["keyup","keydown"]).join(" ");Ce.call(t,t.media,r,(function(e){var n=e.detail,r=void 0===n?{}:n;"error"===e.type&&(r=t.media.error),_e.call(t,i.container,e.type,!0,r)}))}},{key:"proxy",value:function(e,t,i){var n=this.player,r=n.config.listeners[i],a=!0;X(r)&&(a=r.call(n,e)),!1!==a&&X(t)&&t.call(n,e)}},{key:"bind",value:function(e,t,i,n){var r=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=this.player,o=s.config.listeners[n],l=X(o);Ce.call(s,e,t,(function(e){return r.proxy(e,i,n)}),a&&!l)}},{key:"controls",value:function(){var e=this,t=this.player,i=t.elements,n=re.isIE?"change":"input";if(i.buttons.play&&Array.from(i.buttons.play).forEach((function(i){e.bind(i,"click",(function(){je(t.togglePlay())}),"play")})),this.bind(i.buttons.restart,"click",t.restart,"restart"),this.bind(i.buttons.rewind,"click",t.rewind,"rewind"),this.bind(i.buttons.fastForward,"click",t.forward,"fastForward"),this.bind(i.buttons.mute,"click",(function(){t.muted=!t.muted}),"mute"),this.bind(i.buttons.captions,"click",(function(){return t.toggleCaptions()})),this.bind(i.buttons.download,"click",(function(){_e.call(t,t.media,"download")}),"download"),this.bind(i.buttons.fullscreen,"click",(function(){t.fullscreen.toggle()}),"fullscreen"),this.bind(i.buttons.pip,"click",(function(){t.pip="toggle"}),"pip"),this.bind(i.buttons.airplay,"click",t.airplay,"airplay"),this.bind(i.buttons.settings,"click",(function(e){e.stopPropagation(),e.preventDefault(),et.toggleMenu.call(t,e)}),null,!1),this.bind(i.buttons.settings,"keyup",(function(e){var i=e.which;[13,32].includes(i)&&(13!==i?(e.preventDefault(),e.stopPropagation(),et.toggleMenu.call(t,e)):et.focusFirstMenuItem.call(t,null,!0))}),null,!1),this.bind(i.settings.menu,"keydown",(function(e){27===e.which&&et.toggleMenu.call(t,e)})),this.bind(i.inputs.seek,"mousedown mousemove",(function(e){var t=i.progress.getBoundingClientRect(),n=100/t.width*(e.pageX-t.left);e.currentTarget.setAttribute("seek-value",n)})),this.bind(i.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",(function(e){var i=e.currentTarget,n=e.keyCode?e.keyCode:e.which;if(!Q(e)||39===n||37===n){t.lastSeekTime=Date.now();var r=i.hasAttribute("play-on-seeked"),a=["mouseup","touchend","keyup"].includes(e.type);r&&a?(i.removeAttribute("play-on-seeked"),je(t.play())):!a&&t.playing&&(i.setAttribute("play-on-seeked",""),t.pause())}})),re.isIos){var r=be.call(t,'input[type="range"]');Array.from(r).forEach((function(t){return e.bind(t,n,(function(e){return ne(e.target)}))}))}this.bind(i.inputs.seek,n,(function(e){var i=e.currentTarget,n=i.getAttribute("seek-value");te(n)&&(n=i.value),i.removeAttribute("seek-value"),t.currentTime=n/i.max*t.duration}),"seek"),this.bind(i.progress,"mouseenter mouseleave mousemove",(function(e){return et.updateSeekTooltip.call(t,e)})),this.bind(i.progress,"mousemove touchmove",(function(e){var i=t.previewThumbnails;i&&i.loaded&&i.startMove(e)})),this.bind(i.progress,"mouseleave touchend click",(function(){var e=t.previewThumbnails;e&&e.loaded&&e.endMove(!1,!0)})),this.bind(i.progress,"mousedown touchstart",(function(e){var i=t.previewThumbnails;i&&i.loaded&&i.startScrubbing(e)})),this.bind(i.progress,"mouseup touchend",(function(e){var i=t.previewThumbnails;i&&i.loaded&&i.endScrubbing(e)})),re.isWebkit&&Array.from(be.call(t,'input[type="range"]')).forEach((function(i){e.bind(i,"input",(function(e){return et.updateRangeFill.call(t,e.target)}))})),t.config.toggleInvert&&!K(i.display.duration)&&this.bind(i.display.currentTime,"click",(function(){0!==t.currentTime&&(t.config.invertTime=!t.config.invertTime,et.timeUpdate.call(t))})),this.bind(i.inputs.volume,n,(function(e){t.volume=e.target.value}),"volume"),this.bind(i.controls,"mouseenter mouseleave",(function(e){i.controls.hover=!t.touch&&"mouseenter"===e.type})),i.fullscreen&&Array.from(i.fullscreen.children).filter((function(e){return!e.contains(i.container)})).forEach((function(n){e.bind(n,"mouseenter mouseleave",(function(e){i.controls.hover=!t.touch&&"mouseenter"===e.type}))})),this.bind(i.controls,"mousedown mouseup touchstart touchend touchcancel",(function(e){i.controls.pressed=["mousedown","touchstart"].includes(e.type)})),this.bind(i.controls,"focusin",(function(){var n=t.config,r=t.timers;ge(i.controls,n.classNames.noTransition,!0),dt.toggleControls.call(t,!0),setTimeout((function(){ge(i.controls,n.classNames.noTransition,!1)}),0);var a=e.touch?3e3:4e3;clearTimeout(r.controls),r.controls=setTimeout((function(){return dt.toggleControls.call(t,!1)}),a)})),this.bind(i.inputs.volume,"wheel",(function(e){var i=e.webkitDirectionInvertedFromDevice,n=o([e.deltaX,-e.deltaY].map((function(e){return i?-e:e})),2),r=n[0],a=n[1],s=Math.sign(Math.abs(r)>Math.abs(a)?r:a);t.increaseVolume(s/50);var l=t.media.volume;(1===s&&l<1||-1===s&&l>0)&&e.preventDefault()}),"volume",!1)}}]),t}();"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t||"undefined"!=typeof self&&self;var ft=function(e,t){return function(e,t){e.exports=function(){var e=function(){},t={},i={},n={};function r(e,t){if(e){var r=n[e];if(i[e]=t,r)for(;r.length;)r[0](e,t),r.splice(0,1)}}function a(t,i){t.call&&(t={success:t}),i.length?(t.error||e)(i):(t.success||e)(t)}function s(t,i,n,r){var a,o,l=document,c=n.async,u=(n.numRetries||0)+1,h=n.before||e,d=t.replace(/[\?|#].*$/,""),m=t.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(d)?((o=l.createElement("link")).rel="stylesheet",o.href=m,(a="hideFocus"in o)&&o.relList&&(a=0,o.rel="preload",o.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(d)?(o=l.createElement("img")).src=m:((o=l.createElement("script")).src=t,o.async=void 0===c||c),o.onload=o.onerror=o.onbeforeload=function(e){var l=e.type[0];if(a)try{o.sheet.cssText.length||(l="e")}catch(e){18!=e.code&&(l="e")}if("e"==l){if((r+=1)<u)return s(t,i,n,r)}else if("preload"==o.rel&&"style"==o.as)return o.rel="stylesheet";i(t,l,e.defaultPrevented)},!1!==h(t,o)&&l.head.appendChild(o)}function o(e,i,n){var o,l;if(i&&i.trim&&(o=i),l=(o?n:i)||{},o){if(o in t)throw"LoadJS";t[o]=!0}function c(t,i){!function(e,t,i){var n,r,a=(e=e.push?e:[e]).length,o=a,l=[];for(n=function(e,i,n){if("e"==i&&l.push(e),"b"==i){if(!n)return;l.push(e)}--a||t(l)},r=0;r<o;r++)s(e[r],n,i)}(e,(function(e){a(l,e),t&&a({success:t,error:i},e),r(o,e)}),l)}if(l.returnPromise)return new Promise(c);c()}return o.ready=function(e,t){return function(e,t){e=e.push?e:[e];var r,a,s,o=[],l=e.length,c=l;for(r=function(e,i){i.length&&o.push(e),--c||t(o)};l--;)a=e[l],(s=i[a])?r(a,s):(n[a]=n[a]||[]).push(r)}(e,(function(e){a(t,e)})),o},o.done=function(e){r(e,[])},o.reset=function(){t={},i={},n={}},o.isDefined=function(e){return e in t},o}()}(t={exports:{}}),t.exports}();function pt(e){return new Promise((function(t,i){ft(e,{success:t,error:i})}))}function gt(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,_e.call(this,this.media,e?"play":"pause"))}var vt={setup:function(){var e=this;ge(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,Fe.call(e),V(window.Vimeo)?vt.ready.call(e):pt(e.config.urls.vimeo.sdk).then((function(){vt.ready.call(e)})).catch((function(t){e.debug.warn("Vimeo SDK (player.js) failed to load",t)}))},ready:function(){var e=this,t=this,i=t.config.vimeo,n=i.premium,r=i.referrerPolicy,a=function(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}(i,["premium","referrerPolicy"]);n&&Object.assign(a,{controls:!1,sidedock:!1});var l=it(s({loop:t.config.loop.active,autoplay:t.autoplay,muted:t.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative},a)),c=t.media.getAttribute("src");te(c)&&(c=t.media.getAttribute(t.config.attributes.embed.id));var u,h=te(u=c)?null:q(Number(u))?u:u.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:u,d=ce("iframe"),m=ze(t.config.urls.vimeo.iframe,h,l);d.setAttribute("src",m),d.setAttribute("allowfullscreen",""),d.setAttribute("allow","autoplay,fullscreen,picture-in-picture"),te(r)||d.setAttribute("referrerPolicy",r);var f=t.poster;if(n)d.setAttribute("data-poster",f),t.media=me(d,t.media);else{var p=ce("div",{class:t.config.classNames.embedContainer,"data-poster":f});p.appendChild(d),t.media=me(p,t.media)}Ge(ze(t.config.urls.vimeo.api,h),"json").then((function(e){if(!te(e)){var i=new URL(e[0].thumbnail_large);i.pathname="".concat(i.pathname.split("_")[0],".jpg"),dt.setPoster.call(t,i.href).catch((function(){}))}})),t.embed=new window.Vimeo.Player(d,{autopause:t.config.autopause,muted:t.muted}),t.media.paused=!0,t.media.currentTime=0,t.supported.ui&&t.embed.disableTextTrack(),t.media.play=function(){return gt.call(t,!0),t.embed.play()},t.media.pause=function(){return gt.call(t,!1),t.embed.pause()},t.media.stop=function(){t.pause(),t.currentTime=0};var g=t.media.currentTime;Object.defineProperty(t.media,"currentTime",{get:function(){return g},set:function(e){var i=t.embed,n=t.media,r=t.paused,a=t.volume,s=r&&!i.hasPlayed;n.seeking=!0,_e.call(t,n,"seeking"),Promise.resolve(s&&i.setVolume(0)).then((function(){return i.setCurrentTime(e)})).then((function(){return s&&i.pause()})).then((function(){return s&&i.setVolume(a)})).catch((function(){}))}});var v=t.config.speed.selected;Object.defineProperty(t.media,"playbackRate",{get:function(){return v},set:function(e){t.embed.setPlaybackRate(e).then((function(){v=e,_e.call(t,t.media,"ratechange")})).catch((function(){t.options.speed=[1]}))}});var y=t.config.volume;Object.defineProperty(t.media,"volume",{get:function(){return y},set:function(e){t.embed.setVolume(e).then((function(){y=e,_e.call(t,t.media,"volumechange")}))}});var b=t.config.muted;Object.defineProperty(t.media,"muted",{get:function(){return b},set:function(e){var i=!!W(e)&&e;t.embed.setVolume(i?0:t.config.volume).then((function(){b=i,_e.call(t,t.media,"volumechange")}))}});var w,x=t.config.loop;Object.defineProperty(t.media,"loop",{get:function(){return x},set:function(e){var i=W(e)?e:t.config.loop.active;t.embed.setLoop(i).then((function(){x=i}))}}),t.embed.getVideoUrl().then((function(e){w=e,et.setDownloadUrl.call(t)})).catch((function(t){e.debug.warn(t)})),Object.defineProperty(t.media,"currentSrc",{get:function(){return w}}),Object.defineProperty(t.media,"ended",{get:function(){return t.currentTime===t.duration}}),Promise.all([t.embed.getVideoWidth(),t.embed.getVideoHeight()]).then((function(i){var n=o(i,2),r=n[0],a=n[1];t.embed.ratio=[r,a],Fe.call(e)})),t.embed.setAutopause(t.config.autopause).then((function(e){t.config.autopause=e})),t.embed.getVideoTitle().then((function(i){t.config.title=i,dt.setTitle.call(e)})),t.embed.getCurrentTime().then((function(e){g=e,_e.call(t,t.media,"timeupdate")})),t.embed.getDuration().then((function(e){t.media.duration=e,_e.call(t,t.media,"durationchange")})),t.embed.getTextTracks().then((function(e){t.media.textTracks=e,nt.setup.call(t)})),t.embed.on("cuechange",(function(e){var i=e.cues,n=(void 0===i?[]:i).map((function(e){return function(e){var t=document.createDocumentFragment(),i=document.createElement("div");return t.appendChild(i),i.innerHTML=e,t.firstChild.innerText}(e.text)}));nt.updateCues.call(t,n)})),t.embed.on("loaded",(function(){t.embed.getPaused().then((function(e){gt.call(t,!e),e||_e.call(t,t.media,"playing")})),K(t.embed.element)&&t.supported.ui&&t.embed.element.setAttribute("tabindex",-1)})),t.embed.on("bufferstart",(function(){_e.call(t,t.media,"waiting")})),t.embed.on("bufferend",(function(){_e.call(t,t.media,"playing")})),t.embed.on("play",(function(){gt.call(t,!0),_e.call(t,t.media,"playing")})),t.embed.on("pause",(function(){gt.call(t,!1)})),t.embed.on("timeupdate",(function(e){t.media.seeking=!1,g=e.seconds,_e.call(t,t.media,"timeupdate")})),t.embed.on("progress",(function(e){t.media.buffered=e.percent,_e.call(t,t.media,"progress"),1===parseInt(e.percent,10)&&_e.call(t,t.media,"canplaythrough"),t.embed.getDuration().then((function(e){e!==t.media.duration&&(t.media.duration=e,_e.call(t,t.media,"durationchange"))}))})),t.embed.on("seeked",(function(){t.media.seeking=!1,_e.call(t,t.media,"seeked")})),t.embed.on("ended",(function(){t.media.paused=!0,_e.call(t,t.media,"ended")})),t.embed.on("error",(function(e){t.media.error=e,_e.call(t,t.media,"error")})),setTimeout((function(){return dt.build.call(t)}),0)}};function yt(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,_e.call(this,this.media,e?"play":"pause"))}function bt(e){return e.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0}var wt,xt={setup:function(){var e=this;if(ge(this.elements.wrapper,this.config.classNames.embed,!0),V(window.YT)&&X(window.YT.Player))xt.ready.call(this);else{var t=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){X(t)&&t(),xt.ready.call(e)},pt(this.config.urls.youtube.sdk).catch((function(t){e.debug.warn("YouTube API failed to load",t)}))}},getTitle:function(e){var t=this;Ge(ze(this.config.urls.youtube.api,e)).then((function(e){if(V(e)){var i=e.title,n=e.height,r=e.width;t.config.title=i,dt.setTitle.call(t),t.embed.ratio=[r,n]}Fe.call(t)})).catch((function(){Fe.call(t)}))},ready:function(){var e=this,t=e.media&&e.media.getAttribute("id");if(te(t)||!t.startsWith("youtube-")){var i=e.media.getAttribute("src");te(i)&&(i=e.media.getAttribute(this.config.attributes.embed.id));var n,r,a=te(n=i)?null:n.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:n,s=(r=e.provider,"".concat(r,"-").concat(Math.floor(1e4*Math.random()))),o=ce("div",{id:s,"data-poster":e.poster});e.media=me(o,e.media);var l=function(e){return"https://i.ytimg.com/vi/".concat(a,"/").concat(e,"default.jpg")};ht(l("maxres"),121).catch((function(){return ht(l("sd"),121)})).catch((function(){return ht(l("hq"))})).then((function(t){return dt.setPoster.call(e,t.src)})).then((function(t){t.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")})).catch((function(){}));var c=e.config.youtube;e.embed=new window.YT.Player(s,{videoId:a,host:bt(c),playerVars:se({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui?0:1,disablekb:1,playsinline:e.config.fullscreen.iosNative?0:1,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},c),events:{onError:function(t){if(!e.media.error){var i=t.data,n={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[i]||"An unknown error occured";e.media.error={code:i,message:n},_e.call(e,e.media,"error")}},onPlaybackRateChange:function(t){var i=t.target;e.media.playbackRate=i.getPlaybackRate(),_e.call(e,e.media,"ratechange")},onReady:function(t){if(!X(e.media.play)){var i=t.target;xt.getTitle.call(e,a),e.media.play=function(){yt.call(e,!0),i.playVideo()},e.media.pause=function(){yt.call(e,!1),i.pauseVideo()},e.media.stop=function(){i.stopVideo()},e.media.duration=i.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:function(){return Number(i.getCurrentTime())},set:function(t){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,_e.call(e,e.media,"seeking"),i.seekTo(t)}}),Object.defineProperty(e.media,"playbackRate",{get:function(){return i.getPlaybackRate()},set:function(e){i.setPlaybackRate(e)}});var n=e.config.volume;Object.defineProperty(e.media,"volume",{get:function(){return n},set:function(t){n=t,i.setVolume(100*n),_e.call(e,e.media,"volumechange")}});var r=e.config.muted;Object.defineProperty(e.media,"muted",{get:function(){return r},set:function(t){var n=W(t)?t:r;r=n,i[n?"mute":"unMute"](),_e.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:function(){return i.getVideoUrl()}}),Object.defineProperty(e.media,"ended",{get:function(){return e.currentTime===e.duration}});var s=i.getAvailablePlaybackRates();e.options.speed=s.filter((function(t){return e.config.speed.options.includes(t)})),e.supported.ui&&e.media.setAttribute("tabindex",-1),_e.call(e,e.media,"timeupdate"),_e.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval((function(){e.media.buffered=i.getVideoLoadedFraction(),(null===e.media.lastBuffered||e.media.lastBuffered<e.media.buffered)&&_e.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,1===e.media.buffered&&(clearInterval(e.timers.buffering),_e.call(e,e.media,"canplaythrough"))}),200),setTimeout((function(){return dt.build.call(e)}),50)}},onStateChange:function(t){var i=t.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(t.data)&&(e.media.seeking=!1,_e.call(e,e.media,"seeked")),t.data){case-1:_e.call(e,e.media,"timeupdate"),e.media.buffered=i.getVideoLoadedFraction(),_e.call(e,e.media,"progress");break;case 0:yt.call(e,!1),e.media.loop?(i.stopVideo(),i.playVideo()):_e.call(e,e.media,"ended");break;case 1:e.config.autoplay||!e.media.paused||e.embed.hasPlayed?(yt.call(e,!0),_e.call(e,e.media,"playing"),e.timers.playing=setInterval((function(){_e.call(e,e.media,"timeupdate")}),50),e.media.duration!==i.getDuration()&&(e.media.duration=i.getDuration(),_e.call(e,e.media,"durationchange"))):e.media.pause();break;case 2:e.muted||e.embed.unMute(),yt.call(e,!1);break;case 3:_e.call(e,e.media,"waiting")}_e.call(e,e.elements.container,"statechange",!1,{code:t.data})}}})}}},Tt={setup:function(){this.media?(ge(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),ge(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&ge(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=ce("div",{class:this.config.classNames.video}),oe(this.media,this.elements.wrapper),this.elements.poster=ce("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?De.setup.call(this):this.isYouTube?xt.setup.call(this):this.isVimeo&&vt.setup.call(this)):this.debug.warn("No media element found!")}},kt=function(){function t(i){var n=this;e(this,t),this.player=i,this.config=i.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((function(e,t){n.on("loaded",e),n.on("error",t)})),this.load()}return n(t,[{key:"load",value:function(){var e=this;this.enabled&&(V(window.google)&&V(window.google.ima)?this.ready():pt(this.player.config.urls.googleIMA.sdk).then((function(){e.ready()})).catch((function(){e.trigger("error",new Error("Google IMA SDK failed to load"))})))}},{key:"ready",value:function(){var e,t=this;this.enabled||((e=this).manager&&e.manager.destroy(),e.elements.displayContainer&&e.elements.displayContainer.destroy(),e.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then((function(){t.clearSafetyTimer("onAdsManagerLoaded()")})),this.listeners(),this.setupIMA()}},{key:"setupIMA",value:function(){var e=this;this.elements.container=ce("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(t){return e.onAdsManagerLoaded(t)}),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){return e.onAdError(t)}),!1),this.requestAds()}},{key:"requestAds",value:function(){var e=this.player.elements.container;try{var t=new google.ima.AdsRequest;t.adTagUrl=this.tagUrl,t.linearAdSlotWidth=e.offsetWidth,t.linearAdSlotHeight=e.offsetHeight,t.nonLinearAdSlotWidth=e.offsetWidth,t.nonLinearAdSlotHeight=e.offsetHeight,t.forceNonLinearFullSlot=!1,t.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(t)}catch(e){this.onAdError(e)}}},{key:"pollCountdown",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");var i=function(){var t=Ze(Math.max(e.manager.getRemainingTime(),0)),i="".concat(Xe("advertisement",e.player.config)," - ").concat(t);e.elements.container.setAttribute("data-badge-text",i)};this.countdownTimer=setInterval(i,100)}},{key:"onAdsManagerLoaded",value:function(e){var t=this;if(this.enabled){var i=new google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i.enablePreloading=!0,this.manager=e.getAdsManager(this.player,i),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return t.onAdError(e)})),Object.keys(google.ima.AdEvent.Type).forEach((function(e){t.manager.addEventListener(google.ima.AdEvent.Type[e],(function(e){return t.onAdEvent(e)}))})),this.trigger("loaded")}}},{key:"addCuePoints",value:function(){var e=this;te(this.cuePoints)||this.cuePoints.forEach((function(t){if(0!==t&&-1!==t&&t<e.player.duration){var i=e.player.elements.progress;if(K(i)){var n=100/e.player.duration*t,r=ce("span",{class:e.player.config.classNames.cues});r.style.left="".concat(n.toString(),"%"),i.appendChild(r)}}}))}},{key:"onAdEvent",value:function(e){var t=this,i=this.player.elements.container,n=e.getAd(),r=e.getAdData();switch(function(e){_e.call(t.player,t.player.media,"ads".concat(e.replace(/_/g,"").toLowerCase()))}(e.type),e.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),n.isLinear()||(n.width=i.offsetWidth,n.height=i.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:r.adError&&this.player.debug.warn("Non-fatal ad error: ".concat(r.adError.getMessage()))}}},{key:"onAdError",value:function(e){this.cancel(),this.player.debug.warn("Ads error",e)}},{key:"listeners",value:function(){var e,t=this,i=this.player.elements.container;this.player.on("canplay",(function(){t.addCuePoints()})),this.player.on("ended",(function(){t.loader.contentComplete()})),this.player.on("timeupdate",(function(){e=t.player.currentTime})),this.player.on("seeked",(function(){var i=t.player.currentTime;te(t.cuePoints)||t.cuePoints.forEach((function(n,r){e<n&&n<i&&(t.manager.discardAdBreak(),t.cuePoints.splice(r,1))}))})),window.addEventListener("resize",(function(){t.manager&&t.manager.resize(i.offsetWidth,i.offsetHeight,google.ima.ViewMode.NORMAL)}))}},{key:"play",value:function(){var e=this,t=this.player.elements.container;this.managerPromise||this.resumeContent(),this.managerPromise.then((function(){e.manager.setVolume(e.player.volume),e.elements.displayContainer.initialize();try{e.initialized||(e.manager.init(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL),e.manager.start()),e.initialized=!0}catch(t){e.onAdError(t)}})).catch((function(){}))}},{key:"resumeContent",value:function(){this.elements.container.style.zIndex="",this.playing=!1,je(this.player.media.play())}},{key:"pauseContent",value:function(){this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}},{key:"cancel",value:function(){this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}},{key:"loadAds",value:function(){var e=this;this.managerPromise.then((function(){e.manager&&e.manager.destroy(),e.managerPromise=new Promise((function(t){e.on("loaded",t),e.player.debug.log(e.manager)})),e.initialized=!1,e.requestAds()})).catch((function(){}))}},{key:"trigger",value:function(e){for(var t=this,i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];var a=this.events[e];Y(a)&&a.forEach((function(e){X(e)&&e.apply(t,n)}))}},{key:"on",value:function(e,t){return Y(this.events[e])||(this.events[e]=[]),this.events[e].push(t),this}},{key:"startSafetyTimer",value:function(e,t){var i=this;this.player.debug.log("Safety timer invoked from: ".concat(t)),this.safetyTimer=setTimeout((function(){i.cancel(),i.clearSafetyTimer("startSafetyTimer()")}),e)}},{key:"clearSafetyTimer",value:function(e){U(this.safetyTimer)||(this.player.debug.log("Safety timer cleared from: ".concat(e)),clearTimeout(this.safetyTimer),this.safetyTimer=null)}},{key:"enabled",get:function(){var e=this.config;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!te(e.publisherId)||ee(e.tagUrl))}},{key:"tagUrl",get:function(){var e=this.config;if(ee(e.tagUrl))return e.tagUrl;var t={AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId};return"".concat("https://go.aniview.com/api/adserver6/vast/","?").concat(it(t))}}]),t}(),Et=function(e,t){var i={};return e>t.width/t.height?(i.width=t.width,i.height=1/e*t.width):(i.height=t.height,i.width=e*t.height),i},At=function(){function t(i){e(this,t),this.player=i,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}return n(t,[{key:"load",value:function(){var e=this;this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then((function(){e.enabled&&(e.render(),e.determineContainerAutoSizing(),e.loaded=!0)}))}},{key:"getThumbnails",value:function(){var e=this;return new Promise((function(t){var i=e.player.config.previewThumbnails.src;if(te(i))throw new Error("Missing previewThumbnails.src config attribute");var n=function(){e.thumbnails.sort((function(e,t){return e.height-t.height})),e.player.debug.log("Preview thumbnails",e.thumbnails),t()};if(X(i))i((function(t){e.thumbnails=t,n()}));else{var r=(H(i)?[i]:i).map((function(t){return e.getThumbnail(t)}));Promise.all(r).then(n)}}))}},{key:"getThumbnail",value:function(e){var t=this;return new Promise((function(i){Ge(e).then((function(n){var r,a,s={frames:(r=n,a=[],r.split(/\r\n\r\n|\n\n|\r\r/).forEach((function(e){var t={};e.split(/\r\n|\n|\r/).forEach((function(e){if(q(t.startTime)){if(!te(e.trim())&&te(t.text)){var i=e.trim().split("#xywh="),n=o(i,1);if(t.text=n[0],i[1]){var r=o(i[1].split(","),4);t.x=r[0],t.y=r[1],t.w=r[2],t.h=r[3]}}}else{var a=e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);a&&(t.startTime=60*Number(a[1]||0)*60+60*Number(a[2])+Number(a[3])+Number("0.".concat(a[4])),t.endTime=60*Number(a[6]||0)*60+60*Number(a[7])+Number(a[8])+Number("0.".concat(a[9])))}})),t.text&&a.push(t)})),a),height:null,urlPrefix:""};s.frames[0].text.startsWith("/")||s.frames[0].text.startsWith("http://")||s.frames[0].text.startsWith("https://")||(s.urlPrefix=e.substring(0,e.lastIndexOf("/")+1));var l=new Image;l.onload=function(){s.height=l.naturalHeight,s.width=l.naturalWidth,t.thumbnails.push(s),i()},l.src=s.urlPrefix+s.frames[0].text}))}))}},{key:"startMove",value:function(e){if(this.loaded&&$(e)&&["touchmove","mousemove"].includes(e.type)&&this.player.media.duration){if("touchmove"===e.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var t=this.player.elements.progress.getBoundingClientRect(),i=100/t.width*(e.pageX-t.left);this.seekTime=this.player.media.duration*(i/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=e.pageX,this.elements.thumb.time.innerText=Ze(this.seekTime)}this.showImageAtCurrentTime()}}},{key:"endMove",value:function(){this.toggleThumbContainer(!1,!0)}},{key:"startScrubbing",value:function(e){(U(e.button)||!1===e.button||0===e.button)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}},{key:"endScrubbing",value:function(){var e=this;this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):Se.call(this.player,this.player.media,"timeupdate",(function(){e.mouseDown||e.toggleScrubbingContainer(!1)}))}},{key:"listeners",value:function(){var e=this;this.player.on("play",(function(){e.toggleThumbContainer(!1,!0)})),this.player.on("seeked",(function(){e.toggleThumbContainer(!1)})),this.player.on("timeupdate",(function(){e.lastTime=e.player.media.currentTime}))}},{key:"render",value:function(){this.elements.thumb.container=ce("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=ce("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);var e=ce("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=ce("span",{},"00:00"),e.appendChild(this.elements.thumb.time),this.elements.thumb.container.appendChild(e),K(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=ce("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}},{key:"destroy",value:function(){this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}},{key:"showImageAtCurrentTime",value:function(){var e=this;this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();var t=this.thumbnails[0].frames.findIndex((function(t){return e.seekTime>=t.startTime&&e.seekTime<=t.endTime})),i=t>=0,n=0;this.mouseDown||this.toggleThumbContainer(i),i&&(this.thumbnails.forEach((function(i,r){e.loadedImages.includes(i.frames[t].text)&&(n=r)})),t!==this.showingThumb&&(this.showingThumb=t,this.loadImage(n)))}},{key:"loadImage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=this.showingThumb,n=this.thumbnails[t],r=n.urlPrefix,a=n.frames[i],s=n.frames[i].text,o=r+s;if(this.currentImageElement&&this.currentImageElement.dataset.filename===s)this.showImage(this.currentImageElement,a,t,i,s,!1),this.currentImageElement.dataset.index=i,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);var l=new Image;l.src=o,l.dataset.index=i,l.dataset.filename=s,this.showingThumbFilename=s,this.player.debug.log("Loading image: ".concat(o)),l.onload=function(){return e.showImage(l,a,t,i,s,!0)},this.loadingImage=l,this.removeOldImages(l)}}},{key:"showImage",value:function(e,t,i,n,r){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];this.player.debug.log("Showing thumb: ".concat(r,". num: ").concat(n,". qual: ").concat(i,". newimg: ").concat(a)),this.setImageSizeAndOffset(e,t),a&&(this.currentImageContainer.appendChild(e),this.currentImageElement=e,this.loadedImages.includes(r)||this.loadedImages.push(r)),this.preloadNearby(n,!0).then(this.preloadNearby(n,!1)).then(this.getHigherQuality(i,e,t,r))}},{key:"removeOldImages",value:function(e){var t=this;Array.from(this.currentImageContainer.children).forEach((function(i){if("img"===i.tagName.toLowerCase()){var n=t.usingSprites?500:1e3;if(i.dataset.index!==e.dataset.index&&!i.dataset.deleting){i.dataset.deleting=!0;var r=t.currentImageContainer;setTimeout((function(){r.removeChild(i),t.player.debug.log("Removing thumb: ".concat(i.dataset.filename))}),n)}}}))}},{key:"preloadNearby",value:function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(n){setTimeout((function(){var r=t.thumbnails[0].frames[e].text;if(t.showingThumbFilename===r){var a;a=i?t.thumbnails[0].frames.slice(e):t.thumbnails[0].frames.slice(0,e).reverse();var s=!1;a.forEach((function(e){var i=e.text;if(i!==r&&!t.loadedImages.includes(i)){s=!0,t.player.debug.log("Preloading thumb filename: ".concat(i));var a=t.thumbnails[0].urlPrefix+i,o=new Image;o.src=a,o.onload=function(){t.player.debug.log("Preloaded thumb filename: ".concat(i)),t.loadedImages.includes(i)||t.loadedImages.push(i),n()}}})),s||n()}}),300)}))}},{key:"getHigherQuality",value:function(e,t,i,n){var r=this;if(e<this.thumbnails.length-1){var a=t.naturalHeight;this.usingSprites&&(a=i.h),a<this.thumbContainerHeight&&setTimeout((function(){r.showingThumbFilename===n&&(r.player.debug.log("Showing higher quality thumb for: ".concat(n)),r.loadImage(e+1))}),300)}}},{key:"toggleThumbContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(i,e),!e&&t&&(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"toggleScrubbingContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(t,e),e||(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"determineContainerAutoSizing",value:function(){(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}},{key:"setThumbContainerSizeAndPos",value:function(){if(this.sizeSpecifiedInCSS){if(this.elements.thumb.imageContainer.clientHeight>20&&this.elements.thumb.imageContainer.clientWidth<20){var e=Math.floor(this.elements.thumb.imageContainer.clientHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.width="".concat(e,"px")}else if(this.elements.thumb.imageContainer.clientHeight<20&&this.elements.thumb.imageContainer.clientWidth>20){var t=Math.floor(this.elements.thumb.imageContainer.clientWidth/this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(t,"px")}}else{var i=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(this.thumbContainerHeight,"px"),this.elements.thumb.imageContainer.style.width="".concat(i,"px")}this.setThumbContainerPos()}},{key:"setThumbContainerPos",value:function(){var e=this.player.elements.progress.getBoundingClientRect(),t=this.player.elements.container.getBoundingClientRect(),i=this.elements.thumb.container,n=t.left-e.left+10,r=t.right-e.left-i.clientWidth-10,a=this.mousePosX-e.left-i.clientWidth/2;a<n&&(a=n),a>r&&(a=r),i.style.left="".concat(a,"px")}},{key:"setScrubbingContainerSize",value:function(){var e=Et(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}),t=e.width,i=e.height;this.elements.scrubbing.container.style.width="".concat(t,"px"),this.elements.scrubbing.container.style.height="".concat(i,"px")}},{key:"setImageSizeAndOffset",value:function(e,t){if(this.usingSprites){var i=this.thumbContainerHeight/t.h;e.style.height="".concat(e.naturalHeight*i,"px"),e.style.width="".concat(e.naturalWidth*i,"px"),e.style.left="-".concat(t.x*i,"px"),e.style.top="-".concat(t.y*i,"px")}}},{key:"enabled",get:function(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}},{key:"currentImageContainer",get:function(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}},{key:"usingSprites",get:function(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}},{key:"thumbAspectRatio",get:function(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}},{key:"thumbContainerHeight",get:function(){return this.mouseDown?Et(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}).height:this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}},{key:"currentImageElement",get:function(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement},set:function(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}]),t}(),Mt={insertElements:function(e,t){var i=this;H(t)?ue(e,this.media,{src:t}):Y(t)&&t.forEach((function(t){ue(e,i.media,t)}))},change:function(e){var t=this;ae(e,"sources.length")?(De.cancelRequests.call(this),this.destroy.call(this,(function(){t.options.quality=[],he(t.media),t.media=null,K(t.elements.container)&&t.elements.container.removeAttribute("class");var i=e.sources,n=e.type,r=o(i,1)[0],a=r.provider,s=void 0===a?st.html5:a,l=r.src,c="html5"===s?n:"div",u="html5"===s?{}:{src:l};Object.assign(t,{provider:s,type:n,supported:Ee.check(n,s,t.config.playsinline),media:ce(c,u)}),t.elements.container.appendChild(t.media),W(e.autoplay)&&(t.config.autoplay=e.autoplay),t.isHTML5&&(t.config.crossorigin&&t.media.setAttribute("crossorigin",""),t.config.autoplay&&t.media.setAttribute("autoplay",""),te(e.poster)||(t.poster=e.poster),t.config.loop.active&&t.media.setAttribute("loop",""),t.config.muted&&t.media.setAttribute("muted",""),t.config.playsinline&&t.media.setAttribute("playsinline","")),dt.addStyleHook.call(t),t.isHTML5&&Mt.insertElements.call(t,"source",i),t.config.title=e.title,Tt.setup.call(t),t.isHTML5&&Object.keys(e).includes("tracks")&&Mt.insertElements.call(t,"track",e.tracks),(t.isHTML5||t.isEmbed&&!t.supported.ui)&&dt.build.call(t),t.isHTML5&&t.media.load(),te(e.previewThumbnails)||(Object.assign(t.config.previewThumbnails,e.previewThumbnails),t.previewThumbnails&&t.previewThumbnails.loaded&&(t.previewThumbnails.destroy(),t.previewThumbnails=null),t.config.previewThumbnails.enabled&&(t.previewThumbnails=new At(t))),t.fullscreen.update()}),!0)):this.debug.warn("Invalid source format")}},Ct=function(){function t(i,n){var r=this;if(e(this,t),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=Ee.touch,this.media=i,H(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||G(this.media)||Y(this.media))&&(this.media=this.media[0]),this.config=se({},rt,t.defaults,n||{},function(){try{return JSON.parse(r.media.getAttribute("data-plyr-config"))}catch(e){return{}}}()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new ct(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",Ee),!U(this.media)&&K(this.media))if(this.media.plyr)this.debug.warn("Target already setup");else if(this.config.enabled)if(Ee.check().api){var a=this.media.cloneNode(!0);a.autoplay=!1,this.elements.original=a;var s=this.media.tagName.toLowerCase(),o=null,l=null;switch(s){case"div":if(o=this.media.querySelector("iframe"),K(o)){if(l=tt(o.getAttribute("src")),this.provider=function(e){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?st.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?st.vimeo:null}(l.toString()),this.elements.container=this.media,this.media=o,this.elements.container.className="",l.search.length){var c=["1","true"];c.includes(l.searchParams.get("autoplay"))&&(this.config.autoplay=!0),c.includes(l.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=c.includes(l.searchParams.get("playsinline")),this.config.youtube.hl=l.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(te(this.provider)||!Object.keys(st).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=ot;break;case"video":case"audio":this.type=s,this.provider=st.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=Ee.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new mt(this),this.storage=new Ye(this),this.media.plyr=this,K(this.elements.container)||(this.elements.container=ce("div",{tabindex:0}),oe(this.media,this.elements.container)),dt.migrateStyles.call(this),dt.addStyleHook.call(this),Tt.setup.call(this),this.config.debug&&Ce.call(this,this.elements.container,this.config.events.join(" "),(function(e){r.debug.log("event: ".concat(e.type))})),this.fullscreen=new ut(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&dt.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new kt(this)),this.isHTML5&&this.config.autoplay&&setTimeout((function(){return je(r.play())}),10),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new At(this))):this.debug.error("Setup failed: no support")}else this.debug.error("Setup failed: no support");else this.debug.error("Setup failed: disabled by config");else this.debug.error("Setup failed: no suitable element passed")}return n(t,[{key:"play",value:function(){var e=this;return X(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then((function(){return e.ads.play()})).catch((function(){return je(e.media.play())})),this.media.play()):null}},{key:"pause",value:function(){return this.playing&&X(this.media.pause)?this.media.pause():null}},{key:"togglePlay",value:function(e){return(W(e)?e:!this.playing)?this.play():this.pause()}},{key:"stop",value:function(){this.isHTML5?(this.pause(),this.restart()):X(this.media.stop)&&this.media.stop()}},{key:"restart",value:function(){this.currentTime=0}},{key:"rewind",value:function(e){this.currentTime-=q(e)?e:this.config.seekTime}},{key:"forward",value:function(e){this.currentTime+=q(e)?e:this.config.seekTime}},{key:"increaseVolume",value:function(e){var t=this.media.muted?0:this.volume;this.volume=t+(q(e)?e:0)}},{key:"decreaseVolume",value:function(e){this.increaseVolume(-e)}},{key:"toggleCaptions",value:function(e){nt.toggle.call(this,e,!1)}},{key:"airplay",value:function(){Ee.airplay&&this.media.webkitShowPlaybackTargetPicker()}},{key:"toggleControls",value:function(e){if(this.supported.ui&&!this.isAudio){var t=ve(this.elements.container,this.config.classNames.hideControls),i=void 0===e?void 0:!e,n=ge(this.elements.container,this.config.classNames.hideControls,i);if(n&&Y(this.config.controls)&&this.config.controls.includes("settings")&&!te(this.config.settings)&&et.toggleMenu.call(this,!1),n!==t){var r=n?"controlshidden":"controlsshown";_e.call(this,this.media,r)}return!n}return!1}},{key:"on",value:function(e,t){Ce.call(this,this.elements.container,e,t)}},{key:"once",value:function(e,t){Se.call(this,this.elements.container,e,t)}},{key:"off",value:function(e,t){Oe(this.elements.container,e,t)}},{key:"destroy",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ready){var n=function(){document.body.style.overflow="",t.embed=null,i?(Object.keys(t.elements).length&&(he(t.elements.buttons.play),he(t.elements.captions),he(t.elements.controls),he(t.elements.wrapper),t.elements.buttons.play=null,t.elements.captions=null,t.elements.controls=null,t.elements.wrapper=null),X(e)&&e()):(Pe.call(t),me(t.elements.original,t.elements.container),_e.call(t,t.elements.original,"destroyed",!0),X(e)&&e.call(t.elements.original),t.ready=!1,setTimeout((function(){t.elements=null,t.media=null}),200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(dt.toggleNativeControls.call(this,!0),n()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&X(this.embed.destroy)&&this.embed.destroy(),n()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(n),setTimeout(n,200))}}},{key:"supports",value:function(e){return Ee.mime.call(this,e)}},{key:"isHTML5",get:function(){return this.provider===st.html5}},{key:"isEmbed",get:function(){return this.isYouTube||this.isVimeo}},{key:"isYouTube",get:function(){return this.provider===st.youtube}},{key:"isVimeo",get:function(){return this.provider===st.vimeo}},{key:"isVideo",get:function(){return this.type===ot}},{key:"isAudio",get:function(){return"audio"===this.type}},{key:"playing",get:function(){return Boolean(this.ready&&!this.paused&&!this.ended)}},{key:"paused",get:function(){return Boolean(this.media.paused)}},{key:"stopped",get:function(){return Boolean(this.paused&&0===this.currentTime)}},{key:"ended",get:function(){return Boolean(this.media.ended)}},{key:"currentTime",set:function(e){if(this.duration){var t=q(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log("Seeking to ".concat(this.currentTime," seconds"))}},get:function(){return Number(this.media.currentTime)}},{key:"buffered",get:function(){var e=this.media.buffered;return q(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}},{key:"seeking",get:function(){return Boolean(this.media.seeking)}},{key:"duration",get:function(){var e=parseFloat(this.config.duration),t=(this.media||{}).duration,i=q(t)&&t!==1/0?t:0;return e||i}},{key:"volume",set:function(e){var t=e;H(t)&&(t=Number(t)),q(t)||(t=this.storage.get("volume")),q(t)||(t=this.config.volume),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!te(e)&&this.muted&&t>0&&(this.muted=!1)},get:function(){return Number(this.media.volume)}},{key:"muted",set:function(e){var t=e;W(t)||(t=this.storage.get("muted")),W(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t},get:function(){return Boolean(this.media.muted)}},{key:"hasAudio",get:function(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}},{key:"speed",set:function(e){var t=this,i=null;q(e)&&(i=e),q(i)||(i=this.storage.get("speed")),q(i)||(i=this.config.speed.selected);var n=this.minimumSpeed,r=this.maximumSpeed;i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255;return Math.min(Math.max(e,t),i)}(i,n,r),this.config.speed.selected=i,setTimeout((function(){t.media.playbackRate=i}),0)},get:function(){return Number(this.media.playbackRate)}},{key:"minimumSpeed",get:function(){return this.isYouTube?Math.min.apply(Math,l(this.options.speed)):this.isVimeo?.5:.0625}},{key:"maximumSpeed",get:function(){return this.isYouTube?Math.max.apply(Math,l(this.options.speed)):this.isVimeo?2:16}},{key:"quality",set:function(e){var t=this.config.quality,i=this.options.quality;if(i.length){var n=[!te(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(q),r=!0;if(!i.includes(n)){var a=function(e,t){return Y(e)&&e.length?e.reduce((function(e,i){return Math.abs(i-t)<Math.abs(e-t)?i:e})):null}(i,n);this.debug.warn("Unsupported quality option: ".concat(n,", using ").concat(a," instead")),n=a,r=!1}t.selected=n,this.media.quality=n,r&&this.storage.set({quality:n})}},get:function(){return this.media.quality}},{key:"loop",set:function(e){var t=W(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t},get:function(){return Boolean(this.media.loop)}},{key:"source",set:function(e){Mt.change.call(this,e)},get:function(){return this.media.currentSrc}},{key:"download",get:function(){var e=this.config.urls.download;return ee(e)?e:this.source},set:function(e){ee(e)&&(this.config.urls.download=e,et.setDownloadUrl.call(this))}},{key:"poster",set:function(e){this.isVideo?dt.setPoster.call(this,e,!1).catch((function(){})):this.debug.warn("Poster can only be set for video")},get:function(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}},{key:"ratio",get:function(){if(!this.isVideo)return null;var e=Ie(Le.call(this));return Y(e)?e.join(":"):e},set:function(e){this.isVideo?H(e)&&Re(e)?(this.config.ratio=e,Fe.call(this)):this.debug.error("Invalid aspect ratio specified (".concat(e,")")):this.debug.warn("Aspect ratio can only be set for video")}},{key:"autoplay",set:function(e){var t=W(e)?e:this.config.autoplay;this.config.autoplay=t},get:function(){return Boolean(this.config.autoplay)}},{key:"currentTrack",set:function(e){nt.set.call(this,e,!1)},get:function(){var e=this.captions,t=e.toggled,i=e.currentTrack;return t?i:-1}},{key:"language",set:function(e){nt.setLanguage.call(this,e,!1)},get:function(){return(nt.getCurrentTrack.call(this)||{}).language}},{key:"pip",set:function(e){if(Ee.pip){var t=W(e)?e:!this.pip;X(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?at:"inline"),X(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}},get:function(){return Ee.pip?te(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===at:null}}],[{key:"supported",value:function(e,t,i){return Ee.check(e,t,i)}},{key:"loadSprite",value:function(e,t){return Ke(e,t)}},{key:"setup",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null;return H(e)?n=Array.from(document.querySelectorAll(e)):G(e)?n=Array.from(e):Y(e)&&(n=e.filter(K)),te(n)?null:n.map((function(e){return new t(e,i)}))}}]),t}();return Ct.defaults=(wt=rt,JSON.parse(JSON.stringify(wt))),Ct}())}).call(this,i("yLpj"))},X2xm:function(e,t,i){e.exports={videoPlayer:"_1MbTrZRy"}},eoXp:function(e,t,i){e.exports={textarea:"_3eYa7BQT"}},kAgB:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={update:function(){"undefined"!==typeof window&&"function"===typeof window.matchMedia&&(n.hover=window.matchMedia("(hover: hover)").matches,n.none=window.matchMedia("(hover: none)").matches||window.matchMedia("(hover: on-demand)").matches,n.anyHover=window.matchMedia("(any-hover: hover)").matches,n.anyNone=window.matchMedia("(any-hover: none)").matches||window.matchMedia("(any-hover: on-demand)").matches)}};n.update(),t.default=n},vlRD:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i("RXBc")}])},vtUw:function(e,t,i){e.exports={formWrapper:"fryCzZKF",form:"_1IOS2kwG",field:"_2D67qLv-",hasDanger:"_2NiO9sUT",button:"mP2B3Ncl",result:"_3fcXD-zm",disclaimer:"_3xeoC99E"}},xw4e:function(e,t,i){e.exports={about:"_3x8W7ufC"}},yKRf:function(e,t,i){e.exports={motion:"_1A98vVyC",title:"_17EX65Aq"}},ywv4:function(e,t,i){e.exports={select:"_-4ESbPa7",isSelected:"_1ij-FwQx",selectWrapper:"U_AKnLMe",arrow:"W0bV4RNx"}},zbGB:function(e,t,i){e.exports={contact:"_5U-RHSq5",left:"dVg-3Bb5",form:"Ijka_JUL",title:"_398r9JjJ",media:"_2LiYDKEN"}}},[["vlRD",0,1,3,2,5,4]]]);